<!DOCTYPE html><html lang="en">
<!-- Mirrored from overiq.com/django-1-11/user-registration-in-django/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:14:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"/>
<script>var __ezHttpConsent={setByCat:function(src,tagType,attributes,category,force){var setScript=function(){if(force||window.ezTcfConsent[category]){var scriptElement=document.createElement(tagType);scriptElement.src=src;attributes.forEach(function(attr){for(var key in attr){if(attr.hasOwnProperty(key)){scriptElement.setAttribute(key,attr[key]);}}});var firstScript=document.getElementsByTagName(tagType)[0];firstScript.parentNode.insertBefore(scriptElement,firstScript);}};if(force||(window.ezTcfConsent&&window.ezTcfConsent.loaded)){setScript();}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){setScript();}else{console.error("cannot get ez consent data");force=true;setScript();}});}else{force=true;setScript();console.error("getEzConsentData is not a function");}},};</script>
<script>var ezTcfConsent=window.ezTcfConsent?window.ezTcfConsent:{loaded:false,store_info:false,develop_and_improve_services:false,measure_ad_performance:false,measure_content_performance:false,select_basic_ads:false,create_ad_profile:false,select_personalized_ads:false,create_content_profile:false,select_personalized_content:false,understand_audiences:false,use_limited_data_to_select_content:false,};function getEzConsentData(){return new Promise(function(resolve){document.addEventListener("ezConsentEvent",function(event){var ezTcfConsent=event.detail.ezTcfConsent;resolve(ezTcfConsent);});});}</script>
<script>if(typeof _setEzCookies!=='function'){function _setEzCookies(ezConsentData){var cookies=window.ezCookieQueue;for(var i=0;i<cookies.length;i++){var cookie=cookies[i];if(ezConsentData&&ezConsentData.loaded&&ezConsentData[cookie.tcfCategory]){document.cookie=cookie.name+"="+cookie.value;}}}}
window.ezCookieQueue=window.ezCookieQueue||[];if(typeof addEzCookies!=='function'){function addEzCookies(arr){window.ezCookieQueue=[...window.ezCookieQueue,...arr];}}
addEzCookies([]);if(window.ezTcfConsent&&window.ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else{console.error("cannot get ez consent data");_setEzCookies(window.ezTcfConsent);}});}else{console.error("getEzConsentData is not a function");_setEzCookies(window.ezTcfConsent);}</script>
<script data-ezscrex='false' data-cfasync='false' data-pagespeed-no-defer>var __ez=__ez||{};__ez.stms=Date.now();__ez.evt={};__ez.script={};__ez.ck=__ez.ck||{};__ez.template={};__ez.template.isOrig=true;window.__ezScriptHost="//www.ezojs.com";__ez.queue=__ez.queue||function(){var e=0,i=0,t=[],n=!1,o=[],r=[],s=!0,a=function(e,i,n,o,r,s,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,d=this;this.name=e,this.funcName=i,this.parameters=null===n?null:w(n)?n:[n],this.isBlock=o,this.blockedBy=r,this.deleteWhenComplete=s,this.isError=!1,this.isComplete=!1,this.isInitialized=!1,this.proceedIfError=a,this.fWindow=l,this.isTimeDelay=!1,this.process=function(){f("... func = "+e),d.isInitialized=!0,d.isComplete=!0,f("... func.apply: "+e);var i=d.funcName.split("."),n=null,o=this.fWindow||window;i.length>3||(n=3===i.length?o[i[0]][i[1]][i[2]]:2===i.length?o[i[0]][i[1]]:o[d.funcName]),null!=n&&n.apply(null,this.parameters),!0===d.deleteWhenComplete&&delete t[e],!0===d.isBlock&&(f("----- F'D: "+d.name),m())}},l=function(e,i,t,n,o,r,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,l=this;this.name=e,this.path=i,this.async=o,this.defer=r,this.isBlock=t,this.blockedBy=n,this.isInitialized=!1,this.isError=!1,this.isComplete=!1,this.proceedIfError=s,this.fWindow=a,this.isTimeDelay=!1,this.isPath=function(e){return"/"===e[0]&&"/"!==e[1]},this.getSrc=function(e){return void 0!==window.__ezScriptHost&&this.isPath(e)&&"banger.js"!==this.name?window.__ezScriptHost+e:e},this.process=function(){l.isInitialized=!0,f("... file = "+e);var i=this.fWindow?this.fWindow.document:document,t=i.createElement("script");t.src=this.getSrc(this.path),!0===o?t.async=!0:!0===r&&(t.defer=!0),t.onerror=function(){var e={url:window.location.href,name:l.name,path:l.path,user_agent:window.navigator.userAgent};"undefined"!=typeof _ezaq&&(e.pageview_id=_ezaq.page_view_id);var i=encodeURIComponent(JSON.stringify(e)),t=new XMLHttpRequest;t.open("GET/index.html","//g.ezoic.net/ezqlog?d="+i,!0),t.send(),f("----- ERR'D: "+l.name),l.isError=!0,!0===l.isBlock&&m()},t.onreadystatechange=t.onload=function(){var e=t.readyState;f("----- F'D: "+l.name),e&&!/loaded|complete/.test(e)||(l.isComplete=!0,!0===l.isBlock&&m())},i.getElementsByTagName("head")[0].appendChild(t)}},d=function(e,i){this.name=e,this.path="",this.async=!1,this.defer=!1,this.isBlock=!1,this.blockedBy=[],this.isInitialized=!0,this.isError=!1,this.isComplete=i,this.proceedIfError=!1,this.isTimeDelay=!1,this.process=function(){}};function c(e,i,n,s,a,d,c,u,f){var m=new l(e,i,n,s,a,d,c,f);!0===u?o[e]=m:r[e]=m,t[e]=m,h(m)}function h(e){!0!==u(e)&&0!=s&&e.process()}function u(e){if(!0===e.isTimeDelay&&!1===n)return f(e.name+" blocked = TIME DELAY!"),!0;if(w(e.blockedBy))for(var i=0;i<e.blockedBy.length;i++){var o=e.blockedBy[i];if(!1===t.hasOwnProperty(o))return f(e.name+" blocked = "+o),!0;if(!0===e.proceedIfError&&!0===t[o].isError)return!1;if(!1===t[o].isComplete)return f(e.name+" blocked = "+o),!0}return!1}function f(e){var i=window.location.href,t=new RegExp("[?&]ezq=([^&#]*)","i").exec(i);"1"===(t?t[1]:null)&&console.debug(e)}function m(){++e>200||(f("let's go"),p(o),p(r))}function p(e){for(var i in e)if(!1!==e.hasOwnProperty(i)){var t=e[i];!0===t.isComplete||u(t)||!0===t.isInitialized||!0===t.isError?!0===t.isError?f(t.name+": error"):!0===t.isComplete?f(t.name+": complete already"):!0===t.isInitialized&&f(t.name+": initialized already"):t.process()}}function w(e){return"[object Array]"==Object.prototype.toString.call(e)}return window.addEventListener("load",(function(){setTimeout((function(){n=!0,f("TDELAY -----"),m()}),5e3)}),!1),{addFile:c,addFileOnce:function(e,i,n,o,r,s,a,l,d){t[e]||c(e,i,n,o,r,s,a,l,d)},addDelayFile:function(e,i){var n=new l(e,i,!1,[],!1,!1,!0);n.isTimeDelay=!0,f(e+" ...  FILE! TDELAY"),r[e]=n,t[e]=n,h(n)},addFunc:function(e,n,s,l,d,c,u,f,m,p){!0===c&&(e=e+"_"+i++);var w=new a(e,n,s,l,d,u,f,p);!0===m?o[e]=w:r[e]=w,t[e]=w,h(w)},addDelayFunc:function(e,i,n){var o=new a(e,i,n,!1,[],!0,!0);o.isTimeDelay=!0,f(e+" ...  FUNCTION! TDELAY"),r[e]=o,t[e]=o,h(o)},items:t,processAll:m,setallowLoad:function(e){s=e},markLoaded:function(e){if(e&&0!==e.length){if(e in t){var i=t[e];!0===i.isComplete?f(i.name+" "+e+": error loaded duplicate"):(i.isComplete=!0,i.isInitialized=!0)}else t[e]=new d(e,!0);f("markLoaded dummyfile: "+t[e].name)}},logWhatsBlocked:function(){for(var e in t)!1!==t.hasOwnProperty(e)&&u(t[e])}}}();__ez.evt.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n()},__ez.evt.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]};__ez.script.add=function(e){var t=document.createElement("script");t.src=e,t.async=!0,t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)};__ez.dot={};__ez.queue.addFile('../../detroitchicago/boise.js', '../../detroitchicago/boisebb26.js?gcb=195-3&amp;cb=5', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/abilene.js', '../../parsonsmaize/abilenec0f9.js?gcb=195-3&amp;cb=7f81d60744', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/mulvane.js', '../../parsonsmaize/mulvane2d63.js?gcb=195-3&amp;cb=e75e48eec0', true, ['/parsonsmaize/abilene.js'], true, false, true, false);__ez.queue.addFile('../../detroitchicago/birmingham.js', '../../detroitchicago/birminghame7ec.js?gcb=195-3&amp;cb=539c47377c', true, ['/parsonsmaize/abilene.js'], true, false, true, false);</script>
<script data-ezscrex="false" type="text/javascript" data-cfasync="false">window._ezaq = Object.assign({"ad_cache_level":1,"adpicker_placement_cnt":0,"ai_placeholder_cache_level":1,"ai_placeholder_placement_cnt":-1,"domain_id":92771,"ezcache_level":1,"ezcache_skip_code":0,"has_bad_image":0,"has_bad_words":0,"is_sitespeed":0,"lt_cache_level":0,"response_size":106016,"response_size_orig":100248,"response_time_orig":1008,"template_id":5,"url":"https://overiq.com/django-1-11/user-registration-in-django/","word_count":0,"worst_bad_word_level":0}, typeof window._ezaq !== "undefined" ? window._ezaq : {});__ez.queue.markLoaded('ezaqBaseReady');</script>
<script type='text/javascript' data-ezscrex='false' data-cfasync='false'>
window.ezAnalyticsStatic = true;

function analyticsAddScript(script) {
	var ezDynamic = document.createElement('script');
	ezDynamic.type = 'text/javascript';
	ezDynamic.innerHTML = script;
	document.head.appendChild(ezDynamic);
}
function getCookiesWithPrefix() {
    var allCookies = document.cookie.split(';');
    var cookiesWithPrefix = {};

    for (var i = 0; i < allCookies.length; i++) {
        var cookie = allCookies[i].trim();

        for (var j = 0; j < arguments.length; j++) {
            var prefix = arguments[j];
            if (cookie.indexOf(prefix) === 0) {
                var cookieParts = cookie.split('=');
                var cookieName = cookieParts[0];
                var cookieValue = cookieParts.slice(1).join('=');
                cookiesWithPrefix[cookieName] = decodeURIComponent(cookieValue);
                break; // Once matched, no need to check other prefixes
            }
        }
    }

    return cookiesWithPrefix;
}
function productAnalytics() {
	var d = {"pr":[6],"omd5":"ff59735131fa3de1cf542d9cde4fd7a6"};
	d.u = _ezaq.url;
	d.p = _ezaq.page_view_id;
	d.v = _ezaq.visit_uuid;
	d.ab = _ezaq.ab_test_id;
	d.e = JSON.stringify(_ezaq);
	d.ref = document.referrer;
	d.c = getCookiesWithPrefix('active_template', 'ez', 'lp_');
	if(typeof ez_utmParams !== 'undefined') {
		d.utm = ez_utmParams;
	}

	var dataText = JSON.stringify(d);
	var xhr = new XMLHttpRequest();
	xhr.open('POST/index.html','/ezais/analytics?cb=1', true);
	xhr.onload = function () {
		if (xhr.status!=200) {
            return;
		}

        if(document.readyState !== 'loading') {
            analyticsAddScript(xhr.response);
            return;
        }

        var eventFunc = function() {
            if(document.readyState === 'loading') {
                return;
            }
            document.removeEventListener('readystatechange', eventFunc, false);
            analyticsAddScript(xhr.response);
        };

        document.addEventListener('readystatechange', eventFunc, false);
	};
	xhr.setRequestHeader('Content-Type','text/plain');
	xhr.send(dataText);
}
__ez.queue.addFunc("productAnalytics", "productAnalytics", null, true, ['ezaqBaseReady'], false, false, false, true);
</script><base />
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>User Registration in Django - Django 1.11 Tutorial - OverIQ.com</title>

    
    



    <meta name="description" content="Django authentication framework (django.contrib.auth) provides a form named UserCreationForm (which inherits from ModelForm class) to handle the crea…"/>



    <link rel="canonical" href="index.html"/>


<meta property="og:locale" content="en_US"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="User Registration in Django"/>

    <meta property="og:description" content="Django authentication framework (django.contrib.auth) provides a form named UserCreationForm (which inherits from ModelForm class) to handle the crea…"/>


<meta property="og:url" content="https://overiq.com/django-1-11/user-registration-in-django/"/>
<meta property="og:site_name" content="OverIQ.com"/>


<meta property="article:publisher" content="https://www.facebook.com/OverIQ/"/>



<meta name="twitter:card" content="summary_large_image"/>

    <meta name="twitter:description" content="Django authentication framework (django.contrib.auth) provides a form named UserCreationForm (which inherits from ModelForm class) to handle the crea…"/>


<meta name="twitter:title" content="User Registration in Django"/>
<meta name="twitter:site" content="@infoOverIQ"/>

<meta name="twitter:creator" content="@infoOverIQ"/>




    
    
    


    
    
    


    <link rel="alternate" type="application/rss+xml" title="RSS" href="../../feed.xml/index.html"/>
    
    
    <link href="../../../fonts.googleapis.com/cssd2d5.css?family=Open+Sans" rel="stylesheet"/>
    <link rel="stylesheet" href="../../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="icon" href="../../static/wiki/favicon.png" sizes="32x32"/>

    <link rel="stylesheet" href="../../static/CACHE/css/output.db46da465a8b.css" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-125424793-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125424793-1');
    </script>


<script type='text/javascript'>
var ezoTemplate = 'orig_site';
var ezouid = '1';
var ezoFormfactor = '1';
</script><script data-ezscrex="false" type='text/javascript'>
var soc_app_id = '0';
var did = 92771;
var ezdomain = 'overiq.com';
var ezoicSearchable = 1;
</script></head>
<body>

<div class="overiq-header text-center">
    <div class="site-branding">
        <p class="main-title">
            <a href="../../index.html" rel="home">
                OverIQ.com
            </a>
        </p>
    </div>
</div>

<!-- Navigation -->
<nav class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">Home</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                

                <li>
                    <a href="../../blog/index.html">Blog</a>
                </li>
                <li>
                    <a href="../../contact/index.html">Contact</a>
                </li>
                <li>
                    <a href="../../about/index.html">About</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right visible-lg visible-md">
                <li>
                    <a href="../../feed.xml/index.html" title="RSS" target="_blank">
                        <i class="fa fa-rss fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/overiq/" target="_blank" title="Github">
                        <i class="fa fa-github fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://www.facebook.com/OverIQ/" target="_blank" title="Facebook">
                        <i class="fa fa-facebook fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://twitter.com/infoOverIQ" target="_blank" title="Twitter">
                        <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
                    </a>
                </li>

                

            </ul>

            <form action="https://overiq.com/search/" class="navbar-form navbar-left" role="search">

                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search" name="query" value=""/>
                </div>

                <button type="submit" class="btn btn-default">Submit</button>
            </form>

        </div>



        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">

    


    <div class="se-pre-con"></div>

    

    <div class="row">

        
        <div class="main">
            <div class="col-lg-8 col-md-8 col-sm-12">
                

    


    
        <ol class="breadcrumb">

    <li><a href="../../index.html">Home</a></li>

    
        
        <li><a href="../index.html">Django 1.11 Tutorial</a></li>
        

        

        
    
        

        

        
            <li class="active">User Registration in Django</li>
        
    

</ol>
    


<h1>User Registration in Django</h1>




    <p><i class="fa fa-calendar" aria-hidden="true"></i>
        Last updated on July 27, 2020
    </p>


<hr/>



<p>Django authentication framework (<code>django.contrib.auth</code>) provides a form named <code>UserCreationForm</code> (which inherits from <code>ModelForm</code> class) to handle the creation of new users. It has three fields namely <code>username</code>, <code>password1</code> and <code>password2</code> (for password confirmation). To use <code>UserCreationForm</code> you have to first import it from <code>django.contrib.auth.forms</code> as follows:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">UserCreationForm</span>
</pre></div>
</div>
<p>Unfortunately, Django doesn&#39;t provide any view to handle the creation of users, so we have to create our own view.</p>

<p>In djangobin app&#39;s <code>urls.py</code> file, add a URL pattern named <code>signup</code> at the end of the <code>urlpatterns</code> list.</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^userdetails/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user_details</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;user_details&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^signup/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">signup</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;signup&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Create a view function called <code>signup()</code> in djangobin&#39;s <code>views.py</code> as follows:</p>

<p><strong>djangobin/django_project/djangobin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.decorators</span> <span class="kn">import</span> <span class="n">login_required</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">UserCreationForm</span>
</span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">SnippetForm</span><span class="p">,</span> <span class="n">ContactForm</span><span class="p">,</span> <span class="n">LoginForm</span>
<span class="c1">#...</span>

<span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1">#...</span>

<span class="hll"><span class="k">def</span> <span class="nf">signup</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">:</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;djangobin:profile&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">UserCreationForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
</span><span class="hll">        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
</span><span class="hll">            <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;Account created successfully&#39;</span><span class="p">)</span>
</span><span class="hll">            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;signup&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">UserCreationForm</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;djangobin/signup.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">})</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Next, create a new template <code>signup.html</code> in the <code>templates</code> directory with the following code:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/signup.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;djangobin/base.html&#34;</span>  <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Sign Up - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>
<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Sign Up&lt;/h4&gt;</span>
<span class="x">            &lt;hr&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;p class=&#34;alert alert-info&#34;&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">            &lt;form method=&#34;post&#34;&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;table class=&#34;table&#34;&gt;</span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.as_table</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;tr&gt;</span>
<span class="x">                        &lt;td&gt;&lt;input type=&#34;hidden&#34; name=&#34;next&#34; value=&#34;</span><span class="cp">{{</span> <span class="nv">next</span> <span class="cp">}}</span><span class="x">&#34;&gt;&lt;/td&gt;</span>
<span class="x">                        &lt;td&gt;&lt;button type=&#34;submit&#34; class=&#34;btn btn-primary&#34;&gt;Submit&lt;/button&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;/tr&gt;</span>
<span class="x">                &lt;/table&gt;</span>

<span class="x">            &lt;/form&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;/reset-password/&#34;&gt;Forgot Password?&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:login&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Login.&lt;/a&gt; &lt;br&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Add a link to Sign Up page in <code>base.html</code> template as follows:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/base.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# ... #}</span><span class="x"></span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_authenticated</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                        &lt;ul class=&#34;dropdown-menu&#34;&gt;</span>
<span class="x">                            &lt;li&gt;&lt;a href=&#34;&#34;&gt;My Pastes&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                            &lt;li&gt;&lt;a href=&#34;&#34;&gt;Account Details&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                            &lt;li&gt;&lt;a href=&#34;&#34;&gt;Settings&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                            &lt;li role=&#34;separator&#34; class=&#34;divider&#34;&gt;&lt;/li&gt;</span>
<span class="x">                            &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:logout&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Logout&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                        &lt;/ul&gt;</span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                        &lt;ul class=&#34;dropdown-menu&#34;&gt;</span>
<span class="hll"><span class="x">                            &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:signup&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Sign Up&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="x">                            &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:login&#39;</span> <span class="cp">%}</span><span class="x">?next=</span><span class="cp">{{</span> <span class="nv">request.path</span> <span class="cp">}}</span><span class="x">&#34;&gt;Login&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                        &lt;/ul&gt;</span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="c">{# ... #}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Open your browser and navigate to <code>http://127.0.0.1:8000/signup/</code>. You should see Sign Up page like this.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_202-f7c736e6-2fe5-4f42-b840-ebef79101ba5.png" loading="lazy" alt=""/></p>

<p>Create a new user by entering username and password. On success, you will be greeted with &#34;Account created successfully&#34; message.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_204-4ab9bd4a-d1d3-4341-bcc3-3b45259aa21e.png" loading="lazy" alt=""/></p>

<p>If entered username already exists or passwords don&#39;t match then the form will display errors like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_203-4bb4e3ab-b402-4dfd-a4f1-45f9dfe6bbd8.png" loading="lazy" alt=""/></p>

<p>Users created using <code>UserCreationForm</code> will have <code>is_superuser</code> and <code>is_staff</code> attribute set to <code>False</code> but <code>is_active</code> set to <code>True</code>, which means that these users can&#39;t login into the Django admin site.</p>

<p>Another point to keep in mind is that everytime we create a new <code>User</code> object, an associated <code>Author</code> instance will be created automatically. This is because the <code>post_save</code> signal from the <code>User</code> model triggers the execution of <code>create_author()</code> function defined in <code>models.py</code> file.</p>

<p>The only drawback of <code>UserCreationForm</code> is that it doesn&#39;t have <code>email</code> field. As a result, we can&#39;t use it to send email verification to verify the account.</p>

<p>Most of the time a user registration involves the following steps:</p>

<ol>
<li>The user fills the registration form and hit submit.</li>
<li>The site sends an email verification link to the submitted email.</li>
<li>User clicks on the activation link to verify the account.</li>
</ol>

<p>At this point, we have two options:</p>

<ol>
<li>Extend the <code>UserCreationForm</code> to include email field and email verification capability.</li>
<li>Create a completely new user registration form from scratch.</li>
</ol>

<p><a href="../../django-1-10/django-creating-users-using-usercreationform/index.html">In Django 1.10 series</a>, we have already seen how you can go about creating a registration form from scratch. Consequently, in this series, we will take an alternate approach.</p>
<span id="extending-usercreationform" class="anchor-target"></span><h2 class="heading">Extending UserCreationForm <a class="header-link" href="#extending-usercreationform">#</a></h2>

<p>Open djangobin&#39;s <code>forms.py</code> and add <code>CreateUserForm</code> towards the end of the file as follows:</p>

<p><strong>djangobin/django_project/djangobin/forms.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="kn">from</span> <span class="nn">django.core.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">UserCreationForm</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.contrib.auth.tokens</span> <span class="kn">import</span> <span class="n">default_token_generator</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.utils.encoding</span> <span class="kn">import</span> <span class="n">force_bytes</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.utils.http</span> <span class="kn">import</span> <span class="n">urlsafe_base64_encode</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.template.loader</span> <span class="kn">import</span> <span class="n">render_to_string</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.core.mail</span> <span class="kn">import</span> <span class="n">send_mail</span>
</span><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Snippet</span><span class="p">,</span> <span class="n">Language</span><span class="p">,</span> <span class="n">Author</span><span class="p">,</span> <span class="n">Tag</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">Preference</span><span class="p">,</span> <span class="n">get_current_user</span>

<span class="c1">#...</span>

<span class="k">class</span> <span class="nc">CreateUserForm</span><span class="p">(</span><span class="n">UserCreationForm</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">User</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;password1&#39;</span><span class="p">,</span> <span class="s1">&#39;password2&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clean_email</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">email</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&#34;This field is required.&#34;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">count</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&#34;Email is taken.&#34;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>

        <span class="n">user</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">CreateUserForm</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># &#39;from_email&#39;: settings.DEFAULT_FROM_EMAIL,</span>
            <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
            <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">scheme</span><span class="p">,</span>
            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">),</span>
            <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">],</span>
            <span class="s1">&#39;uid&#39;</span><span class="p">:</span> <span class="n">urlsafe_base64_encode</span><span class="p">(</span><span class="n">force_bytes</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)),</span>
            <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">default_token_generator</span><span class="o">.</span><span class="n">make_token</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="n">subject</span> <span class="o">=</span> <span class="n">render_to_string</span><span class="p">(</span><span class="s1">&#39;djangobin/email/activation_subject.txt&#39;</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">render_to_string</span><span class="p">(</span><span class="s1">&#39;djangobin/email/activation_email.txt&#39;</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="n">send_mail</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEFAULT_FROM_EMAIL</span><span class="p">,</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">user</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The first step in creating a custom registration form is to create a class which inherits from <code>UserCreationForm</code> class.</p>

<p>In line 19, we specify model fields we want to show in the form.</p>

<p>In lines 21-27, we are defining a cleaning method for the email field. This method ensures that the user must provide a unique email id.</p>

<p>Finally, in lines 29-50, we are overriding <code>save()</code> method of the <code>UserCreationForm</code>. The <code>save()</code> method does two things: saves the user into the database after setting its <code>is_active</code> attribute to <code>False</code> (so that account can&#39;t be used to login) and sends an email verification to the user email.</p>

<p>To send email we are using built-in <code>send_mail()</code> function.</p>

<p>The code for email body and subject is stored in the <code>email</code> subdirectory inside the djangobin&#39;s <code>templates/djangobin</code> directory.</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/email/activation_subject.txt</strong></p>
<div class="codeblock language-text"><div class="highlight"><pre><span></span>Action Required to Complete the Account Creation - djangobin
</pre></div>
</div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/email/activation_email.txt</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Hello {{ username }}!

To confirm your registration, visit the following link:

{{ protocol }}://{{ domain }}{% url &#39;djangobin:activate&#39; uid token %}

Welcome to Djanagobin!
</pre></div>
</td></tr></tbody></table></div>
<p>In lines 45-46, we are using a new function named <code>render_to_string()</code>. The <code>render_to_string()</code> function loads the template, renders it and returns the resulting string.</p>

<p>The <code>context</code> variable we define in lines 35-43, contains the data that will be used by our templates.</p>

<p>There are two important bits of information here:</p>

<ol>
<li>uid</li>
<li>token</li>
</ol>

<p>We use these two pieces of information to create the activation link which will be sent to the user&#39;s email.</p>

<p>The <code>uid</code> is the user&#39;s primary key encoded in base 64 and token is a hash value created using user related data and the current timestamp. A token is used to check whether the activation like is valid or not. By default, the token is only valid for 3 days.</p>

<p>We have included an encoded version of user&#39;s primary key in the activation link so that the activation function can determine the user it needs to activate.</p>

<p>To create the base 64 value from the user&#39;s primary key, we use <code>urlsafe_base64_encode()</code> function. It accepts bytestring and returns a base 64 value. To convert an integer to bytestring, we use <code>force_bytes()</code> function (line 41).</p>

<p>For generating tokens, Django provides a class named <code>PasswordResetTokenGenerator</code>.</p>

<p>This class has two methods:</p>

<ol>
<li><code>make_token(user)</code></li>
<li><code>check_token(user, token)</code></li>
</ol>

<p>The <code>make_token()</code> accepts a user, and returns a token based upon the user related data (line 42). This is how a token looks like:</p>
<div class="codeblock language-bash"><div class="highlight"><pre><span></span>4vf-8544d0407636ec564e5b
</pre></div>
</div>
<p>And the complete verification link looks like this:</p>
<div class="codeblock language-bash"><div class="highlight"><pre><span></span>http://example.com/MQ/4vf-8544d0407636ec564e5b/
</pre></div>
</div>
<p>where <code>MQ</code> refers to the user&#39;s primary key encoded in base 64.</p>

<p>Now you know how the activation like is created. Let&#39;s see what happens when a user clicks the link.</p>

<p>The first step in activating an account is to decode the user&#39;s primary key in base 64 (<code>MQ</code> in the above URL). To do so, we use use <code>urlsafe_base64_decode()</code> function. The function returns bytestring, so we use <code>force_bytes()</code> function to convert bytestring to str.</p>

<p>Once we have the primary key, we fetch the associated object from the database and call <code>check_token()</code> to verify the whether the token is valid or not.</p>

<p>If the token is valid we set <code>is_active</code> attribute to <code>True</code> and redirect the user to the login page. On the other hand, if the token is invalid, we show an invalid token error message to the user.</p>

<p>Open <code>views.py</code> and modify <code>signup()</code> view function to use <code>CreateUserForm</code> as follows:</p>

<p><strong>djangobin/django_project/djangobin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="hll"><span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">SnippetForm</span><span class="p">,</span> <span class="n">ContactForm</span><span class="p">,</span> <span class="n">LoginForm</span><span class="p">,</span> <span class="n">CreateUserForm</span>
</span><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Language</span><span class="p">,</span> <span class="n">Snippet</span><span class="p">,</span> <span class="n">Tag</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">paginate_result</span>
<span class="c1">#...</span>


<span class="k">def</span> <span class="nf">signup</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">CreateUserForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
</span><span class="hll">        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
</span><span class="hll">            <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span><span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;Account created successfully. Check email to verify the account.&#39;</span><span class="p">)</span>
</span><span class="hll">            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;djangobin:signup&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">CreateUserForm</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;djangobin/signup.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">})</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>The view function to activate the user is called <code>activate_account()</code> and is defined just below the <code>signup()</code> view function:</p>

<p><strong>djangobin/django_project/djangobin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.contrib.auth.tokens</span> <span class="kn">import</span> <span class="n">default_token_generator</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.utils.encoding</span> <span class="kn">import</span> <span class="n">force_bytes</span><span class="p">,</span> <span class="n">force_text</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.utils.http</span> <span class="kn">import</span> <span class="n">urlsafe_base64_encode</span><span class="p">,</span> <span class="n">urlsafe_base64_decode</span>
</span><span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">SnippetForm</span><span class="p">,</span> <span class="n">ContactForm</span><span class="p">,</span> <span class="n">LoginForm</span><span class="p">,</span> <span class="n">CreateUserForm</span>
<span class="c1">#...</span>

<span class="c1">#...</span>

<span class="k">def</span> <span class="nf">signup</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1">#...</span>

<span class="hll"><span class="k">def</span> <span class="nf">activate_account</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">uidb64</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
</span><span class="hll">    <span class="k">try</span><span class="p">:</span>
</span><span class="hll">        <span class="n">uid</span> <span class="o">=</span> <span class="n">force_text</span><span class="p">(</span><span class="n">urlsafe_base64_decode</span><span class="p">(</span><span class="n">uidb64</span><span class="p">))</span>
</span><span class="hll">        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span>
</span><span class="hll">    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">OverflowError</span><span class="p">,</span> <span class="n">User</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">):</span>
</span><span class="hll">        <span class="n">user</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class="hll">    <span class="k">if</span> <span class="p">(</span><span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">default_token_generator</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">token</span><span class="p">)):</span>
</span><span class="hll">        <span class="n">user</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class="hll">        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">        <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Account activated. Please login.&#39;</span><span class="p">)</span>
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Link Expired. Contact admin to activate your account.&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;djangobin:login&#39;</span><span class="p">)</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>In the djangobin&#39;s <code>urls.py</code> file add a new URL pattern to activate the account as follows:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^userdetails/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user_details</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;user_details&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^signup/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">signup</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;signup&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^activate/&#39;</span>
</span><span class="hll">        <span class="sa">r</span><span class="s1">&#39;(?P&lt;uidb64&gt;[0-9A-Za-z_\-]+)/&#39;</span>
</span><span class="hll">        <span class="sa">r</span><span class="s1">&#39;(?P&lt;token&gt;[0-9A-Za-z]{1,13}&#39;</span>
</span><span class="hll">        <span class="sa">r</span><span class="s1">&#39;-[0-9A-Za-z]{1,20})/$&#39;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">views</span><span class="o">.</span><span class="n">activate_account</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;activate&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Now, open your browser and navigate to <code>http://localhost:8000/signup/</code>. Enter data in all the fields and hit submit.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_205-ec3b2370-ff56-4684-aa55-29b93fe95f67.png" loading="lazy" alt=""/></p>

<p>In the shell, running the server you will get a verification email like this:</p>
<div class="codeblock language-bash"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">11</span>/May/2018 <span class="m">11</span>:27:31<span class="o">]</span> <span class="s2">&#34;GET /signup/ HTTP/1.1&#34;</span> <span class="m">200</span> <span class="m">10594</span>
Content-Type: text/plain<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span>
MIME-Version: <span class="m">1</span>.0
Content-Transfer-Encoding: 7bit
Subject: Action Required to Complete the Account Creation - djangobin
From: infooveriq@gmail.com
To: django@example.com
Date: Fri, <span class="m">11</span> May <span class="m">2018</span> <span class="m">11</span>:27:53 -0000
Message-ID: &lt;<span class="m">20180511112753</span>.25336.4090@pc&gt;

Hello django!

To confirm your registration, visit the following link:

http://localhost:8000/activate/MTM/4w3-81e3511bd45dc04e8ba9/

Welcome to Djanagobin!
-------------------------------------------------------------------------------
</pre></div>
</td></tr></tbody></table></div>
<p>To activate the account, copy the verification link and paste it into your browser address bar. On success, you will be redirected to the login page:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_206-0cbed18d-6970-45e9-9754-f4cb20aad866.png" loading="lazy" alt=""/></p>

<p>If the link is expired or tampered with, then will see the following error.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_207-371b0217-b081-47cf-8e78-48332d348e5e.png" loading="lazy" alt=""/></p>
<span id="resetting-password" class="anchor-target"></span><h2 class="heading">Resetting Password <a class="header-link" href="#resetting-password">#</a></h2>

<p>Let&#39;s admit, once in a while, everyone forgets their password. Resetting password involves working with the following four built-in view functions:</p>

<ul>
<li><code>password_reset()</code></li>
<li><code>password_reset_done()</code></li>
<li><code>password_reset_confirm()</code></li>
<li><code>password_reset_complete()</code></li>
</ul>

<p>Here is the workflow for resetting the password:</p>

<ol>
<li><p>The <code>password_reset()</code> view displays the form which lets users to enter email and sends the password reset link to the user&#39;s email.</p></li>
<li><p>The <code>password_reset_done()</code> view shows a page containing instructions on how to reset password like open email, click the link, look for an email in spam etc. This view is called immediately after the <code>password_reset()</code> view done working. Note that this view will always be called no matter whether the email entered in step 1 exists in the database or not. This prevents potential attackers from knowing whether an email exists in the database or not.</p></li>
<li><p>The <code>password_reset_confirm()</code> is called when the user visits the password reset link sent to the email. It shows a form for entering a new password.</p></li>
<li><p>Finally, the <code>password_reset_complete()</code> view is called to inform the user that the password has been changed.</p></li>
</ol>

<p>The following table lists the default templates used by these view functions:</p>
<div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>View</th>
<th>Templates</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>password_reset()</code></td>
<td>registration/password_reset_form.html, registration/password_reset_email.html, registration/password_reset_subject.txt</td>
</tr>
<tr>
<td><code>password_reset_done()</code></td>
<td>registration/password_reset_done.html</td>
</tr>
<tr>
<td><code>password_reset_confirm()</code></td>
<td>registration/password_reset_confirm.html</td>
</tr>
<tr>
<td><code>password_reset_complete()</code></td>
<td>registration/password_reset_confirm.html</td>
</tr>
</tbody>
</table></div>
<p>These templates are stored in the <code>templates</code> directory of the <code>django.contrib.admin</code> app.</p>

<p>The look and feel of all these templates closely resemble to the Django admin site. As a result, they are not suitable for our project.</p>

<p>So how do we override default templates?</p>

<p>If you inspect the signature of view functions in <code>django/contrib/auth/views.py</code>, you would find that each of them accepts an argument named <code>template_name</code>.</p>

<p><strong>django/contrib/auth/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">password_reset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
                   <span class="n">template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_form.html&#39;</span><span class="p">,</span>
                   <span class="n">email_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_email.html&#39;</span><span class="p">,</span>
                   <span class="n">subject_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_subject.txt&#39;</span><span class="p">,</span>
                   <span class="n">password_reset_form</span><span class="o">=</span><span class="n">PasswordResetForm</span><span class="p">,</span>
                   <span class="c1">#...):</span>

<span class="k">def</span> <span class="nf">password_reset_done</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
                        <span class="n">template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_done.html&#39;</span><span class="p">,</span>
                        <span class="n">extra_context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>                   

<span class="k">def</span> <span class="nf">password_reset_confirm</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">uidb64</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_confirm.html&#39;</span><span class="p">,</span>
                           <span class="n">token_generator</span><span class="o">=</span><span class="n">default_token_generator</span><span class="p">,</span>
                           <span class="c1">#...):</span>

<span class="k">def</span> <span class="nf">password_reset_complete</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
                            <span class="n">template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_complete.html&#39;</span><span class="p">,</span>
                            <span class="n">extra_context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</pre></div>
</td></tr></tbody></table></div>
<p>We will also override the default template used to create the email. If you pay close attention to the <code>password_reset()</code> signature you would find that the arguments of interest are: <code>email_template_name</code> and <code>subject_template_name</code>.</p>

<p>Open <code>urls.py</code> file and add the following 4 URL patterns at the end of the list:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^activate/&#39;</span>
        <span class="sa">r</span><span class="s1">&#39;(?P&lt;uidb64&gt;[0-9A-Za-z_\-]+)/&#39;</span>
        <span class="sa">r</span><span class="s1">&#39;(?P&lt;token&gt;[0-9A-Za-z]{1,13}&#39;</span>
        <span class="sa">r</span><span class="s1">&#39;-[0-9A-Za-z]{1,20})/$&#39;</span><span class="p">,</span>
        <span class="n">views</span><span class="o">.</span><span class="n">activate_account</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;activate&#39;</span><span class="p">),</span>

<span class="hll">    <span class="c1"># password reset URLs</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="s1">&#39;^password-reset/$&#39;</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">password_reset</span><span class="p">,</span>
</span><span class="hll">        <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/password_reset.html&#39;</span><span class="p">,</span>
</span><span class="hll">         <span class="s1">&#39;email_template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/email/password_reset_email.txt&#39;</span><span class="p">,</span>
</span><span class="hll">         <span class="s1">&#39;subject_template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/email/password_reset_subject.txt&#39;</span><span class="p">,</span>
</span><span class="hll">         <span class="s1">&#39;post_reset_redirect&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin:password_reset_done&#39;</span><span class="p">,</span>
</span><span class="hll">        <span class="p">},</span>
</span><span class="hll">        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_reset&#39;</span><span class="p">),</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="s1">&#39;^password-reset-done/$&#39;</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">password_reset_done</span><span class="p">,</span>
</span><span class="hll">        <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/password_reset_done.html&#39;</span><span class="p">,},</span>
</span><span class="hll">        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_reset_done&#39;</span><span class="p">),</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^password-confirm/&#39;</span>
</span><span class="hll">        <span class="sa">r</span><span class="s1">&#39;(?P&lt;uidb64&gt;[0-9A-Za-z_\-]+)/&#39;</span>
</span><span class="hll">        <span class="sa">r</span><span class="s1">&#39;(?P&lt;token&gt;[0-9A-Za-z]{1,13}&#39;</span>
</span><span class="hll">        <span class="sa">r</span><span class="s1">&#39;-[0-9A-Za-z]{1,20})/$&#39;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">auth_views</span><span class="o">.</span><span class="n">password_reset_confirm</span><span class="p">,</span>
</span><span class="hll">        <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/password_reset_confirm.html&#39;</span><span class="p">,</span>
</span><span class="hll">         <span class="s1">&#39;post_reset_redirect&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin:password_reset_complete&#39;</span><span class="p">},</span>
</span><span class="hll">        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_reset_confirm&#39;</span><span class="p">),</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;password-reset-complete/$&#39;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">auth_views</span><span class="o">.</span><span class="n">password_reset_complete</span><span class="p">,</span>
</span><span class="hll">        <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span>
</span><span class="hll">             <span class="s1">&#39;djangobin/password_reset_complete.html&#39;</span><span class="p">},</span>
</span><span class="hll">        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_reset_complete&#39;</span><span class="p">),</span>
</span>    <span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Here are few things to notice:</p>

<ul>
<li><p>The <code>post_reset_redirect</code> argument in the <code>password_reset</code> and <code>password_reset_confirm</code> URL pattern specifies the URL to redirect after after view has done working.</p></li>
<li><p>Just like <code>activate_account()</code> view the <code>password_reset_confirm()</code> also takes <code>uidb64</code> (user&#39;s id encoded in base 64) and <code>token</code> as arguments. As usual, the <code>password_reset_confirm()</code> view decodes the value in <code>uidb64</code>, to know the user it is resetting a password for. And the token is used to check whether the password reset link is valid or not.</p></li>
</ul>

<p>The code for templates used for resetting password is as follows:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/password_reset.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;djangobin/base.html&#34;</span>  <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Password Reset - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>
<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Password Reset&lt;/h4&gt;</span>
<span class="x">            &lt;hr&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;p class=&#34;alert alert-info&#34;&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">            &lt;form method=&#34;post&#34;&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;table class=&#34;table&#34;&gt;</span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.as_table</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;tr&gt;</span>
<span class="x">                        &lt;td&gt;&lt;input type=&#34;hidden&#34; name=&#34;next&#34; value=&#34;</span><span class="cp">{{</span> <span class="nv">next</span> <span class="cp">}}</span><span class="x">&#34;&gt;&lt;/td&gt;</span>
<span class="x">                        &lt;td&gt;&lt;button type=&#34;submit&#34; class=&#34;btn btn-primary&#34;&gt;Submit&lt;/button&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;/tr&gt;</span>
<span class="x">                &lt;/table&gt;</span>

<span class="x">            &lt;/form&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span>  <span class="s1">&#39;djangobin:signup&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Sign Up&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span>  <span class="s1">&#39;djangobin:login&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Login.&lt;/a&gt; &lt;br&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/email/password_reset_email.txt</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Hello {{ user.email }}!

We&#39;ve received a request to reset {{ user.get_username }}&#39;s password.

If you would like to reset the password, visit the following link:

{{ protocol }}://{{ domain }}{% url &#39;djangobin:password_reset_confirm&#39; uid token %}

If you did not request a password reset, please disregard this mail.

~ Djangobin
</pre></div>
</td></tr></tbody></table></div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/email/password_reset_subject.txt</strong></p>
<div class="codeblock language-text"><div class="highlight"><pre><span></span>Password Reset Request - Djangobin
</pre></div>
</div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/password_reset_done.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;djangobin/base.html&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">load</span> <span class="nv">static</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">load</span> <span class="nv">humanize</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Email Sent&lt;/h4&gt;</span>
<span class="x">            &lt;hr&gt;</span>
<span class="x">            &lt;p&gt;Password reset link is sent to your email.&lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;&#34;&gt;Forgot Password?&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span>  <span class="s1">&#39;djangobin:signup&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Sign Up.&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;#&#34;&gt;Feedback&lt;/a&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/password_reset_confirm.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;djangobin/base.html&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">load</span> <span class="nv">static</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">load</span> <span class="nv">humanize</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>

<span class="x">            &lt;h4&gt;Enter your new password.&lt;/h4&gt;</span>
<span class="x">            &lt;hr&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">validlink</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
<span class="x">                    &lt;table&gt;</span>
<span class="x">                        </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.as_table</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;td&gt;&lt;/td&gt;</span>
<span class="x">                            &lt;td&gt;&lt;button type=&#34;submit&#34; class=&#34;btn btn-primary&#34;&gt;Reset Password&lt;/button&gt;&lt;/td&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                    &lt;/table&gt;</span>
<span class="x">                &lt;/form&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;p&gt;This Link is no longer valid. Click &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:password_reset&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;here&lt;/a&gt; to create a new one.&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;&#34;&gt;Forgot Password?&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span>  <span class="s1">&#39;djangobin:signup&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Sign Up.&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;#&#34;&gt;Feedback&lt;/a&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/password_reset_complete.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;djangobin/base.html&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">load</span> <span class="nv">static</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">load</span> <span class="nv">humanize</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>

<span class="x">            &lt;h4&gt;Password Reset Success&lt;/h4&gt;</span>

<span class="x">            &lt;hr&gt;</span>

<span class="x">            &lt;div class=&#34;db-form&#34;&gt;</span>

<span class="x">                &lt;p&gt;Your password has been reset. Click &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span>  <span class="s1">&#39;djangobin:login&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;here&lt;/a&gt; to login.&lt;/p&gt;</span>

<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;&#34;&gt;Forgot Password?&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span>  <span class="s1">&#39;djangobin:signup&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Sign Up.&lt;/a&gt;</span>
<span class="x">                &lt;a href=&#34;#&#34;&gt;Feedback&lt;/a&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Open your browser and navigate to <code>http://localhost:8000/password-reset/</code>. You will get a password reset page asking for email an like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_208-b17bc344-984b-4add-8b5f-f87f1eb5938f.png" loading="lazy" alt=""/></p>

<p>Enter a valid email and hit submit. You will be taken to <code>http://localhost:8000/password-reset-done/</code> URL which looks like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_209-610eea13-b66b-4a3d-89c5-cb23b88f06ce.png" loading="lazy" alt=""/></p>

<p>If the email entered exists in the database, then you should see the following output in the shell.</p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span>[11/May/2018 13:07:33] &#34;GET /password-reset/ HTTP/1.1&#34; 200 9524
Content-Type: text/plain; charset=&#34;utf-8&#34;
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Subject: Password Reset Request - Djangobin
From: infooveriq@gmail.com
To: noisyboy@mail.com
Date: Fri, 11 May 2018 13:14:49 -0000
Message-ID: &lt;20180511131449.29374.83844@pc&gt;

Hello noisyboy@mail.com!

We&#39;ve received a request to reset noisyboy&#39;s password.

If you would like to reset the password, visit the following link:

http://localhost:8000/password-confirm/Mg/4w3-32c4a6bf60ae7b9dee77/

If you did not request a password reset, please disregard this mail.

~ Djangobin
-------------------------------------------------------------------------------
</pre></div>
</td></tr></tbody></table></div>
<p>Copy the link and paste it into the browser address bar. You will be presented a form for entering a new password.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_211-c323cadf-0501-406d-8d60-5de1360e9d15.png" loading="lazy" alt=""/></p>

<p>Enter new password and hit enter. Finally, you get a success message like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_212-c3697f80-b362-4f13-956d-909b71eee0f8.png" loading="lazy" alt=""/></p>

<p>It is important to note that the password reset link is only valid for 3 days. To extend the validity of the link use <code>PASSWORD_RESET_TIMEOUT_DAYS</code> setting.</p>

<p>Furthermore, password reset link automatically expires after a successful password reset. Trying to visit a password reset link which is expired or tampered with or already used will result in the following error:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_213-aa01db64-faf9-4446-9c6f-cf819bba3f87.png" loading="lazy" alt=""/></p>
<span id="password-change" class="anchor-target"></span><h2 class="heading">Password Change <a class="header-link" href="#password-change">#</a></h2>

<p>In this section, we will create a form to allow logged in users to change their password.</p>

<p>Just like password reset, Django provides the following two built-in views to handle password changes:</p>

<ol>
<li><code>password_change</code></li>
<li><code>password_change_done</code></li>
</ol>

<p>The <code>password_change</code> view displays a form which allows logged in users to change user password, after entering old password.</p>

<p>And the <code>password_change_done</code> view displays success message after the user has changed their password.</p>

<p>Both of these views are password protected so you have to login before you access them.</p>

<p>By default, <code>password_change()</code> and <code>password_change_done()</code> uses <code>password_change_form.html</code> and <code>password_change_done.html</code> templates respectively from Django admin app (<code>django.contrib.admin</code>). We can override this behavior by using <code>template_name</code> keyword argument.</p>

<p>Open <code>urls.py</code> file and add following two URL patterns at the end of the list:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>

    <span class="c1"># password change URLs</span>

    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^password-change/$&#39;</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">password_change</span><span class="p">,</span>
        <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/password_change.html&#39;</span><span class="p">,</span>
        <span class="s1">&#39;post_change_redirect&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin:password_change_done&#39;</span><span class="p">},</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_change&#39;</span>
        <span class="p">),</span>

    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^password-change-done/$&#39;</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">password_change_done</span><span class="p">,</span>
        <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/password_change_done.html&#39;</span><span class="p">},</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;password_change_done&#39;</span>
        <span class="p">),</span>
    <span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Create two new templates <code>password_change.html</code> and <code>password_change_done.html</code> in the <code>templates</code> directory with the following code:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/password_change.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;djangobin/base.html&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Password Change - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>

<span class="x">            &lt;h4&gt;Password change&lt;/h4&gt;</span>
<span class="x">            &lt;hr&gt;</span>

<span class="x">            &lt;form action=&#34;&#34; method=&#34;post&#34; class=&#34;form-horizontal&#34; &gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                 &lt;table class=&#34;table&#34;&gt;</span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.as_table</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;tr&gt;</span>
<span class="x">                        &lt;td&gt;&amp;nbsp;&lt;/td&gt;</span>
<span class="x">                        &lt;td&gt;&lt;button type=&#34;submit&#34; class=&#34;btn btn-primary&#34;&gt;Submit&lt;/button&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;/tr&gt;</span>
<span class="x">                &lt;/table&gt;</span>

<span class="x">            &lt;/form&gt;</span>

<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:profile&#39;</span> <span class="nv">request.user.username</span> <span class="cp">%}</span><span class="x">&#34;&gt;My Pastes&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:user_details&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Account Details&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;&#34;&gt;Settings&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:contact&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Feedback&lt;/a&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/password_change_done.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;djangobin/base.html&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Password Change Done - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>

<span class="x">            &lt;h4&gt;Password change successful&lt;/h4&gt;</span>
<span class="x">            &lt;hr&gt;</span>

<span class="x">            &lt;p&gt;Your password was changed.&lt;/p&gt;</span>

<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:profile&#39;</span> <span class="nv">request.user.username</span> <span class="cp">%}</span><span class="x">&#34;&gt;My Pastes&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:user_details&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Account Details&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;&#34;&gt;Settings&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:contact&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Feedback&lt;/a&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Now, open your browser and navigate to <code>http://localhost:8000/password-change/</code>. You should see password change page like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_228-b058dfc8-804c-4670-96b2-a4cf473e5259.png" loading="lazy" alt=""/></p>

<p>Change your password and on success, you will get a page like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_229-ca87309b-58da-4c4f-b3b2-c233850c7827.png" loading="lazy" alt=""/></p>



    



        <nav aria-label="pagination">
            <ul class="pager">
                
                    <li class="previous">
                        <a href="../django-logging-users-in-and-out/index.html" title="Django Logging Users In and Out">
                            <span class="fa fa-arrow-left" aria-hidden="true"></span>
                            Django Logging Users In and Out
                        </a>
                    </li>
                

                
                    <li class="next">
                        <a href="../building-profile-pages-for-djangobin/index.html" title="Building profile pages for Djangobin">
                            Building profile pages for Djangobin
                            <span class="fa fa-arrow-right" aria-hidden="true"></span>
                        </a>
                    </li>
                
            </ul>
        </nav>







    <hr/>
    <div id="disqus_thread">
    <p style="margin-bottom: 10px" class="text-center">
        <a href="#" class=" btn btn-primary comments-holder" onclick="loadDisqus();return false;">
            <i class="fa fa-comments" aria-hidden="true"></i> Load Comments
        </a>
    </p>
    </div>
    <hr/>
    <script>
        var is_disqus_loaded = false;
        function loadDisqus() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '../../../overiqcom.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        };
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>







            </div>
        </div>


        <div class="sidebar">
        
            <div class="col-lg-4 col-md-4 col-sm-12">
                

    
        
    <div class="well">
        <h4>Django 1.11 Tutorial</h4>
        <ul>
            
                <li><a href="../intro-to-django/index.html">Intro to Django</a></li>
            
                <li><a href="../installing-django/index.html">Installing Django</a></li>
            
                <li><a href="../creating-django-project/index.html">Creating Django Project</a></li>
            
                <li><a href="../mvc-pattern-and-django/index.html">MVC Pattern and Django</a></li>
            
                <li><a href="../views-and-urlconfs-in-django/index.html">Views and URLconfs in Django</a></li>
            
                <li><a href="../creating-urls-and-custom-response/index.html">Creating URLs and Custom Response</a></li>
            
                <li><a href="../basics-of-django-templates/index.html">Basics of Django Templates</a></li>
            
                <li><a href="../template-tags-in-django/index.html">Template tags in Django</a></li>
            
                <li><a href="../template-filters-in-django/index.html">Template filters in Django</a></li>
            
                <li><a href="../loading-templates-in-django/index.html">Loading Templates in Django</a></li>
            
                <li><a href="../template-inheritance-in-django/index.html">Template Inheritance in Django</a></li>
            
                <li><a href="../basics-of-models-in-django/index.html">Basics of Models in Django</a></li>
            
                <li><a href="../migrations-in-django/index.html">Migrations in Django</a></li>
            
                <li><a href="../django-orm-basics-part-1/index.html">Django ORM Basics Part 1</a></li>
            
                <li><a href="../django-orm-basics-part-2/index.html">Django ORM Basics Part 2</a></li>
            
                <li><a href="../django-admin-app/index.html">Django Admin App</a></li>
            
                <li><a href="../django-authentication-framework-basics/index.html">Django Authentication Framework Basics</a></li>
            
                <li><a href="../data-migrations-in-django/index.html">Data migrations in Django</a></li>
            
                <li><a href="../django-form-basics/index.html">Django Form Basics</a></li>
            
                <li><a href="../displaying-forms-in-django/index.html">Displaying Forms in Django</a></li>
            
                <li><a href="../django-rendering-form-fields-manually/index.html">Django Rendering Form Fields Manually</a></li>
            
                <li><a href="../handling-static-content-in-django/index.html">Handling Static Content in Django</a></li>
            
                <li><a href="../handling-media-files-in-django/index.html">Handling Media Files in Django</a></li>
            
                <li><a href="../building-djangobin-the-first-steps/index.html">Building Djangobin - The First Steps</a></li>
            
                <li><a href="../creating-trending-snippet-page/index.html">Creating Trending Snippet Page</a></li>
            
                <li><a href="../building-contact-us-form/index.html">Building Contact Us Form</a></li>
            
                <li><a href="../django-logging-users-in-and-out/index.html">Django Logging Users In and Out</a></li>
            
                <li><a href="index.html">User Registration in Django</a></li>
            
                <li><a href="../building-profile-pages-for-djangobin/index.html">Building profile pages for Djangobin</a></li>
            
                <li><a href="../searching-snippets/index.html">Searching Snippets</a></li>
            
                <li><a href="../asynchronous-tasks-with-celery/index.html">Asynchronous Tasks with Celery</a></li>
            
                <li><a href="../flatpages-in-django/index.html">Flatpages in Django</a></li>
            
                <li><a href="../creating-sitemaps-in-django/index.html">Creating Sitemaps in Django</a></li>
            
                <li><a href="../settings-for-multiple-environments-in-django/index.html">Settings for Multiple Environments in Django</a></li>
            
                <li><a href="../deploying-django-project-to-digitalocean/index.html">Deploying Django Project to DigitalOcean</a></li>
            
        </ul>
    </div>

    

    
        

<div class="well">
    <h4>Recent Posts</h4>
    <ul>
        
            <li><a href="../../machine-learning-experts-you-should-be-following-online/index.html">Machine Learning Experts You Should Be Following Online</a></li>
        
            <li><a href="../../4-ways-to-prepare-for-the-ap-computer-science-a-exam/index.html">4 Ways to Prepare for the AP Computer Science A Exam</a></li>
        
            <li><a href="../../finance-assignment-online-help-for-the-busy-and-tired-students-get-help-from-experts/index.html">Finance Assignment Online Help for the Busy and Tired Students: Get Help from Experts</a></li>
        
            <li><a href="../../top-9-machine-learning-algorithms-for-data-scientists/index.html">Top 9 Machine Learning Algorithms for Data Scientists</a></li>
        
            <li><a href="../../data-science-learning-path-or-steps-to-become-a-data-scientist-final/index.html">Data Science Learning Path or Steps to become a data scientist Final</a></li>
        
            <li><a href="../../enable-edit-button-in-shutter-in-linux-mint-19-and-ubuntu-18-04/index.html">Enable Edit Button in Shutter In Linux Mint 19 and Ubuntu 18.04</a></li>
        
            <li><a href="../../python-3-time-module/index.html">Python 3 time module</a></li>
        
            <li><a href="../../pygments-tutorial/index.html">Pygments Tutorial</a></li>
        
            <li><a href="../../how-to-use-virtualenv/index.html">How to use Virtualenv?</a></li>
        
            <li><a href="../../installing-mysql-windows-linux-and-mac/index.html">Installing MySQL (Windows, Linux and Mac)</a></li>
        
            <li><a href="../../what-is-if-__name__-__main__-in-python/index.html">What is if __name__ == &#39;__main__&#39;  in Python ?</a></li>
        
            <li><a href="../../installing-goaccess-a-real-time-web-log-analyzer/index.html">Installing GoAccess (A Real-time web log analyzer)</a></li>
        
            <li><a href="../../installing-isso/index.html">Installing Isso</a></li>
        
    </ul>
</div>

<!-- Blog Search Well -->





















    



            </div>
        </div>
    </div>



    

</div>

<!-- Footer -->
<footer class="overiq-footer">
    <div class="container">
        <div class="row">

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../terms-of-use/index.html">Terms</a></li>
                    <li><a href="../../privacy-policy/index.html">Privacy Policy</a></li>
                    <li><a href="../../sitemap.xml/index.html">Sitemap</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../contact/index.html">Contact</a></li>
                    <li><a href="../../blog/index.html">Blog</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="https://www.facebook.com/OverIQ/">Facebook</a></li>
                    <li><a href="https://twitter.com/infoOverIQ">Twitter</a></li>
                    <li><a href="https://github.com/overiq">Github</a></li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../c-programming-101/index.html">C Tutorial</a></li>
                    <li><a href="../../python-101/index.html">Python Tutorial</a></li>
                    <li><a href="../index.html">Django Tutorial</a></li>
                    <li><a href="../../flask-101/index.html">Flask Tutorial</a></li>
                    <li><a href="../../mysql-connector-python-101/index.html">MySQL Connector/Python Tutorial</a></li>
                    <li><a href="../../sqlalchemy-101/index.html">SQLAlchemy Tutorial</a></li>
                    <li><a href="../../c-examples/index.html">C Programming Examples</a></li>
                </ul>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <div class="row text-center">
            <p>© 2025 OverIQ.com</p>
            <small><a href="#">Back to top</a></small>
        </div>

        <!-- /.row -->
    </div>
</footer>



<script type="text/javascript" src="../../static/CACHE/js/output.2e0ff002c1a4.js"></script>




<script async="" src="../../../cdn.jsdelivr.net/npm/cookieconsent%403/build/cookieconsent.min.js" data-cfasync="false"></script>

<script>

    
    window.addEventListener('load', function () {
        window.cookieconsent.initialise({
            "palette": {
                "popup": {
                    "background": "#5ca9e0",
                    "text": "#ffffff"
                },
                "button": {
                    "background": "#fff",
                    "text": "#237afc"
                }
            },
            "theme": "classic",
            "position": "top",
            "static": true,
            "content": {
                "href": "https://overiq.com/privacy-policy/"
            }
        });
    });


</script>

<script src="../../../polyfill.io/v3/polyfill.min1162.js?features=es6"></script>
<script id="MathJax-script" defer="" src="../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml.js"></script>

<script async="" type="text/javascript" src="../../../cdn.carbonads.com/carbonfbdb.js?serve=CE7DC53E&amp;placement=overiqcom" id="_carbonads_js"></script>





<script data-cfasync="false">function _emitEzConsentEvent(){var customEvent=new CustomEvent("ezConsentEvent",{detail:{ezTcfConsent:window.ezTcfConsent},bubbles:true,cancelable:true,});document.dispatchEvent(customEvent);}
(function(window,document){function _setAllEzConsentTrue(){window.ezTcfConsent.loaded=true;window.ezTcfConsent.store_info=true;window.ezTcfConsent.develop_and_improve_services=true;window.ezTcfConsent.measure_ad_performance=true;window.ezTcfConsent.measure_content_performance=true;window.ezTcfConsent.select_basic_ads=true;window.ezTcfConsent.create_ad_profile=true;window.ezTcfConsent.select_personalized_ads=true;window.ezTcfConsent.create_content_profile=true;window.ezTcfConsent.select_personalized_content=true;window.ezTcfConsent.understand_audiences=true;window.ezTcfConsent.use_limited_data_to_select_content=true;window.ezTcfConsent.select_personalized_content=true;}
function _clearEzConsentCookie(){document.cookie="ezCMPCookieConsent=tcf2;Domain=.overiq.com;Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT";}
_clearEzConsentCookie();if(typeof window.__tcfapi!=="undefined"){window.ezgconsent=false;var amazonHasRun=false;function _ezAllowed(tcdata,purpose){return(tcdata.purpose.consents[purpose]||tcdata.purpose.legitimateInterests[purpose]);}
function _handleConsentDecision(tcdata){window.ezTcfConsent.loaded=true;if(!tcdata.vendor.consents["347"]&&!tcdata.vendor.legitimateInterests["347"]){window._emitEzConsentEvent();return;}
window.ezTcfConsent.store_info=_ezAllowed(tcdata,"1");window.ezTcfConsent.develop_and_improve_services=_ezAllowed(tcdata,"10");window.ezTcfConsent.measure_content_performance=_ezAllowed(tcdata,"8");window.ezTcfConsent.select_basic_ads=_ezAllowed(tcdata,"2");window.ezTcfConsent.create_ad_profile=_ezAllowed(tcdata,"3");window.ezTcfConsent.select_personalized_ads=_ezAllowed(tcdata,"4");window.ezTcfConsent.create_content_profile=_ezAllowed(tcdata,"5");window.ezTcfConsent.measure_ad_performance=_ezAllowed(tcdata,"7");window.ezTcfConsent.use_limited_data_to_select_content=_ezAllowed(tcdata,"11");window.ezTcfConsent.select_personalized_content=_ezAllowed(tcdata,"6");window.ezTcfConsent.understand_audiences=_ezAllowed(tcdata,"9");window._emitEzConsentEvent();}
function _handleGoogleConsentV2(tcdata){if(!tcdata||!tcdata.purpose||!tcdata.purpose.consents){return;}
var googConsentV2={};if(tcdata.purpose.consents[1]){googConsentV2.ad_storage='granted';googConsentV2.analytics_storage='granted';}
if(tcdata.purpose.consents[3]&&tcdata.purpose.consents[4]){googConsentV2.ad_personalization='granted';}
if(tcdata.purpose.consents[1]&&tcdata.purpose.consents[7]){googConsentV2.ad_user_data='granted';}
if(googConsentV2.analytics_storage=='denied'){gtag('set','url_passthrough',true);}
gtag('consent','update',googConsentV2);}
__tcfapi("addEventListener",2,function(tcdata,success){if(!success||!tcdata){window._emitEzConsentEvent();return;}
if(!tcdata.gdprApplies){_setAllEzConsentTrue();window._emitEzConsentEvent();return;}
if(tcdata.eventStatus==="useractioncomplete"||tcdata.eventStatus==="tcloaded"){if(typeof gtag!='undefined'){_handleGoogleConsentV2(tcdata);}
_handleConsentDecision(tcdata);if(tcdata.purpose.consents["1"]===true&&tcdata.vendor.consents["755"]!==false){window.ezgconsent=true;(adsbygoogle=window.adsbygoogle||[]).pauseAdRequests=0;}
if(window.__ezconsent){__ezconsent.setEzoicConsentSettings(ezConsentCategories);}
__tcfapi("removeEventListener",2,function(success){return null;},tcdata.listenerId);if(!(tcdata.purpose.consents["1"]===true&&_ezAllowed(tcdata,"2")&&_ezAllowed(tcdata,"3")&&_ezAllowed(tcdata,"4"))){if(typeof __ez=="object"&&typeof __ez.bit=="object"&&typeof window["_ezaq"]=="object"&&typeof window["_ezaq"]["page_view_id"]=="string"){__ez.bit.Add(window["_ezaq"]["page_view_id"],[new __ezDotData("non_personalized_ads",true),]);}}}});}else{_setAllEzConsentTrue();window._emitEzConsentEvent();}})(window,document);</script></body>
<!-- Mirrored from overiq.com/django-1-11/user-registration-in-django/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:14:57 GMT -->
</html>