<!DOCTYPE html><html lang="en">
<!-- Mirrored from overiq.com/django-1-11/django-logging-users-in-and-out/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:14:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"/>
<script>var __ezHttpConsent={setByCat:function(src,tagType,attributes,category,force){var setScript=function(){if(force||window.ezTcfConsent[category]){var scriptElement=document.createElement(tagType);scriptElement.src=src;attributes.forEach(function(attr){for(var key in attr){if(attr.hasOwnProperty(key)){scriptElement.setAttribute(key,attr[key]);}}});var firstScript=document.getElementsByTagName(tagType)[0];firstScript.parentNode.insertBefore(scriptElement,firstScript);}};if(force||(window.ezTcfConsent&&window.ezTcfConsent.loaded)){setScript();}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){setScript();}else{console.error("cannot get ez consent data");force=true;setScript();}});}else{force=true;setScript();console.error("getEzConsentData is not a function");}},};</script>
<script>var ezTcfConsent=window.ezTcfConsent?window.ezTcfConsent:{loaded:false,store_info:false,develop_and_improve_services:false,measure_ad_performance:false,measure_content_performance:false,select_basic_ads:false,create_ad_profile:false,select_personalized_ads:false,create_content_profile:false,select_personalized_content:false,understand_audiences:false,use_limited_data_to_select_content:false,};function getEzConsentData(){return new Promise(function(resolve){document.addEventListener("ezConsentEvent",function(event){var ezTcfConsent=event.detail.ezTcfConsent;resolve(ezTcfConsent);});});}</script>
<script>if(typeof _setEzCookies!=='function'){function _setEzCookies(ezConsentData){var cookies=window.ezCookieQueue;for(var i=0;i<cookies.length;i++){var cookie=cookies[i];if(ezConsentData&&ezConsentData.loaded&&ezConsentData[cookie.tcfCategory]){document.cookie=cookie.name+"="+cookie.value;}}}}
window.ezCookieQueue=window.ezCookieQueue||[];if(typeof addEzCookies!=='function'){function addEzCookies(arr){window.ezCookieQueue=[...window.ezCookieQueue,...arr];}}
addEzCookies([]);if(window.ezTcfConsent&&window.ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else{console.error("cannot get ez consent data");_setEzCookies(window.ezTcfConsent);}});}else{console.error("getEzConsentData is not a function");_setEzCookies(window.ezTcfConsent);}</script>
<script data-ezscrex='false' data-cfasync='false' data-pagespeed-no-defer>var __ez=__ez||{};__ez.stms=Date.now();__ez.evt={};__ez.script={};__ez.ck=__ez.ck||{};__ez.template={};__ez.template.isOrig=true;window.__ezScriptHost="//www.ezojs.com";__ez.queue=__ez.queue||function(){var e=0,i=0,t=[],n=!1,o=[],r=[],s=!0,a=function(e,i,n,o,r,s,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,d=this;this.name=e,this.funcName=i,this.parameters=null===n?null:w(n)?n:[n],this.isBlock=o,this.blockedBy=r,this.deleteWhenComplete=s,this.isError=!1,this.isComplete=!1,this.isInitialized=!1,this.proceedIfError=a,this.fWindow=l,this.isTimeDelay=!1,this.process=function(){f("... func = "+e),d.isInitialized=!0,d.isComplete=!0,f("... func.apply: "+e);var i=d.funcName.split("."),n=null,o=this.fWindow||window;i.length>3||(n=3===i.length?o[i[0]][i[1]][i[2]]:2===i.length?o[i[0]][i[1]]:o[d.funcName]),null!=n&&n.apply(null,this.parameters),!0===d.deleteWhenComplete&&delete t[e],!0===d.isBlock&&(f("----- F'D: "+d.name),m())}},l=function(e,i,t,n,o,r,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,l=this;this.name=e,this.path=i,this.async=o,this.defer=r,this.isBlock=t,this.blockedBy=n,this.isInitialized=!1,this.isError=!1,this.isComplete=!1,this.proceedIfError=s,this.fWindow=a,this.isTimeDelay=!1,this.isPath=function(e){return"/"===e[0]&&"/"!==e[1]},this.getSrc=function(e){return void 0!==window.__ezScriptHost&&this.isPath(e)&&"banger.js"!==this.name?window.__ezScriptHost+e:e},this.process=function(){l.isInitialized=!0,f("... file = "+e);var i=this.fWindow?this.fWindow.document:document,t=i.createElement("script");t.src=this.getSrc(this.path),!0===o?t.async=!0:!0===r&&(t.defer=!0),t.onerror=function(){var e={url:window.location.href,name:l.name,path:l.path,user_agent:window.navigator.userAgent};"undefined"!=typeof _ezaq&&(e.pageview_id=_ezaq.page_view_id);var i=encodeURIComponent(JSON.stringify(e)),t=new XMLHttpRequest;t.open("GET/index.html","//g.ezoic.net/ezqlog?d="+i,!0),t.send(),f("----- ERR'D: "+l.name),l.isError=!0,!0===l.isBlock&&m()},t.onreadystatechange=t.onload=function(){var e=t.readyState;f("----- F'D: "+l.name),e&&!/loaded|complete/.test(e)||(l.isComplete=!0,!0===l.isBlock&&m())},i.getElementsByTagName("head")[0].appendChild(t)}},d=function(e,i){this.name=e,this.path="",this.async=!1,this.defer=!1,this.isBlock=!1,this.blockedBy=[],this.isInitialized=!0,this.isError=!1,this.isComplete=i,this.proceedIfError=!1,this.isTimeDelay=!1,this.process=function(){}};function c(e,i,n,s,a,d,c,u,f){var m=new l(e,i,n,s,a,d,c,f);!0===u?o[e]=m:r[e]=m,t[e]=m,h(m)}function h(e){!0!==u(e)&&0!=s&&e.process()}function u(e){if(!0===e.isTimeDelay&&!1===n)return f(e.name+" blocked = TIME DELAY!"),!0;if(w(e.blockedBy))for(var i=0;i<e.blockedBy.length;i++){var o=e.blockedBy[i];if(!1===t.hasOwnProperty(o))return f(e.name+" blocked = "+o),!0;if(!0===e.proceedIfError&&!0===t[o].isError)return!1;if(!1===t[o].isComplete)return f(e.name+" blocked = "+o),!0}return!1}function f(e){var i=window.location.href,t=new RegExp("[?&]ezq=([^&#]*)","i").exec(i);"1"===(t?t[1]:null)&&console.debug(e)}function m(){++e>200||(f("let's go"),p(o),p(r))}function p(e){for(var i in e)if(!1!==e.hasOwnProperty(i)){var t=e[i];!0===t.isComplete||u(t)||!0===t.isInitialized||!0===t.isError?!0===t.isError?f(t.name+": error"):!0===t.isComplete?f(t.name+": complete already"):!0===t.isInitialized&&f(t.name+": initialized already"):t.process()}}function w(e){return"[object Array]"==Object.prototype.toString.call(e)}return window.addEventListener("load",(function(){setTimeout((function(){n=!0,f("TDELAY -----"),m()}),5e3)}),!1),{addFile:c,addFileOnce:function(e,i,n,o,r,s,a,l,d){t[e]||c(e,i,n,o,r,s,a,l,d)},addDelayFile:function(e,i){var n=new l(e,i,!1,[],!1,!1,!0);n.isTimeDelay=!0,f(e+" ...  FILE! TDELAY"),r[e]=n,t[e]=n,h(n)},addFunc:function(e,n,s,l,d,c,u,f,m,p){!0===c&&(e=e+"_"+i++);var w=new a(e,n,s,l,d,u,f,p);!0===m?o[e]=w:r[e]=w,t[e]=w,h(w)},addDelayFunc:function(e,i,n){var o=new a(e,i,n,!1,[],!0,!0);o.isTimeDelay=!0,f(e+" ...  FUNCTION! TDELAY"),r[e]=o,t[e]=o,h(o)},items:t,processAll:m,setallowLoad:function(e){s=e},markLoaded:function(e){if(e&&0!==e.length){if(e in t){var i=t[e];!0===i.isComplete?f(i.name+" "+e+": error loaded duplicate"):(i.isComplete=!0,i.isInitialized=!0)}else t[e]=new d(e,!0);f("markLoaded dummyfile: "+t[e].name)}},logWhatsBlocked:function(){for(var e in t)!1!==t.hasOwnProperty(e)&&u(t[e])}}}();__ez.evt.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n()},__ez.evt.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]};__ez.script.add=function(e){var t=document.createElement("script");t.src=e,t.async=!0,t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)};__ez.dot={};__ez.queue.addFile('../../detroitchicago/boise.js', '../../detroitchicago/boisebb26.js?gcb=195-3&amp;cb=5', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/abilene.js', '../../parsonsmaize/abilenec0f9.js?gcb=195-3&amp;cb=7f81d60744', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/mulvane.js', '../../parsonsmaize/mulvane2d63.js?gcb=195-3&amp;cb=e75e48eec0', true, ['/parsonsmaize/abilene.js'], true, false, true, false);__ez.queue.addFile('../../detroitchicago/birmingham.js', '../../detroitchicago/birminghame7ec.js?gcb=195-3&amp;cb=539c47377c', true, ['/parsonsmaize/abilene.js'], true, false, true, false);</script>
<script data-ezscrex="false" type="text/javascript" data-cfasync="false">window._ezaq = Object.assign({"ad_cache_level":1,"adpicker_placement_cnt":0,"ai_placeholder_cache_level":1,"ai_placeholder_placement_cnt":-1,"domain_id":92771,"ezcache_level":1,"ezcache_skip_code":0,"has_bad_image":0,"has_bad_words":0,"is_sitespeed":0,"lt_cache_level":0,"response_size":93049,"response_size_orig":87281,"response_time_orig":1024,"template_id":5,"url":"https://overiq.com/django-1-11/django-logging-users-in-and-out/","word_count":0,"worst_bad_word_level":0}, typeof window._ezaq !== "undefined" ? window._ezaq : {});__ez.queue.markLoaded('ezaqBaseReady');</script>
<script type='text/javascript' data-ezscrex='false' data-cfasync='false'>
window.ezAnalyticsStatic = true;

function analyticsAddScript(script) {
	var ezDynamic = document.createElement('script');
	ezDynamic.type = 'text/javascript';
	ezDynamic.innerHTML = script;
	document.head.appendChild(ezDynamic);
}
function getCookiesWithPrefix() {
    var allCookies = document.cookie.split(';');
    var cookiesWithPrefix = {};

    for (var i = 0; i < allCookies.length; i++) {
        var cookie = allCookies[i].trim();

        for (var j = 0; j < arguments.length; j++) {
            var prefix = arguments[j];
            if (cookie.indexOf(prefix) === 0) {
                var cookieParts = cookie.split('=');
                var cookieName = cookieParts[0];
                var cookieValue = cookieParts.slice(1).join('=');
                cookiesWithPrefix[cookieName] = decodeURIComponent(cookieValue);
                break; // Once matched, no need to check other prefixes
            }
        }
    }

    return cookiesWithPrefix;
}
function productAnalytics() {
	var d = {"pr":[6],"omd5":"47298665323d89fbc5855d7c4cb7d09c"};
	d.u = _ezaq.url;
	d.p = _ezaq.page_view_id;
	d.v = _ezaq.visit_uuid;
	d.ab = _ezaq.ab_test_id;
	d.e = JSON.stringify(_ezaq);
	d.ref = document.referrer;
	d.c = getCookiesWithPrefix('active_template', 'ez', 'lp_');
	if(typeof ez_utmParams !== 'undefined') {
		d.utm = ez_utmParams;
	}

	var dataText = JSON.stringify(d);
	var xhr = new XMLHttpRequest();
	xhr.open('POST/index.html','/ezais/analytics?cb=1', true);
	xhr.onload = function () {
		if (xhr.status!=200) {
            return;
		}

        if(document.readyState !== 'loading') {
            analyticsAddScript(xhr.response);
            return;
        }

        var eventFunc = function() {
            if(document.readyState === 'loading') {
                return;
            }
            document.removeEventListener('readystatechange', eventFunc, false);
            analyticsAddScript(xhr.response);
        };

        document.addEventListener('readystatechange', eventFunc, false);
	};
	xhr.setRequestHeader('Content-Type','text/plain');
	xhr.send(dataText);
}
__ez.queue.addFunc("productAnalytics", "productAnalytics", null, true, ['ezaqBaseReady'], false, false, false, true);
</script><base />
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Django Logging Users In and Out - Django 1.11 Tutorial - OverIQ.com</title>

    
    



    <meta name="description" content="Django provides built-in URL patterns and view functions for logging users in and out. But before we add them to our project, we will create login an…"/>



    <link rel="canonical" href="index.html"/>


<meta property="og:locale" content="en_US"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Django Logging Users In and Out"/>

    <meta property="og:description" content="Django provides built-in URL patterns and view functions for logging users in and out. But before we add them to our project, we will create login an…"/>


<meta property="og:url" content="https://overiq.com/django-1-11/django-logging-users-in-and-out/"/>
<meta property="og:site_name" content="OverIQ.com"/>


<meta property="article:publisher" content="https://www.facebook.com/OverIQ/"/>



<meta name="twitter:card" content="summary_large_image"/>

    <meta name="twitter:description" content="Django provides built-in URL patterns and view functions for logging users in and out. But before we add them to our project, we will create login an…"/>


<meta name="twitter:title" content="Django Logging Users In and Out"/>
<meta name="twitter:site" content="@infoOverIQ"/>

<meta name="twitter:creator" content="@infoOverIQ"/>




    
    
    


    
    
    


    <link rel="alternate" type="application/rss+xml" title="RSS" href="../../feed.xml/index.html"/>
    
    
    <link href="../../../fonts.googleapis.com/cssd2d5.css?family=Open+Sans" rel="stylesheet"/>
    <link rel="stylesheet" href="../../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="icon" href="../../static/wiki/favicon.png" sizes="32x32"/>

    <link rel="stylesheet" href="../../static/CACHE/css/output.db46da465a8b.css" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-125424793-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125424793-1');
    </script>


<script type='text/javascript'>
var ezoTemplate = 'orig_site';
var ezouid = '1';
var ezoFormfactor = '1';
</script><script data-ezscrex="false" type='text/javascript'>
var soc_app_id = '0';
var did = 92771;
var ezdomain = 'overiq.com';
var ezoicSearchable = 1;
</script></head>
<body>

<div class="overiq-header text-center">
    <div class="site-branding">
        <p class="main-title">
            <a href="../../index.html" rel="home">
                OverIQ.com
            </a>
        </p>
    </div>
</div>

<!-- Navigation -->
<nav class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">Home</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                

                <li>
                    <a href="../../blog/index.html">Blog</a>
                </li>
                <li>
                    <a href="../../contact/index.html">Contact</a>
                </li>
                <li>
                    <a href="../../about/index.html">About</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right visible-lg visible-md">
                <li>
                    <a href="../../feed.xml/index.html" title="RSS" target="_blank">
                        <i class="fa fa-rss fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/overiq/" target="_blank" title="Github">
                        <i class="fa fa-github fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://www.facebook.com/OverIQ/" target="_blank" title="Facebook">
                        <i class="fa fa-facebook fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://twitter.com/infoOverIQ" target="_blank" title="Twitter">
                        <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
                    </a>
                </li>

                

            </ul>

            <form action="https://overiq.com/search/" class="navbar-form navbar-left" role="search">

                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search" name="query" value=""/>
                </div>

                <button type="submit" class="btn btn-default">Submit</button>
            </form>

        </div>



        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">

    


    <div class="se-pre-con"></div>

    

    <div class="row">

        
        <div class="main">
            <div class="col-lg-8 col-md-8 col-sm-12">
                

    


    
        <ol class="breadcrumb">

    <li><a href="../../index.html">Home</a></li>

    
        
        <li><a href="../index.html">Django 1.11 Tutorial</a></li>
        

        

        
    
        

        

        
            <li class="active">Django Logging Users In and Out</li>
        
    

</ol>
    


<h1>Django Logging Users In and Out</h1>




    <p><i class="fa fa-calendar" aria-hidden="true"></i>
        Last updated on July 27, 2020
    </p>


<hr/>



<p>Django provides built-in URL patterns and view functions for logging users in and out. But before we add them to our project, we will create login and logout system on our own using some utility functions provided by the Django authentication framework.</p>
<span id="the-authenticate-and-login-functions" class="anchor-target"></span><h2 class="heading">The authenticate() and login() functions <a class="header-link" href="#the-authenticate-and-login-functions">#</a></h2>

<p>Django authentication framework (<code>django.contrib.auth</code>) provides <code>authenticate()</code> and <code>login()</code> functions whose job is to authenticate and login users respectively.</p>

<p>The <code>authenticate()</code> function accepts two keyword arguments, <code>username</code> and <code>password</code> and returns an object of type <code>User</code>, if <code>username</code> and <code>password</code> are valid. Otherwise, it returns <code>None</code>.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">auth</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">user</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;passwordd&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">user</span>
<span class="o">&lt;</span><span class="n">User</span><span class="p">:</span> <span class="n">admin</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Credentials are valid&#34;</span><span class="p">)</span>
<span class="o">...</span> <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Invalid Credentials&#34;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">Credentials</span> <span class="n">are</span> <span class="n">valid</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The <code>authenticate()</code> function only verifies whether the credentials provided are valid or not. It doesn&#39;t login the user.</p>

<p>To login the user we use <code>login()</code> function. It takes two arguments, <code>request</code> object (<code>HttpRequest</code>) and a <code>User</code> object. It works by saving the user&#39;s ID in the session, using <a href="../../django-1-10/sessions-in-django/index.html">Django session framework</a>.</p>

<p>Once a user is logged in, he should be able to logout and this is the responsibility of  <code>logout()</code> function.</p>
<span id="the-logout-function" class="anchor-target"></span><h2 class="heading">The logout() function <a class="header-link" href="#the-logout-function">#</a></h2>

<p>To logout users we use <code>logout()</code> function. It accepts a request (<code>HttpRequest</code>) object and returns <code>None</code>. Calling <code>logout()</code> function completely deletes the session data and cookie associated with the logged in user.</p>

<p>It is important to note that calling <code>logout()</code> function doesn&#39;t throw any errors if the user is not already logged in.</p>

<p>Now we have enough knowledge to roll out our own login system.</p>
<span id="creating-a-login-system" class="anchor-target"></span><h2 class="heading">Creating a Login System <a class="header-link" href="#creating-a-login-system">#</a></h2>

<p>In djangobin app&#39;s <code>views.py</code> file , add <code>login</code>, <code>logout</code> and <code>user_details</code> views towards the end of the file as follows:</p>

<p><strong>djangobin/django_project/djangobin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="kn">from</span> <span class="nn">django.core.mail</span> <span class="kn">import</span> <span class="n">mail_admins</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">auth</span>
</span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">SnippetForm</span><span class="p">,</span> <span class="n">ContactForm</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Language</span><span class="p">,</span> <span class="n">Snippet</span><span class="p">,</span> <span class="n">Tag</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">paginate_result</span>

<span class="c1">#...</span>

<span class="k">def</span> <span class="nf">profile</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1">#...</span>


<span class="hll"><span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;djangobin:admin&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span class="hll">        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</span><span class="hll">        <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
</span><span class="hll">        <span class="n">user</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
</span><span class="hll">            <span class="c1"># correct username and password login the user</span>
</span><span class="hll">            <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
</span><span class="hll">            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;djangobin:user_details&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">else</span><span class="p">:</span>
</span><span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;Error wrong username/password&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;djangobin/login.html&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">
</span><span class="hll"><span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="hll">    <span class="n">auth</span><span class="o">.</span><span class="n">logout</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="s1">&#39;djangobin/logout.html&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">
</span><span class="hll"><span class="k">def</span> <span class="nf">user_details</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>    
</span><span class="hll">    <span class="n">user</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>    
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;djangobin/user_details.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">})</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Then create three templates <code>login.html</code>, <code>logout.html</code> and <code>user_details.html</code> with the following code:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/login.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;djangobin/base.html&#34;</span>  <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Login - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>
<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>

<span class="x">            &lt;h4&gt;Login&lt;/h4&gt;</span>
<span class="x">            &lt;hr&gt;</span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;p class=&#34;alert alert-info&#34;&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span>
<span class="x">                &lt;form method=&#34;post&#34;&gt;</span>

<span class="x">                    </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                    &lt;table class=&#34;table&#34;&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;th&gt;&lt;label for=&#34;id_username&#34;&gt;Username:&lt;/label&gt;&lt;/th&gt;</span>
<span class="x">                            &lt;td&gt;&lt;input type=&#34;text&#34; name=&#34;username&#34; id=&#34;id_username&#34; required /&gt;&lt;/td&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;th&gt;&lt;label for=&#34;id_password&#34;&gt;Password:&lt;/label&gt;&lt;/th&gt;</span>
<span class="x">                            &lt;td&gt;&lt;input type=&#34;password&#34; name=&#34;password&#34; id=&#34;id_password&#34; required /&gt;&lt;/td&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;td&gt;&lt;input type=&#34;hidden&#34; name=&#34;next&#34; value=&#34;&#34;&gt;&lt;/td&gt;</span>
<span class="x">                            &lt;td&gt;&lt;button type=&#34;submit&#34; class=&#34;btn btn-primary&#34;&gt;Submit&lt;/button&gt;&lt;/td&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                    &lt;/table&gt;</span>

<span class="x">                &lt;/form&gt;            </span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;/password-reset/&#34;&gt;Forgot Password?&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;/register/&#34;&gt;Create new account.&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;/contact/&#34;&gt;Feedback&lt;/a&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/logout.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;djangobin/base.html&#34;</span>  <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Logout - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;container&#34;&gt;</span>

<span class="x">        &lt;p&gt;You are logged out. &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:login&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Click here&lt;/a&gt; to login again.&lt;/p&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>djangobin/django_project/djangobin/templates/djangobin/user_details.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;djangobin/base.html&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    User Details - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>

<span class="x">            &lt;h4&gt;Account Details&lt;/h4&gt;</span>

<span class="x">            &lt;hr&gt;</span>

<span class="x">            &lt;dl class=&#34;dl-horizontal&#34;&gt;</span>
<span class="x">                &lt;dt&gt;Username&lt;/dt&gt;</span>
<span class="x">                &lt;dd&gt;</span><span class="cp">{{</span> <span class="nv">request.user.username</span> <span class="cp">}}</span><span class="x">&lt;/dd&gt;</span>

<span class="x">                &lt;dt&gt;Email&lt;/dt&gt;</span>
<span class="x">                &lt;dd&gt;</span><span class="cp">{{</span> <span class="nv">request.user.email</span> <span class="cp">}}</span><span class="x">&lt;/dd&gt;</span>

<span class="x">                &lt;dt&gt;Date Joined&lt;/dt&gt;</span>
<span class="x">                &lt;dd&gt;</span><span class="cp">{{</span> <span class="nv">request.user.date_joined</span> <span class="cp">}}</span><span class="x">&lt;/dd&gt;</span>

<span class="x">                &lt;dt&gt;Last Login&lt;/dt&gt;</span>
<span class="x">                &lt;dd&gt;</span><span class="cp">{{</span> <span class="nv">request.user.last_login</span> <span class="cp">}}</span><span class="x">&lt;/dd&gt;</span>

<span class="x">                &lt;dt&gt;Snippet created&lt;/dt&gt;</span>
<span class="x">                &lt;dd&gt;</span><span class="cp">{{</span> <span class="nv">request.user.profile.get_snippet_count</span> <span class="cp">}}</span><span class="x">&lt;/dd&gt;</span>
<span class="x">            &lt;/dl&gt;</span>

<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;&#34;&gt;My Pastes&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;&#34;&gt;Settings&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;&#34;&gt;Change Password.&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:logout&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Logout.&lt;/a&gt; &lt;br&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Nothing extraordinary here, we are just using some of the attributes we have learned in the chapter <a href="../django-authentication-framework-basics/index.html#creating-a-user-object">Django Authentication Framework Basics</a> to get some information about the logged in user.</p>

<p>Add links to login and logout page in <code>base.html</code> file as follows:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/base.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# ... #}</span><span class="x"></span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_authenticated</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                        &lt;ul class=&#34;dropdown-menu&#34;&gt;</span>
<span class="x">                            &lt;li&gt;&lt;a href=&#34;&#34;&gt;My Pastes&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                            &lt;li&gt;&lt;a href=&#34;&#34;&gt;Account Details&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                            &lt;li&gt;&lt;a href=&#34;&#34;&gt;Settings&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">                            &lt;li role=&#34;separator&#34; class=&#34;divider&#34;&gt;&lt;/li&gt;</span>
<span class="hll"><span class="x">                            &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:logout&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Logout&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="x">                        &lt;/ul&gt;</span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                        &lt;ul class=&#34;dropdown-menu&#34;&gt;</span>
<span class="x">                            &lt;li&gt;&lt;a href=&#34;&#34;&gt;Sign Up&lt;/a&gt;&lt;/li&gt;</span>
<span class="hll"><span class="x">                            &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:login&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Login&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="x">                        &lt;/ul&gt;</span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;/li&gt;</span>
<span class="x">            &lt;/ul&gt;</span>
<span class="x">        &lt;/div&gt;&lt;!-- /.navbar-collapse --&gt;</span>
<span class="x">    &lt;/div&gt;&lt;!-- /.container-fluid --&gt;</span>
<span class="x">&lt;/nav&gt;</span>


<span class="x">&lt;div class=&#34;container&#34;&gt;</span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-9 col-md-9&#34;&gt;</span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nv">request.user.is_authenticated</span> <span class="k">and</span> <span class="k">not</span> <span class="nv">request.path</span> <span class="o">==</span> <span class="s1">&#39;/login/&#39;</span>  <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;p class=&#34;alert alert-info&#34;&gt;</span>
<span class="hll"><span class="x">                    &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:login&#39;</span> <span class="cp">%}</span><span class="x">&#34; class=&#34;alert-link&#34;&gt;Login&lt;/a&gt; to access other cool features.</span>
</span><span class="x">                &lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>


<span class="x">            </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="c">{#  override this block in the child template  #}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;/div&gt;</span>
<span class="c">{# ... #}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Finally, add the following three URL patterns in the djangobin app&#39;s <code>urls.py</code> file:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="s1">&#39;^contact/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">contact</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;contact&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^login/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;login&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^logout/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">logout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;logout&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^userdetails/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user_details</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;user_details&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Start the development server and visit <code>http://127.0.0.1:8000/login/</code>. You should get a page like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_183-9aa16cca-3a73-492d-96ae-d73e701c7eff.png" loading="lazy" alt=""/></p>

<p>Enter bogus username and password and you will get errors like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_184-764ba979-ca38-47ae-8292-6912cce2dd1b.png" loading="lazy" alt=""/></p>

<p>Now enter correct username and password and you will be redirected to user detail page:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_187-cb411a28-2a00-47f5-93ff-0a3fdce17fe1.png" loading="lazy" alt=""/></p>

<p>To logout, click the logout link at the right side of the page. And you should see logout page like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_186-5726e01f-2bca-4d87-bb05-04fd9a7cdf1c.png" loading="lazy" alt=""/></p>
<span id="using-built-in-login-and-logout-views" class="anchor-target"></span><h2 class="heading">Using built-in login() and logout() views <a class="header-link" href="#using-built-in-login-and-logout-views">#</a></h2>

<p>Django provides two built-in views <code>django.contrib.auth.login()</code> and <code>django.contrib.auth.logout()</code> to login and logout users respectively.</p>

<p>To use these views, import them from <code>django.contrib.auth</code> package and update <code>login</code> and <code>logout</code> URL patterns in the <code>urls.py</code> file as follows:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">views</span> <span class="k">as</span> <span class="n">auth_views</span>
</span><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="c1"># app_name = &#39;djangobin&#39;</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^login/$&#39;</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;login&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^logout/$&#39;</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">logout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;logout&#39;</span><span class="p">),</span>
</span>    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^userdetails/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user_details</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;user_details&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Save the <code>urls.py</code> file and visit <code>http://127.0.0.1:8000/login/</code>. You will get a <code>TemplateDoesNotExist</code> exception as follows:</p>

<p><img src="../../media/uploads/2018/5/31/Selection_188-c19452cf-898e-4298-a2fc-d2843d126c4d.png" loading="lazy" alt=""/></p>

<p>The problem is that by default, the <code>django.contrib.auth.login()</code> view looks for a template called <code>registration/login.html</code>. However, Django doesn&#39;t provide this template that&#39;s why a <code>TemplateDoesNotExist</code> exception is raised.</p>

<p>Also, notice the Template-loader postmortem section. It tells you the exact order in which Django tried to find the template.</p>

<p>We can pass a different template to the <code>django.contrib.auth.login()</code> view using the <code>template_name</code> keyword argument as follows:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^login/$&#39;</span><span class="p">,</span>
    <span class="n">auth_views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> 
    <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/login.html&#39;</span><span class="p">},</span> 
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;login&#39;</span>
<span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Similarly, by default the <code>django.contrib.auth.logout()</code> view uses <code>registration/logged_out.html</code> template from the admin app (<code>django.contrib.admin</code>). This is the same template which you would see if you logout from the Django admin site.</p>

<p>Visit <code>http://127.0.0.1:8000/logout/</code> and see it yourself.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_189-89f47a6a-7c92-438b-93f3-bc09efafb8f6.png" loading="lazy" alt=""/></p>

<p>Just as with <code>django.contrib.auth.login()</code> view, we can use a different template by passing <code>template_name</code> keyword argument to <code>django.contrib.auth.logout()</code> view as follows:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^logout/$&#39;</span><span class="p">,</span> 
    <span class="n">auth_views</span><span class="o">.</span><span class="n">logout</span><span class="p">,</span> 
    <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/logout.html&#39;</span><span class="p">},</span> 
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;logout&#39;</span>
<span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Modify login and logout URL patterns to use a custom templates as follows:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^login/$&#39;</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/login.html&#39;</span><span class="p">},</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;login&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^logout/$&#39;</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">logout</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;template_name&#39;</span><span class="p">:</span> <span class="s1">&#39;djangobin/logout.html&#39;</span><span class="p">},</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;logout&#39;</span><span class="p">),</span>
</span>    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^userdetails/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user_details</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;user_details&#39;</span><span class="p">),</span>    
<span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Next, update <code>login.html</code> template to use <code>form</code> template variable provided by <code>django.contrib.auth.login()</code> view as follows:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/login.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;djangobin/base.html&#34;</span>  <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Login - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>
<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>

<span class="x">            &lt;h4&gt;Login&lt;/h4&gt;</span>
<span class="x">            &lt;hr&gt;</span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;p class=&#34;alert alert-info&#34;&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">            &lt;form method=&#34;post&#34;&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;table class=&#34;table&#34;&gt;</span>
<span class="hll"><span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.as_table</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                        &lt;td&gt;&amp;nbsp;&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                        &lt;td&gt;&lt;button type=&#34;submit&#34; class=&#34;btn btn-primary&#34;&gt;Submit&lt;/button&gt;&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;/tr&gt;</span>
</span><span class="x">                &lt;/table&gt;</span>

<span class="x">            &lt;/form&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-6 col-md-6 col-sm-6&#34;&gt;</span>
<span class="x">            &lt;h4&gt;Related Links&lt;/h4&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                &lt;a href=&#34;/password-reset/&#34;&gt;Forgot Password?&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;/register/&#34;&gt;Create new account.&lt;/a&gt; &lt;br&gt;</span>
<span class="x">                &lt;a href=&#34;#&#34;&gt;Feedback&lt;/a&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Our login view is almost ready. Visit <code>http://127.0.0.1:8000/login/</code> and try logging in using wrong username and password. You will be greeted with errors like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_190-236a2d63-6ee5-475e-9799-88c577b49ec7.png" loading="lazy" alt=""/></p>

<p>Try logging in one more time using the correct username and password. On success, you will redirect you to <code>/accounts/profile/</code> URL. This is another default behavior of <code>django.contrib.auth.login()</code> view.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_191-947299d6-3518-4a41-8ab5-42b4babb5c7e.png" loading="lazy" alt=""/></p>

<p>We don&#39;t have any URL pattern in djangobin&#39;s <code>urls.py</code> to match <code>/accounts/profile/</code> URL path, that&#39;s why the server returned HTTP 404 error.</p>

<p>We can easily override this behavior using the <code>LOGIN_REDIRECT_URL</code> setting. Open <code>settings.py</code> file and add <code>LOGIN_REDIRECT_URL</code> towards the end of the file as follows:</p>

<p><strong>djangobin/django_project/django_project/settings.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">MANAGERS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;OverIQ&#39;</span><span class="p">,</span> <span class="s1">&#39;manager@overiq.com&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s1">&#39;djangobin:index&#39;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>This will change the redirect URL from <code>/accounts/profile/</code> to <code>/</code></p>

<p>Instead of passing name of the URL pattern, we can also pass URL path directly.</p>

<p>From now on, after successfull login, <code>django.contrib.auth.login()</code> view will redirect the user to <code>/</code> URL path instead of <code>/accounts/profile/</code>. </p>

<p>But there are still some limitations to this. For example, let&#39;s say you were browsing trending snippets and then you decided to login. After logging in, it makes more sense to redirect you to the trending page again instead of the <code>/</code> URL. </p>

<p>To make this happen, we can embed a hidden field named <code>next</code> containing the URL to redirect to after logging in.</p>

<p>When the <code>django.contrib.auth.login()</code> view receives <code>next</code> as POST data, it redirects to the URL specied in the hidden <code>next</code> field.</p>

<p>The <code>django.contrib.auth.login()</code> view also provides a context variable called <code>next</code>, which contains the URL where useres will be redirected after logging in. The value of the <code>next</code> variable will be either <code>/accounts/profile/</code> or the URL specified in <code>LOGIN_REDIRECT_URL</code> variable.</p>

<p>We specify the value of the <code>next</code> field using query string like this:</p>

<p><code>http://127.0.0.1:8000/login/?next=/trending/</code></p>

<p>Open <code>login.html</code> and add the hidden field named <code>next</code> as follows:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/login.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# ... #}</span><span class="x"></span>
<span class="x">            &lt;form method=&#34;post&#34;&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;table class=&#34;table&#34;&gt;</span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.as_table</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;tr&gt;</span>
<span class="hll"><span class="x">                        &lt;td&gt;&lt;input type=&#34;hidden&#34; name=&#34;next&#34; value=&#34;</span><span class="cp">{{</span> <span class="nv">next</span> <span class="cp">}}</span><span class="x">&#34;&gt;&lt;/td&gt;</span>
</span><span class="x">                        &lt;td&gt;&lt;button type=&#34;submit&#34; class=&#34;btn btn-primary&#34;&gt;Submit&lt;/button&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;/tr&gt;</span>
<span class="x">                &lt;/table&gt;</span>

<span class="x">            &lt;/form&gt;</span>
<span class="c">{# ... #}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>This is how the above code works:</p>

<p>If we visit login page using <code>http://localhost:8000/login/</code> URL, then after logging in <code>django.contrib.auth.login()</code> will redirect the user to <code>/</code> URL. On the other hand, if we visit login page, using <code>http://127.0.0.1:8000/login/?next=/trending/</code> URL, then the <code>django.contrib.auth.login()</code> view will redirect the user to <code>/trending/</code> URL.</p>

<p>Next, modify <code>base.html</code> to provide a value to <code>next</code> query parameter as follows:</p>

<p><strong>djangobin/django_project/djangobin/templates/djangobin/base.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# ... #}</span><span class="x"></span>
<span class="x">&lt;div class=&#34;container&#34;&gt;</span>

<span class="x">    &lt;div class=&#34;row&#34;&gt;</span>

<span class="x">        &lt;div class=&#34;col-lg-9 col-md-9&#34;&gt;</span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="k">not</span> <span class="nv">request.user.is_authenticated</span> <span class="k">and</span> <span class="k">not</span> <span class="nv">request.path</span> <span class="o">==</span> <span class="s1">&#39;/login/&#39;</span>  <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;p class=&#34;alert alert-info&#34;&gt;</span>
<span class="hll"><span class="x">                    &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;djangobin:login&#39;</span> <span class="cp">%}</span><span class="x">?next=</span><span class="cp">{{</span> <span class="nv">request.path</span> <span class="cp">}}</span><span class="x">&#34; class=&#34;alert-link&#34;&gt;Login&lt;/a&gt; to access other cool features.</span>
</span><span class="x">                &lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="c">{# ... #}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Let&#39;s test whether everything is working or not.</p>

<p>If you are already logged in, logout first by visiting <code>http://localhost:8000/logout/</code> URL directly or by clicking the Logout link at the top right corner of the page.</p>

<p>Then, navigate to the login page (<code>http://localhost:8000/login/</code>), enter correct username and password. On success, you will be redirected to the index page of djangobin:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_193-6df00714-d320-4477-9b42-aba8b4ce168a.png" loading="lazy" alt=""/></p>

<p>Logout again and navigate to the login page again by clicking &#34;Login&#34; link in the trending snippet page. This time after logging in you will be redirected to <code>/trending/</code> instead of <code>/</code> URL.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_194-e3799073-0a23-4cde-8a84-344d385b114b.png" loading="lazy" alt=""/></p>

<p><img src="../../media/uploads/2018/5/28/Selection_195-508ff522-10a2-4a42-86bb-d6b356e281d3.png" loading="lazy" alt=""/></p>
<span id="logging-in-using-email-and-password" class="anchor-target"></span><h2 class="heading">Logging in using Email and Password <a class="header-link" href="#logging-in-using-email-and-password">#</a></h2>

<p>As you have seen, by default Django requires you to enter username and password to login into the application. If you deliberately want this behavior that&#39;s fine. However, Just to show you how you can take an alternative route, our djangobin application will use email and password to authenticate users. To accomplish this task, we will create a custom form and view function.</p>

<p>Open <code>forms.py</code> and add <code>LoginForm</code> class as follows:</p>

<p><strong>djangobin/django_project/djangobin/forms.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="c1">#...</span>

<span class="hll"><span class="k">class</span> <span class="nc">LoginForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
</span><span class="hll">    <span class="n">email</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">EmailField</span><span class="p">()</span>
</span><span class="hll">    <span class="n">password</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">PasswordInput</span><span class="p">)</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Next, modify <code>login()</code> view function to use <code>LoginForm</code> as follows:</p>

<p><strong>djangobin/django_project/djangobin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="hll"><span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">SnippetForm</span><span class="p">,</span> <span class="n">ContactForm</span><span class="p">,</span> <span class="n">LoginForm</span>
</span><span class="c1">#...</span>


<span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span><span class="hll">
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">LoginForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
</span><span class="hll">        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
</span><span class="hll">
</span><span class="hll">            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span>
</span><span class="hll">
</span><span class="hll">            <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
</span><span class="hll">                <span class="n">user</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span>
</span><span class="hll">                    <span class="n">username</span><span class="o">=</span><span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
</span><span class="hll">                    <span class="n">password</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span>
</span><span class="hll">                <span class="p">)</span>
</span><span class="hll">
</span><span class="hll">                <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
</span><span class="hll">                    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
</span><span class="hll">                    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;next&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;djangobin:index&#39;</span> <span class="p">)</span>
</span><span class="hll">
</span><span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Invalid email/password.&#39;</span><span class="p">)</span>
</span><span class="hll">            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;djangobin:login&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">LoginForm</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;djangobin/login.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">})</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>In line 12, we are checking whether any user associated with the submitted email exists or not.</p>

<p>If the user exists, In line 15, we are authenticating it using the <code>authenticate()</code> function. Notice that the arguments passed to <code>authenticate()</code> function are still username and password.</p>

<p>If the authentication is successful, we login the user using the <code>login()</code> function and redirect it.</p>

<p>Update <code>login</code> and <code>logout</code> URL patterns in <code>urls.py</code> file to use <code>login()</code> and <code>logout</code> function of <code>views.py</code> file as follows:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^login/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;login&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^logout/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">logout</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;logout&#39;</span><span class="p">),</span>
</span>    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^userdetails/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user_details</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;user_details&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Visit login page and enter incorrect email and password. You will get an error like this:</p>

<p><img src="../../media/uploads/2018/5/28/Selection_198-c0d984a5-625d-42ba-ad30-26d8d9b14cd2.png" loading="lazy" alt=""/></p>

<p>Now, enter correct email and password and you will be redirected to the index page.</p>

<p>Our login and logout system is working as expected, but from the usability point of view, there is still one problem.</p>

<p>The issue is that the login form is still visible to the logged in user.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_199-c69303a3-ac50-407b-b24d-4fadf0dceaad.png" loading="lazy" alt=""/></p>

<p>Displaying login form to a logged in user is absolutely pointless. To fix the issue simply check whether the user is logged in or not at the start of <code>login()</code> view function as follows:</p>

<p><strong>djangobin/django_project/djangobin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>

<span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">:</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;djangobin:profile&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">LoginForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
</pre></div>
</td></tr></tbody></table></div>
<p>If you now visit <code>http://localhost:8000/login/</code>, after logging in, you will be redirected to the user profile page.</p>

<p><img src="../../media/uploads/2018/5/31/Selection_198-3e69763e-1621-4439-a9d4-05b0f7505e52.png" loading="lazy" alt=""/></p>

<p>Currently, user profile page just displays the name of the user. We will update it to display a list of snippets in the upcoming lessons.</p>
<span id="limiting-access" class="anchor-target"></span><h2 class="heading">Limiting Access <a class="header-link" href="#limiting-access">#</a></h2>

<p>The whole point of implementing login system is to prevent unauthorized access to administrative pages.</p>

<p>A simple way to restrict access to pages is to first check whether the user is authenticated or not using the <code>is_authenticated()</code> method and then redirect the user accordingly. For example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">our_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">&#34;login&#34;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;app/view.html&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>We can copy and paste this condition at the start of the every administrative view function. This will work but Django provides a much better way.</p>

<p>The preferred way to limit access to pages is to use <code>login_required</code> decorator. To use <code>login_required</code> decorator you must import it from <code>django.contrib.auth.decorators</code> module. </p>

<p>Let&#39;s update <code>user_details</code> and <code>logout</code> view to use <code>login_required</code> decorator as follows:</p>

<p><strong>djangobin/django_project/djangobin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">auth</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.contrib.auth.decorators</span> <span class="kn">import</span> <span class="n">login_required</span>
</span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">SnippetForm</span><span class="p">,</span> <span class="n">ContactForm</span><span class="p">,</span> <span class="n">LoginForm</span>
<span class="c1">#...</span>

<span class="c1">#...</span>

<span class="hll"><span class="nd">@login_required</span>
</span><span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">logout</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="s1">&#39;djangobin/logout.html&#39;</span><span class="p">)</span>


<span class="hll"><span class="nd">@login_required</span>
</span><span class="k">def</span> <span class="nf">user_details</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;djangobin/user_details.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">})</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Here is how the <code>login_required</code> decorator work:</p>

<p>If the user is not logged then it will redirect the user to <code>/accounts/login/</code> (the default login URL), passing the current absolute URL as a value to the <code>next</code> query parameter. On the other hand, if the user is logged in then the <code>login_required</code> would do nothing.</p>

<p>To change default login URL we use <code>LOGIN_URL</code> setting. The <code>LOGIN_URL</code> accepts URL path or name of the URL pattern. Open <code>settings.py</code> file and add the following variable at the end of the file.</p>

<p><strong>djangobin/django_project/django_project/settings.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="n">LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s1">&#39;djangobin:index&#39;</span>

<span class="hll"><span class="n">LOGIN_URL</span> <span class="o">=</span> <span class="s1">&#39;djangobin:login&#39;</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>This changes the default login from <code>/accounts/login/</code> to <code>/login/</code>. If you try to visit a view which has <code>login_required</code> decorator applied to it, you will be redirected to <code>/login/</code> URL instead of <code>/accounts/login/</code>.</p>

<p>To verify the changes visit <code>http://localhost:8000/userdetails/</code> URL and you will be redirected to <code>http://localhost:8000/login/?next=/userdetails/</code>.</p>

<p><img src="../../media/uploads/2018/5/28/Selection_201-ec1244f1-a477-41f7-9511-f99da0c39591.png" loading="lazy" alt=""/></p>



    



        <nav aria-label="pagination">
            <ul class="pager">
                
                    <li class="previous">
                        <a href="../building-contact-us-form/index.html" title="Building Contact Us Form">
                            <span class="fa fa-arrow-left" aria-hidden="true"></span>
                            Building Contact Us Form
                        </a>
                    </li>
                

                
                    <li class="next">
                        <a href="../user-registration-in-django/index.html" title="User Registration in Django">
                            User Registration in Django
                            <span class="fa fa-arrow-right" aria-hidden="true"></span>
                        </a>
                    </li>
                
            </ul>
        </nav>







    <hr/>
    <div id="disqus_thread">
    <p style="margin-bottom: 10px" class="text-center">
        <a href="#" class=" btn btn-primary comments-holder" onclick="loadDisqus();return false;">
            <i class="fa fa-comments" aria-hidden="true"></i> Load Comments
        </a>
    </p>
    </div>
    <hr/>
    <script>
        var is_disqus_loaded = false;
        function loadDisqus() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '../../../overiqcom.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        };
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>







            </div>
        </div>


        <div class="sidebar">
        
            <div class="col-lg-4 col-md-4 col-sm-12">
                

    
        
    <div class="well">
        <h4>Django 1.11 Tutorial</h4>
        <ul>
            
                <li><a href="../intro-to-django/index.html">Intro to Django</a></li>
            
                <li><a href="../installing-django/index.html">Installing Django</a></li>
            
                <li><a href="../creating-django-project/index.html">Creating Django Project</a></li>
            
                <li><a href="../mvc-pattern-and-django/index.html">MVC Pattern and Django</a></li>
            
                <li><a href="../views-and-urlconfs-in-django/index.html">Views and URLconfs in Django</a></li>
            
                <li><a href="../creating-urls-and-custom-response/index.html">Creating URLs and Custom Response</a></li>
            
                <li><a href="../basics-of-django-templates/index.html">Basics of Django Templates</a></li>
            
                <li><a href="../template-tags-in-django/index.html">Template tags in Django</a></li>
            
                <li><a href="../template-filters-in-django/index.html">Template filters in Django</a></li>
            
                <li><a href="../loading-templates-in-django/index.html">Loading Templates in Django</a></li>
            
                <li><a href="../template-inheritance-in-django/index.html">Template Inheritance in Django</a></li>
            
                <li><a href="../basics-of-models-in-django/index.html">Basics of Models in Django</a></li>
            
                <li><a href="../migrations-in-django/index.html">Migrations in Django</a></li>
            
                <li><a href="../django-orm-basics-part-1/index.html">Django ORM Basics Part 1</a></li>
            
                <li><a href="../django-orm-basics-part-2/index.html">Django ORM Basics Part 2</a></li>
            
                <li><a href="../django-admin-app/index.html">Django Admin App</a></li>
            
                <li><a href="../django-authentication-framework-basics/index.html">Django Authentication Framework Basics</a></li>
            
                <li><a href="../data-migrations-in-django/index.html">Data migrations in Django</a></li>
            
                <li><a href="../django-form-basics/index.html">Django Form Basics</a></li>
            
                <li><a href="../displaying-forms-in-django/index.html">Displaying Forms in Django</a></li>
            
                <li><a href="../django-rendering-form-fields-manually/index.html">Django Rendering Form Fields Manually</a></li>
            
                <li><a href="../handling-static-content-in-django/index.html">Handling Static Content in Django</a></li>
            
                <li><a href="../handling-media-files-in-django/index.html">Handling Media Files in Django</a></li>
            
                <li><a href="../building-djangobin-the-first-steps/index.html">Building Djangobin - The First Steps</a></li>
            
                <li><a href="../creating-trending-snippet-page/index.html">Creating Trending Snippet Page</a></li>
            
                <li><a href="../building-contact-us-form/index.html">Building Contact Us Form</a></li>
            
                <li><a href="index.html">Django Logging Users In and Out</a></li>
            
                <li><a href="../user-registration-in-django/index.html">User Registration in Django</a></li>
            
                <li><a href="../building-profile-pages-for-djangobin/index.html">Building profile pages for Djangobin</a></li>
            
                <li><a href="../searching-snippets/index.html">Searching Snippets</a></li>
            
                <li><a href="../asynchronous-tasks-with-celery/index.html">Asynchronous Tasks with Celery</a></li>
            
                <li><a href="../flatpages-in-django/index.html">Flatpages in Django</a></li>
            
                <li><a href="../creating-sitemaps-in-django/index.html">Creating Sitemaps in Django</a></li>
            
                <li><a href="../settings-for-multiple-environments-in-django/index.html">Settings for Multiple Environments in Django</a></li>
            
                <li><a href="../deploying-django-project-to-digitalocean/index.html">Deploying Django Project to DigitalOcean</a></li>
            
        </ul>
    </div>

    

    
        

<div class="well">
    <h4>Recent Posts</h4>
    <ul>
        
            <li><a href="../../machine-learning-experts-you-should-be-following-online/index.html">Machine Learning Experts You Should Be Following Online</a></li>
        
            <li><a href="../../4-ways-to-prepare-for-the-ap-computer-science-a-exam/index.html">4 Ways to Prepare for the AP Computer Science A Exam</a></li>
        
            <li><a href="../../finance-assignment-online-help-for-the-busy-and-tired-students-get-help-from-experts/index.html">Finance Assignment Online Help for the Busy and Tired Students: Get Help from Experts</a></li>
        
            <li><a href="../../top-9-machine-learning-algorithms-for-data-scientists/index.html">Top 9 Machine Learning Algorithms for Data Scientists</a></li>
        
            <li><a href="../../data-science-learning-path-or-steps-to-become-a-data-scientist-final/index.html">Data Science Learning Path or Steps to become a data scientist Final</a></li>
        
            <li><a href="../../enable-edit-button-in-shutter-in-linux-mint-19-and-ubuntu-18-04/index.html">Enable Edit Button in Shutter In Linux Mint 19 and Ubuntu 18.04</a></li>
        
            <li><a href="../../python-3-time-module/index.html">Python 3 time module</a></li>
        
            <li><a href="../../pygments-tutorial/index.html">Pygments Tutorial</a></li>
        
            <li><a href="../../how-to-use-virtualenv/index.html">How to use Virtualenv?</a></li>
        
            <li><a href="../../installing-mysql-windows-linux-and-mac/index.html">Installing MySQL (Windows, Linux and Mac)</a></li>
        
            <li><a href="../../what-is-if-__name__-__main__-in-python/index.html">What is if __name__ == &#39;__main__&#39;  in Python ?</a></li>
        
            <li><a href="../../installing-goaccess-a-real-time-web-log-analyzer/index.html">Installing GoAccess (A Real-time web log analyzer)</a></li>
        
            <li><a href="../../installing-isso/index.html">Installing Isso</a></li>
        
    </ul>
</div>

<!-- Blog Search Well -->





















    



            </div>
        </div>
    </div>



    

</div>

<!-- Footer -->
<footer class="overiq-footer">
    <div class="container">
        <div class="row">

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../terms-of-use/index.html">Terms</a></li>
                    <li><a href="../../privacy-policy/index.html">Privacy Policy</a></li>
                    <li><a href="../../sitemap.xml/index.html">Sitemap</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../contact/index.html">Contact</a></li>
                    <li><a href="../../blog/index.html">Blog</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="https://www.facebook.com/OverIQ/">Facebook</a></li>
                    <li><a href="https://twitter.com/infoOverIQ">Twitter</a></li>
                    <li><a href="https://github.com/overiq">Github</a></li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../c-programming-101/index.html">C Tutorial</a></li>
                    <li><a href="../../python-101/index.html">Python Tutorial</a></li>
                    <li><a href="../index.html">Django Tutorial</a></li>
                    <li><a href="../../flask-101/index.html">Flask Tutorial</a></li>
                    <li><a href="../../mysql-connector-python-101/index.html">MySQL Connector/Python Tutorial</a></li>
                    <li><a href="../../sqlalchemy-101/index.html">SQLAlchemy Tutorial</a></li>
                    <li><a href="../../c-examples/index.html">C Programming Examples</a></li>
                </ul>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <div class="row text-center">
            <p>© 2025 OverIQ.com</p>
            <small><a href="#">Back to top</a></small>
        </div>

        <!-- /.row -->
    </div>
</footer>



<script type="text/javascript" src="../../static/CACHE/js/output.2e0ff002c1a4.js"></script>




<script async="" src="../../../cdn.jsdelivr.net/npm/cookieconsent%403/build/cookieconsent.min.js" data-cfasync="false"></script>

<script>

    
    window.addEventListener('load', function () {
        window.cookieconsent.initialise({
            "palette": {
                "popup": {
                    "background": "#5ca9e0",
                    "text": "#ffffff"
                },
                "button": {
                    "background": "#fff",
                    "text": "#237afc"
                }
            },
            "theme": "classic",
            "position": "top",
            "static": true,
            "content": {
                "href": "https://overiq.com/privacy-policy/"
            }
        });
    });


</script>

<script src="../../../polyfill.io/v3/polyfill.min1162.js?features=es6"></script>
<script id="MathJax-script" defer="" src="../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml.js"></script>

<script async="" type="text/javascript" src="../../../cdn.carbonads.com/carbonfbdb.js?serve=CE7DC53E&amp;placement=overiqcom" id="_carbonads_js"></script>





<script data-cfasync="false">function _emitEzConsentEvent(){var customEvent=new CustomEvent("ezConsentEvent",{detail:{ezTcfConsent:window.ezTcfConsent},bubbles:true,cancelable:true,});document.dispatchEvent(customEvent);}
(function(window,document){function _setAllEzConsentTrue(){window.ezTcfConsent.loaded=true;window.ezTcfConsent.store_info=true;window.ezTcfConsent.develop_and_improve_services=true;window.ezTcfConsent.measure_ad_performance=true;window.ezTcfConsent.measure_content_performance=true;window.ezTcfConsent.select_basic_ads=true;window.ezTcfConsent.create_ad_profile=true;window.ezTcfConsent.select_personalized_ads=true;window.ezTcfConsent.create_content_profile=true;window.ezTcfConsent.select_personalized_content=true;window.ezTcfConsent.understand_audiences=true;window.ezTcfConsent.use_limited_data_to_select_content=true;window.ezTcfConsent.select_personalized_content=true;}
function _clearEzConsentCookie(){document.cookie="ezCMPCookieConsent=tcf2;Domain=.overiq.com;Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT";}
_clearEzConsentCookie();if(typeof window.__tcfapi!=="undefined"){window.ezgconsent=false;var amazonHasRun=false;function _ezAllowed(tcdata,purpose){return(tcdata.purpose.consents[purpose]||tcdata.purpose.legitimateInterests[purpose]);}
function _handleConsentDecision(tcdata){window.ezTcfConsent.loaded=true;if(!tcdata.vendor.consents["347"]&&!tcdata.vendor.legitimateInterests["347"]){window._emitEzConsentEvent();return;}
window.ezTcfConsent.store_info=_ezAllowed(tcdata,"1");window.ezTcfConsent.develop_and_improve_services=_ezAllowed(tcdata,"10");window.ezTcfConsent.measure_content_performance=_ezAllowed(tcdata,"8");window.ezTcfConsent.select_basic_ads=_ezAllowed(tcdata,"2");window.ezTcfConsent.create_ad_profile=_ezAllowed(tcdata,"3");window.ezTcfConsent.select_personalized_ads=_ezAllowed(tcdata,"4");window.ezTcfConsent.create_content_profile=_ezAllowed(tcdata,"5");window.ezTcfConsent.measure_ad_performance=_ezAllowed(tcdata,"7");window.ezTcfConsent.use_limited_data_to_select_content=_ezAllowed(tcdata,"11");window.ezTcfConsent.select_personalized_content=_ezAllowed(tcdata,"6");window.ezTcfConsent.understand_audiences=_ezAllowed(tcdata,"9");window._emitEzConsentEvent();}
function _handleGoogleConsentV2(tcdata){if(!tcdata||!tcdata.purpose||!tcdata.purpose.consents){return;}
var googConsentV2={};if(tcdata.purpose.consents[1]){googConsentV2.ad_storage='granted';googConsentV2.analytics_storage='granted';}
if(tcdata.purpose.consents[3]&&tcdata.purpose.consents[4]){googConsentV2.ad_personalization='granted';}
if(tcdata.purpose.consents[1]&&tcdata.purpose.consents[7]){googConsentV2.ad_user_data='granted';}
if(googConsentV2.analytics_storage=='denied'){gtag('set','url_passthrough',true);}
gtag('consent','update',googConsentV2);}
__tcfapi("addEventListener",2,function(tcdata,success){if(!success||!tcdata){window._emitEzConsentEvent();return;}
if(!tcdata.gdprApplies){_setAllEzConsentTrue();window._emitEzConsentEvent();return;}
if(tcdata.eventStatus==="useractioncomplete"||tcdata.eventStatus==="tcloaded"){if(typeof gtag!='undefined'){_handleGoogleConsentV2(tcdata);}
_handleConsentDecision(tcdata);if(tcdata.purpose.consents["1"]===true&&tcdata.vendor.consents["755"]!==false){window.ezgconsent=true;(adsbygoogle=window.adsbygoogle||[]).pauseAdRequests=0;}
if(window.__ezconsent){__ezconsent.setEzoicConsentSettings(ezConsentCategories);}
__tcfapi("removeEventListener",2,function(success){return null;},tcdata.listenerId);if(!(tcdata.purpose.consents["1"]===true&&_ezAllowed(tcdata,"2")&&_ezAllowed(tcdata,"3")&&_ezAllowed(tcdata,"4"))){if(typeof __ez=="object"&&typeof __ez.bit=="object"&&typeof window["_ezaq"]=="object"&&typeof window["_ezaq"]["page_view_id"]=="string"){__ez.bit.Add(window["_ezaq"]["page_view_id"],[new __ezDotData("non_personalized_ads",true),]);}}}});}else{_setAllEzConsentTrue();window._emitEzConsentEvent();}})(window,document);</script></body>
<!-- Mirrored from overiq.com/django-1-11/django-logging-users-in-and-out/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:14:42 GMT -->
</html>