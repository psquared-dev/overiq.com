<!DOCTYPE html><html lang="en">
<!-- Mirrored from overiq.com/django-1-11/basics-of-models-in-django/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:12:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"/>
<script>var __ezHttpConsent={setByCat:function(src,tagType,attributes,category,force){var setScript=function(){if(force||window.ezTcfConsent[category]){var scriptElement=document.createElement(tagType);scriptElement.src=src;attributes.forEach(function(attr){for(var key in attr){if(attr.hasOwnProperty(key)){scriptElement.setAttribute(key,attr[key]);}}});var firstScript=document.getElementsByTagName(tagType)[0];firstScript.parentNode.insertBefore(scriptElement,firstScript);}};if(force||(window.ezTcfConsent&&window.ezTcfConsent.loaded)){setScript();}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){setScript();}else{console.error("cannot get ez consent data");force=true;setScript();}});}else{force=true;setScript();console.error("getEzConsentData is not a function");}},};</script>
<script>var ezTcfConsent=window.ezTcfConsent?window.ezTcfConsent:{loaded:false,store_info:false,develop_and_improve_services:false,measure_ad_performance:false,measure_content_performance:false,select_basic_ads:false,create_ad_profile:false,select_personalized_ads:false,create_content_profile:false,select_personalized_content:false,understand_audiences:false,use_limited_data_to_select_content:false,};function getEzConsentData(){return new Promise(function(resolve){document.addEventListener("ezConsentEvent",function(event){var ezTcfConsent=event.detail.ezTcfConsent;resolve(ezTcfConsent);});});}</script>
<script>if(typeof _setEzCookies!=='function'){function _setEzCookies(ezConsentData){var cookies=window.ezCookieQueue;for(var i=0;i<cookies.length;i++){var cookie=cookies[i];if(ezConsentData&&ezConsentData.loaded&&ezConsentData[cookie.tcfCategory]){document.cookie=cookie.name+"="+cookie.value;}}}}
window.ezCookieQueue=window.ezCookieQueue||[];if(typeof addEzCookies!=='function'){function addEzCookies(arr){window.ezCookieQueue=[...window.ezCookieQueue,...arr];}}
addEzCookies([]);if(window.ezTcfConsent&&window.ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else{console.error("cannot get ez consent data");_setEzCookies(window.ezTcfConsent);}});}else{console.error("getEzConsentData is not a function");_setEzCookies(window.ezTcfConsent);}</script>
<script data-ezscrex='false' data-cfasync='false' data-pagespeed-no-defer>var __ez=__ez||{};__ez.stms=Date.now();__ez.evt={};__ez.script={};__ez.ck=__ez.ck||{};__ez.template={};__ez.template.isOrig=true;window.__ezScriptHost="//www.ezojs.com";__ez.queue=__ez.queue||function(){var e=0,i=0,t=[],n=!1,o=[],r=[],s=!0,a=function(e,i,n,o,r,s,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,d=this;this.name=e,this.funcName=i,this.parameters=null===n?null:w(n)?n:[n],this.isBlock=o,this.blockedBy=r,this.deleteWhenComplete=s,this.isError=!1,this.isComplete=!1,this.isInitialized=!1,this.proceedIfError=a,this.fWindow=l,this.isTimeDelay=!1,this.process=function(){f("... func = "+e),d.isInitialized=!0,d.isComplete=!0,f("... func.apply: "+e);var i=d.funcName.split("."),n=null,o=this.fWindow||window;i.length>3||(n=3===i.length?o[i[0]][i[1]][i[2]]:2===i.length?o[i[0]][i[1]]:o[d.funcName]),null!=n&&n.apply(null,this.parameters),!0===d.deleteWhenComplete&&delete t[e],!0===d.isBlock&&(f("----- F'D: "+d.name),m())}},l=function(e,i,t,n,o,r,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,l=this;this.name=e,this.path=i,this.async=o,this.defer=r,this.isBlock=t,this.blockedBy=n,this.isInitialized=!1,this.isError=!1,this.isComplete=!1,this.proceedIfError=s,this.fWindow=a,this.isTimeDelay=!1,this.isPath=function(e){return"/"===e[0]&&"/"!==e[1]},this.getSrc=function(e){return void 0!==window.__ezScriptHost&&this.isPath(e)&&"banger.js"!==this.name?window.__ezScriptHost+e:e},this.process=function(){l.isInitialized=!0,f("... file = "+e);var i=this.fWindow?this.fWindow.document:document,t=i.createElement("script");t.src=this.getSrc(this.path),!0===o?t.async=!0:!0===r&&(t.defer=!0),t.onerror=function(){var e={url:window.location.href,name:l.name,path:l.path,user_agent:window.navigator.userAgent};"undefined"!=typeof _ezaq&&(e.pageview_id=_ezaq.page_view_id);var i=encodeURIComponent(JSON.stringify(e)),t=new XMLHttpRequest;t.open("GET/index.html","//g.ezoic.net/ezqlog?d="+i,!0),t.send(),f("----- ERR'D: "+l.name),l.isError=!0,!0===l.isBlock&&m()},t.onreadystatechange=t.onload=function(){var e=t.readyState;f("----- F'D: "+l.name),e&&!/loaded|complete/.test(e)||(l.isComplete=!0,!0===l.isBlock&&m())},i.getElementsByTagName("head")[0].appendChild(t)}},d=function(e,i){this.name=e,this.path="",this.async=!1,this.defer=!1,this.isBlock=!1,this.blockedBy=[],this.isInitialized=!0,this.isError=!1,this.isComplete=i,this.proceedIfError=!1,this.isTimeDelay=!1,this.process=function(){}};function c(e,i,n,s,a,d,c,u,f){var m=new l(e,i,n,s,a,d,c,f);!0===u?o[e]=m:r[e]=m,t[e]=m,h(m)}function h(e){!0!==u(e)&&0!=s&&e.process()}function u(e){if(!0===e.isTimeDelay&&!1===n)return f(e.name+" blocked = TIME DELAY!"),!0;if(w(e.blockedBy))for(var i=0;i<e.blockedBy.length;i++){var o=e.blockedBy[i];if(!1===t.hasOwnProperty(o))return f(e.name+" blocked = "+o),!0;if(!0===e.proceedIfError&&!0===t[o].isError)return!1;if(!1===t[o].isComplete)return f(e.name+" blocked = "+o),!0}return!1}function f(e){var i=window.location.href,t=new RegExp("[?&]ezq=([^&#]*)","i").exec(i);"1"===(t?t[1]:null)&&console.debug(e)}function m(){++e>200||(f("let's go"),p(o),p(r))}function p(e){for(var i in e)if(!1!==e.hasOwnProperty(i)){var t=e[i];!0===t.isComplete||u(t)||!0===t.isInitialized||!0===t.isError?!0===t.isError?f(t.name+": error"):!0===t.isComplete?f(t.name+": complete already"):!0===t.isInitialized&&f(t.name+": initialized already"):t.process()}}function w(e){return"[object Array]"==Object.prototype.toString.call(e)}return window.addEventListener("load",(function(){setTimeout((function(){n=!0,f("TDELAY -----"),m()}),5e3)}),!1),{addFile:c,addFileOnce:function(e,i,n,o,r,s,a,l,d){t[e]||c(e,i,n,o,r,s,a,l,d)},addDelayFile:function(e,i){var n=new l(e,i,!1,[],!1,!1,!0);n.isTimeDelay=!0,f(e+" ...  FILE! TDELAY"),r[e]=n,t[e]=n,h(n)},addFunc:function(e,n,s,l,d,c,u,f,m,p){!0===c&&(e=e+"_"+i++);var w=new a(e,n,s,l,d,u,f,p);!0===m?o[e]=w:r[e]=w,t[e]=w,h(w)},addDelayFunc:function(e,i,n){var o=new a(e,i,n,!1,[],!0,!0);o.isTimeDelay=!0,f(e+" ...  FUNCTION! TDELAY"),r[e]=o,t[e]=o,h(o)},items:t,processAll:m,setallowLoad:function(e){s=e},markLoaded:function(e){if(e&&0!==e.length){if(e in t){var i=t[e];!0===i.isComplete?f(i.name+" "+e+": error loaded duplicate"):(i.isComplete=!0,i.isInitialized=!0)}else t[e]=new d(e,!0);f("markLoaded dummyfile: "+t[e].name)}},logWhatsBlocked:function(){for(var e in t)!1!==t.hasOwnProperty(e)&&u(t[e])}}}();__ez.evt.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n()},__ez.evt.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]};__ez.script.add=function(e){var t=document.createElement("script");t.src=e,t.async=!0,t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)};__ez.dot={};__ez.queue.addFile('../../detroitchicago/boise.js', '../../detroitchicago/boisebb26.js?gcb=195-3&amp;cb=5', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/abilene.js', '../../parsonsmaize/abilenec0f9.js?gcb=195-3&amp;cb=7f81d60744', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/mulvane.js', '../../parsonsmaize/mulvane2d63.js?gcb=195-3&amp;cb=e75e48eec0', true, ['/parsonsmaize/abilene.js'], true, false, true, false);__ez.queue.addFile('../../detroitchicago/birmingham.js', '../../detroitchicago/birminghame7ec.js?gcb=195-3&amp;cb=539c47377c', true, ['/parsonsmaize/abilene.js'], true, false, true, false);</script>
<script data-ezscrex="false" type="text/javascript" data-cfasync="false">window._ezaq = Object.assign({"ad_cache_level":1,"adpicker_placement_cnt":0,"ai_placeholder_cache_level":1,"ai_placeholder_placement_cnt":-1,"domain_id":92771,"ezcache_level":1,"ezcache_skip_code":0,"has_bad_image":0,"has_bad_words":0,"is_sitespeed":0,"lt_cache_level":0,"response_size":134228,"response_size_orig":128460,"response_time_orig":1551,"template_id":5,"url":"https://overiq.com/django-1-11/basics-of-models-in-django/","word_count":0,"worst_bad_word_level":0}, typeof window._ezaq !== "undefined" ? window._ezaq : {});__ez.queue.markLoaded('ezaqBaseReady');</script>
<script type='text/javascript' data-ezscrex='false' data-cfasync='false'>
window.ezAnalyticsStatic = true;

function analyticsAddScript(script) {
	var ezDynamic = document.createElement('script');
	ezDynamic.type = 'text/javascript';
	ezDynamic.innerHTML = script;
	document.head.appendChild(ezDynamic);
}
function getCookiesWithPrefix() {
    var allCookies = document.cookie.split(';');
    var cookiesWithPrefix = {};

    for (var i = 0; i < allCookies.length; i++) {
        var cookie = allCookies[i].trim();

        for (var j = 0; j < arguments.length; j++) {
            var prefix = arguments[j];
            if (cookie.indexOf(prefix) === 0) {
                var cookieParts = cookie.split('=');
                var cookieName = cookieParts[0];
                var cookieValue = cookieParts.slice(1).join('=');
                cookiesWithPrefix[cookieName] = decodeURIComponent(cookieValue);
                break; // Once matched, no need to check other prefixes
            }
        }
    }

    return cookiesWithPrefix;
}
function productAnalytics() {
	var d = {"pr":[6],"omd5":"bdd4f69640b6bf5959194226278e4b0c"};
	d.u = _ezaq.url;
	d.p = _ezaq.page_view_id;
	d.v = _ezaq.visit_uuid;
	d.ab = _ezaq.ab_test_id;
	d.e = JSON.stringify(_ezaq);
	d.ref = document.referrer;
	d.c = getCookiesWithPrefix('active_template', 'ez', 'lp_');
	if(typeof ez_utmParams !== 'undefined') {
		d.utm = ez_utmParams;
	}

	var dataText = JSON.stringify(d);
	var xhr = new XMLHttpRequest();
	xhr.open('POST/index.html','/ezais/analytics?cb=1', true);
	xhr.onload = function () {
		if (xhr.status!=200) {
            return;
		}

        if(document.readyState !== 'loading') {
            analyticsAddScript(xhr.response);
            return;
        }

        var eventFunc = function() {
            if(document.readyState === 'loading') {
                return;
            }
            document.removeEventListener('readystatechange', eventFunc, false);
            analyticsAddScript(xhr.response);
        };

        document.addEventListener('readystatechange', eventFunc, false);
	};
	xhr.setRequestHeader('Content-Type','text/plain');
	xhr.send(dataText);
}
__ez.queue.addFunc("productAnalytics", "productAnalytics", null, true, ['ezaqBaseReady'], false, false, false, true);
</script><base />
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Basics of Models in Django - Django 1.11 Tutorial - OverIQ.com</title>

    
    



    <meta name="description" content="We have learned quite a lot of things in the last few chapters. At this point, you should have a pretty good understanding of what Templates and View…"/>



    <link rel="canonical" href="index.html"/>


<meta property="og:locale" content="en_US"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Basics of Models in Django"/>

    <meta property="og:description" content="We have learned quite a lot of things in the last few chapters. At this point, you should have a pretty good understanding of what Templates and View…"/>


<meta property="og:url" content="https://overiq.com/django-1-11/basics-of-models-in-django/"/>
<meta property="og:site_name" content="OverIQ.com"/>


<meta property="article:publisher" content="https://www.facebook.com/OverIQ/"/>



<meta name="twitter:card" content="summary_large_image"/>

    <meta name="twitter:description" content="We have learned quite a lot of things in the last few chapters. At this point, you should have a pretty good understanding of what Templates and View…"/>


<meta name="twitter:title" content="Basics of Models in Django"/>
<meta name="twitter:site" content="@infoOverIQ"/>

<meta name="twitter:creator" content="@infoOverIQ"/>




    
    
    


    
    
    


    <link rel="alternate" type="application/rss+xml" title="RSS" href="../../feed.xml/index.html"/>
    
    
    <link href="../../../fonts.googleapis.com/cssd2d5.css?family=Open+Sans" rel="stylesheet"/>
    <link rel="stylesheet" href="../../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="icon" href="../../static/wiki/favicon.png" sizes="32x32"/>

    <link rel="stylesheet" href="../../static/CACHE/css/output.db46da465a8b.css" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-125424793-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125424793-1');
    </script>


<script type='text/javascript'>
var ezoTemplate = 'orig_site';
var ezouid = '1';
var ezoFormfactor = '1';
</script><script data-ezscrex="false" type='text/javascript'>
var soc_app_id = '0';
var did = 92771;
var ezdomain = 'overiq.com';
var ezoicSearchable = 1;
</script></head>
<body>

<div class="overiq-header text-center">
    <div class="site-branding">
        <p class="main-title">
            <a href="../../index.html" rel="home">
                OverIQ.com
            </a>
        </p>
    </div>
</div>

<!-- Navigation -->
<nav class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">Home</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                

                <li>
                    <a href="../../blog/index.html">Blog</a>
                </li>
                <li>
                    <a href="../../contact/index.html">Contact</a>
                </li>
                <li>
                    <a href="../../about/index.html">About</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right visible-lg visible-md">
                <li>
                    <a href="../../feed.xml/index.html" title="RSS" target="_blank">
                        <i class="fa fa-rss fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/overiq/" target="_blank" title="Github">
                        <i class="fa fa-github fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://www.facebook.com/OverIQ/" target="_blank" title="Facebook">
                        <i class="fa fa-facebook fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://twitter.com/infoOverIQ" target="_blank" title="Twitter">
                        <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
                    </a>
                </li>

                

            </ul>

            <form action="https://overiq.com/search/" class="navbar-form navbar-left" role="search">

                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search" name="query" value=""/>
                </div>

                <button type="submit" class="btn btn-default">Submit</button>
            </form>

        </div>



        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">

    


    <div class="se-pre-con"></div>

    

    <div class="row">

        
        <div class="main">
            <div class="col-lg-8 col-md-8 col-sm-12">
                

    


    
        <ol class="breadcrumb">

    <li><a href="../../index.html">Home</a></li>

    
        
        <li><a href="../index.html">Django 1.11 Tutorial</a></li>
        

        

        
    
        

        

        
            <li class="active">Basics of Models in Django</li>
        
    

</ol>
    


<h1>Basics of Models in Django</h1>




    <p><i class="fa fa-calendar" aria-hidden="true"></i>
        Last updated on July 27, 2020
    </p>


<hr/>



<p>We have learned quite a lot of things in the last few chapters. At this point, you should have a pretty good understanding of what Templates and Views are. In this chapter, we will learn about the Model part of the Django MTV architecture.</p>
<span id="the-database-and-model" class="anchor-target"></span><h2 class="heading">The Database and Model <a class="header-link" href="#the-database-and-model">#</a></h2>

<p>Today most modern web applications are database driven. And SQL is the de facto language for accessing databases. If you have already done some Web programming then you may probably know that in languages like PHP, it is very common to mix PHP code and SQL code. Apart from being messy, this method does not encourage separation of concerns. With Django, we don&#39;t that, instead of executing raw SQL queries to access database we use <a href="../django-orm-basics-part-1/index.html">Django ORM</a>, but before we do that, we have to define our data using Models.</p>

<p>So What is a Model?</p>

<p>A Model defines fields and behaviors of the data you are storing. Django models roughly map to a database table. Once the models are in place, Django provides an automatically-generated API (also known as Django ORM) to access the database.</p>

<p>Don&#39;t worry if all this passing over your head. In the next few sections, we are discussing everything in great depth.</p>
<span id="features-checklist" class="anchor-target"></span><h2 class="heading">Features Checklist <a class="header-link" href="#features-checklist">#</a></h2>

<p>As you know, in this tutorial we will be building a code-sharing app called djangobin. You can see a live example of such a site at <a href="https://djangosnippets.org/" rel="nofollow">https://djangosnippets.org/</a>. Unlike djangosnippets.org, however, we will allow users to create snippets for a variety of languages. As with any new application, let&#39;s compile a list of features that we would like to implement in our app. Here is the complete feature list for your reference.</p>

<ol>
<li>Ability to create snippets by selecting language, exposure and expiration time, along with optional title and tags.</li>
<li>Organize snippets by tags.</li>
<li>List of trending snippets.</li>
<li>List recent snippets.</li>
<li>Syntax-aware code highlighting.</li>
<li>List of snippets by language.</li>
<li>Track snippets visit count.</li>
<li>Download snippets, view raw code and delete snippets.</li>
<li>Searching snippets by keywords.</li>
<li>Login users.</li>
<li>Reset Password.</li>
<li>Update Password.</li>
<li>Change account preferences.</li>
<li>View account details</li>
<li>Contact Page.</li>
</ol>
<span id="what-data-do-we-need" class="anchor-target"></span><h2 class="heading">What data do we need? <a class="header-link" href="#what-data-do-we-need">#</a></h2>

<p>To implement the features outlined in the previous section, we would need to store information about the four entities: author, language, snippet and tag.</p>

<p>The author entity represents information about an author. An author has attributes like name, email, creation date and so on. Similarly, language, snippet and tag entities represent the information about the programming language, code snippet and the tag itself and each has their own set of attributes. The following is a list of attributes that we would like to store in the database.</p>

<p><strong>Author:</strong></p>

<ul>
<li>name - the name of the author</li>
<li>email - email of the author</li>
<li>active - a boolean field which designates whether the user can login or not</li>
<li>creation date - creation date</li>
<li>last login date - last logged in date</li>
</ul>

<p><strong>Language:</strong></p>

<ul>
<li>name - the name of the language.</li>
<li>language code - a language code to load the appropriate Pygment&#39;s* lexer.</li>
<li>slug - a unique identifier for the language.</li>
<li>mime - mime to use to send the snippet file.</li>
<li>file_extension - file extension to use while downloading the snippet.</li>
<li>publication date - date of creation</li>
</ul>

<p><strong>Snippet:</strong></p>

<ul>
<li>title - title of the snippet </li>
<li>slug - a unique identifier for the snippet</li>
<li>original_code - code entered by the user</li>
<li>highlighted_code - syntax-highlighted HTML version of the code</li>
<li>expiration - expiration time of snippet (i.e never, 1 month, 6 months, 1 year)</li>
<li>exposure - Snippet exposure (i.e public, private and unlisted)*.</li>
<li>hits - the number of visits</li>
<li>tag - a list of tags</li>
</ul>

<p><strong>Tag:</strong></p>

<ul>
<li>name - the name of the tag</li>
<li>slug - a unique identifier for the tag.</li>
</ul>

<p><strong>Note:</strong> Pygments is a library to highlight code snippets. To learn more about it visit this <a href="../../pygments-tutorial/index.html">Pygments tutorial</a>.</p>

<p><strong>Note:</strong> So What is Public, Private and Unlisted in the context of Snippet? Public snippets are visible to everyone whereas private snippets are only visible to you. To create private snippet you have to login using username and password. Further, the public snippet will appear in the search, archive pages and recent snippet list throughout the site. You can also create Unlisted snippets, these items will not appear in search, archive pages and recent snippet list. In other words, Unlisted snippets will be invisible to the user unless you share the snippet URL. You don&#39;t need to login to create an Unlisted snippet. There are many sites which uses such a system, one popular example is pastebin.com.</p>

<p>In the context of Database, each of these entities corresponds to a table and each attribute corresponds to a column. And in the context of Django, each entity is a model and each attribute is a field.</p>

<p>By default, Django automatically adds a primary key field called <code>id</code> to all models. You can refer to it using <code>id</code> or <code>pk</code>. The key automatically increments every time a new record is added.</p>

<p>You might be wondering what the slug means. A slug is part of a URL which identifies a page. A slug can only consist of alphabets, numbers, underscore or hyphens. For example, in the URL <code>http://example.com/very-important-post/</code>, the slug is <code>very-important-post</code>. As we will see, Django can automatically generate slug from the title.</p>

<p>Now let&#39;s take a look at what type of relationship exists between these entities.</p>

<ol>
<li><p>An author can create one or more snippets but a snippet can only belong to one author. So there exists a one-to-many relationship between Author and Snippet.</p>

<p><img src="../../media/uploads/2018/6/4/2018-06-04_3-49-45-30109706-f082-40d4-9005-d07701067c74.png" loading="lazy" alt=""/></p></li>
<li><p>An author can create one or more snippets of the same language but a snippet can only belong to one language. So again there exists a one-to-many relationship between Language and Snippet.</p>

<p><img src="../../media/uploads/2018/6/4/2018-06-04_4-27-13-93429d10-d5f9-4f30-a5ad-96f593002992.png" loading="lazy" alt=""/></p></li>
<li><p>A snippet can be can tagged with one or more tags. Similarly, a tag can belong to one or more snippets. So there exists a many-to-many relationship between Snippet and Tag.</p>

<p><img src="../../media/uploads/2018/6/4/2018-06-04_4-43-54-f1d8c71c-a1cd-45e1-827e-669080a0a1f4.png" loading="lazy" alt=""/></p></li>
</ol>

<p>All in all, we have 2 one-to-many relationships and 1 many-to-many relationship.</p>

<p>We will see later how to define these relationships inside our models. For now, just remember these relationships exists between our entities.</p>

<p>Here is the updated list of attributes of each entity along with the relationship between them.</p>

<p><strong>Author:</strong></p>

<ul>
<li>name</li>
<li>email</li>
<li>active</li>
<li>creation date</li>
<li>last login date</li>
</ul>

<p><strong>Language:</strong></p>

<ul>
<li>name </li>
<li>language code </li>
<li>slug </li>
<li>mime </li>
<li>file_extension</li>
<li>publication date</li>
</ul>

<p><strong>Snippet:</strong></p>

<ul>
<li>title </li>
<li>slug </li>
<li>original_code </li>
<li>highlighted_code </li>
<li>expiration </li>
<li>exposure</li>
<li>hits </li>
<li>tag </li>
<li>Foreign key to author</li>
<li>Foreign key to language</li>
</ul>

<p><strong>Tag:</strong></p>

<ul>
<li>name</li>
<li>slug</li>
</ul>

<p><strong>Junction Table (representing a many-to-many relationship between snippets and tags)</strong></p>

<ul>
<li>snippets and tag</li>
</ul>
<span id="creating-models" class="anchor-target"></span><h2 class="heading">Creating Models <a class="header-link" href="#creating-models">#</a></h2>

<p>Open <code>models.py</code> file inside the djangobin app directory. It should look like this:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="c1"># Create your models here.</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Let&#39;s start by creating an <code>Author</code> model. A model is just a Python class which inherits from <code>models.Model</code> class. Add the following code to <code>models.py</code> file.</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="c1"># Create your models here.</span>


<span class="hll"><span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="hll">    <span class="k">pass</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Syntactically, <code>Author</code> is a valid model, although it doesn&#39;t contain any fields (or attributes), it is still valid. Generally, when we define model we specify the all the fields along with their types. As already said, Django automatically adds a primary key field called <code>id</code> for all models, so you don&#39;t need to define it manually. For <code>Author</code> model we want following fields:</p>

<ul>
<li>name</li>
<li>email</li>
<li>active</li>
<li>account creation date</li>
<li>last_logged_in</li>
</ul>

<p>Here is the code to add these fields:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="c1"># Create your models here.</span>


<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="hll">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span class="hll">    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">(</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">    <span class="n">active</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">()</span>
</span><span class="hll">    <span class="n">last_logged_in</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">()</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Let&#39;s step through the code we have added.</p>

<p>In line 7, we are defining <code>name</code> field of type <code>CharField</code>, think of <code>CharField</code> type as <code>VARCHAR</code> in context of the database. The <code>max_length</code> argument specifies the maximum number of characters this field can store.</p>

<p>In line 8, here we are defining <code>email</code> field of type <code>EmailField</code>. The <code>unique=True</code> means that value of this field must be unique throughout the table. We can pass <code>unique</code> and <code>max_length</code> arguments to almost all types of fields.</p>

<p>In line 9, we are defining <code>active</code> field which designates whether the user is active or not. The type of this field is <code>BooleanField</code>. A <code>BooleanField</code> field can only take two values <code>True</code> or <code>False</code>. You can also pass <code>1</code> and <code>0</code> to it. The <code>default</code> is a special argument and is used to set the default value for the column. This default value is used in the case when the value of the column is not supplied while creating a new record.</p>

<p>In line 10 and 11, we are defining two fields, <code>created_on</code> and <code>last_logged_in</code> of type <code>DateTimeField</code>. A <code>DateTimeField</code> is used to store date and time and it corresponds to <code>datetime.datetime</code> object in Python.</p>

<p>At this point, you might be thinking &#34;Database already provides various types of data types to store data&#34;. So what&#39;s the purpose of redefining them in Django?</p>

<p>They serve two important purposes:</p>

<ol>
<li>They validate data before it is saved into the database.</li>
<li>They also control how to display data in the form using Widgets.</li>
</ol>

<p>Widget refers to HTML representation of a field. Every field has a default widget. For example, the default widget for <code>Charfield</code> is <code>&lt;input type=&#34;text&#34; &gt;</code>. The utility of widgets come into play when we create forms. We will discuss how to do that in future lessons.</p>

<p>Note that both <code>models.Model</code> and model fields (i.e <code>models.CharField</code>, <code>models.EmailField</code> etc) are Python classes. In the context of Python <code>CharField</code> is a string. In the context of database <code>CharField</code> is <code>VARCHAR</code>. The <code>CharField</code> is very special field because it is the basis for all the other string-based fields. Django doesn&#39;t validate contents of the field of type <code>CharField</code>. In other words, Django doesn&#39;t check the values provided to the <code>CharField</code> field. It makes sense if you think about it. As <code>CharField</code> is essentially a string field, it can take almost any type of data. So, <code>1</code>, <code>mymail@example.com</code>, <code>100e100</code>, <code>DJANG0</code>, <code>%^%*&amp;^%$#</code> all are valid examples of data.</p>

<p>However, the fields which inherit from <code>CharField</code> do perform Validation. For example, the <code>EmailField</code>. The <code>EmailField</code> is commonly used to store email, if you try to store anything else in it, it will raise an exception.</p>

<p>Django provides many other fields to store different types of data. The following table lists some common fields:</p>
<div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>Field Name</th>
<th>What it is used for?</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>CharField</code></td>
<td>A Field for storing small to medium-sized string. It acts as a base for other string-based fields. It doesn&#39;t provide any validation</td>
</tr>
<tr>
<td><code>SlugField</code></td>
<td>A <code>CharField</code> to store slug. It only accepts alphabets, numbers, underscores and hyphens. It provides validation.</td>
</tr>
<tr>
<td><code>DateField</code></td>
<td>A Field to store date. It corresponds to Python&#39;s <code>datetime.date</code> instance. It doesn&#39;t inherit from <code>CharField</code>. It provides validation.</td>
</tr>
<tr>
<td><code>DateTimeField</code></td>
<td>A Field to store date and time. It corresponds to  Python&#39;s <code>datetime.datetime</code> instance. It provides validation.</td>
</tr>
<tr>
<td><code>EmailField</code></td>
<td>A <code>CharField</code> to store Email address. It verifies whether value entered value is valid email or not</td>
</tr>
<tr>
<td><code>URLField</code></td>
<td>A <code>CharField</code> used to store URL. It provides validation. Note that it is different from <code>SlugField</code>. The <code>SlugField</code> only contains a part of the URL, not the URL itself.</td>
</tr>
<tr>
<td><code>TextField</code></td>
<td>A field to store a large amount of text. Use this field to store the content of blog post, news, stories etc. In Python, this field translates to string. In databases, it translates to <code>TEXT</code> field. Like <code>CharField</code> this field doesn&#39;t provide any validation</td>
</tr>
<tr>
<td><code>BooleanField</code></td>
<td>A field to store <code>True</code> or <code>False</code>. In the context of Python, it translates to boolean <code>True</code> and <code>False</code>. In the context of the database (as we are using SQLite) it is stored as an integer (<code>1</code>)<code>True</code> and (<code>0</code>) <code>False</code>. Remember SQLite has integer type to handle integers.</td>
</tr>
<tr>
<td><code>IntegerField</code></td>
<td>A field to store integer values from <code>-2147483648</code> to <code>2147483647</code>. It checks whether the value entered is number or not.</td>
</tr>
<tr>
<td><code>DecimalField</code></td>
<td>A field to store decimal number.</td>
</tr>
<tr>
<td><code>ForeignKey</code></td>
<td>A Field to define a one-to-many relationship.</td>
</tr>
<tr>
<td><code>ManyToManyField</code></td>
<td>A Field to define a many-to-many relationship.</td>
</tr>
<tr>
<td><code>OneToOneField</code></td>
<td>A field to define one-to-one relationship.</td>
</tr>
</tbody>
</table></div><span id="optional-field-parameters" class="anchor-target"></span><h2 class="heading">Optional Field Parameters <a class="header-link" href="#optional-field-parameters">#</a></h2>

<p>The following are some optional field parameters available to all types of field. To use these parameters pass them as keyword arguments to the model field class.</p>
<span id="blank" class="anchor-target"></span><h3 class="heading">blank <a class="header-link" href="#blank">#</a></h3>

<p>As we will see, Django can automatically generate forms by inferring the field types from the model class. Further, Django expects you to enter data in every field. If you try to submit a field without entering any data then Django will show validation errors. To make a field optional set <code>blank=True</code> while defining it in the model. The default value of this parameter is <code>False</code>. After setting <code>blank=True</code>, if you don&#39;t provide any value to the field, Django will automatically insert an empty string into the field.</p>
<span id="null" class="anchor-target"></span><h3 class="heading">null <a class="header-link" href="#null">#</a></h3>

<p>If set to <code>True</code>, Django will store empty values as <code>NULL</code> in the database. The default is <code>False</code>. Django doesn&#39;t recommend setting <code>null=True</code> for string-based fields. Because if you don&#39;t provide any value to the field then Django will automatically insert an empty string into the field. If you still add <code>null=True</code> for string-based field then you will end up with two possible values for &#34;no data&#34;: <code>NULL</code>, and the empty string. In such a case, Django will insert <code>NULL</code> instead of an empty string. However, there are some occasions where setting <code>null=True</code> in string-based fields can be useful. We will see an example of such a case in the next section. </p>

<p>Beginners often find <code>blank</code> and <code>null</code> confusing and end up and using them inappropriately. If you are still confused, Just remember, the utility of <code>blank</code> parameter is only restricted to the validation mechanism, not to your database. Whereas <code>null</code> controls whether a field can be <code>NULL</code> or not at the database level.</p>
<span id="default" class="anchor-target"></span><h3 class="heading">default <a class="header-link" href="#default">#</a></h3>

<p>You can pass this parameter to set the default value of a Field. The default value will be used when the value for the field is not provided at the time of inserting new records in the table.</p>
<span id="unique" class="anchor-target"></span><h3 class="heading">unique <a class="header-link" href="#unique">#</a></h3>

<p>If set to <code>True</code> then the value in the field will be unique throughout the table. The default value is <code>False</code>.</p>
<span id="help_text" class="anchor-target"></span><h3 class="heading">help_text <a class="header-link" href="#help_text">#</a></h3>

<p>This parameter is used to specify a help string. A help string describes how to use a field or some other important information regarding the field.</p>
<span id="db_index" class="anchor-target"></span><h3 class="heading">db_index <a class="header-link" href="#db_index">#</a></h3>

<p>If set to <code>True</code> creates an indexed column. It defaults to <code>False</code>.</p>
<span id="db_column" class="anchor-target"></span><h3 class="heading">db_column <a class="header-link" href="#db_column">#</a></h3>

<p>This parameter is used to specify the name of the column in the database. If you don&#39;t provide this option, Django will use the field name in the model.</p>
<span id="choices" class="anchor-target"></span><h3 class="heading">choices <a class="header-link" href="#choices">#</a></h3>

<p>This parameter specifies predefined values for a field as tuples of tuples. For example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">STATUS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;pen&#39;</span><span class="p">,</span> <span class="s1">&#39;Pending&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;pub&#39;</span><span class="p">,</span> <span class="s1">&#39;Published&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;tra&#39;</span><span class="p">,</span> <span class="s1">&#39;Trash&#39;</span><span class="p">),</span>    
<span class="p">)</span>

<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">STATUS</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>If this parameter is specified the default widget will be a <code>&lt;select&gt;</code> box instead of<br/>
<code>&lt;input type=&#34;text&#34;&gt;</code>. The first element in each tuple is what we assign to the model instance, and the value of the second element will be displayed to the user.</p>

<p>There are many other optional parameters, to view the full list checkout the <a href="https://docs.djangoproject.com/en/1.11/ref/models/fields/#field-options" rel="nofollow">documentation</a>.</p>
<span id="getting-acquainted" class="anchor-target"></span><h2 class="heading">Getting Acquainted <a class="header-link" href="#getting-acquainted">#</a></h2>

<p>Don&#39;t get overwhelmed by various field types and their parameters. You don&#39;t need to remember all of them. Let&#39;s say you want to use <code>URLField</code> and want to know it&#39;s parameter. Open your browser and visit <a href="https://docs.djangoproject.com/en/1.11/ref/models/fields/" rel="nofollow">https://docs.djangoproject.com/en/1.11/ref/models/fields/</a>. This page contains documentation about every field type and their available options(parameters) in Django 1.11. Search the page for <code>URLField</code> keyword. Scroll down halfway through the page until you find the section describing <code>URLField</code>.</p>

<p><img src="../../media/uploads/2018/5/21/Selection_038-b9262bb0-e0c0-4c3d-8594-d3f2cf65069e.png" loading="lazy" alt=""/></p>

<p>The <code>URLField</code> documentation tells you following things:</p>

<ol>
<li><p>The first line specifies the class signature. In other words, what arguments should be passed to create an instance of <code>URLField</code>.</p></li>
<li><p>It is <code>CharField</code> field means it inherits from <code>CharField</code>.</p></li>
<li><p>The default form widget for this field is a <code>TextInput</code>. The <code>TextInput</code> is the name of the widget class which corresponds to <code>&lt;input type=&#34;text&#34;&gt;</code> element. In other words, <code>URLField</code> will be displayed using <code>&lt;input type=&#34;text&#34;&gt;</code> tag. We will learn more about widgets and how to override them in <a href="../django-form-basics/index.html">Django Form Basics</a> chapter.</p></li>
<li><p>The next line tells us we can also pass an optional <code>max_length</code> parameter to <code>URLField</code> to limit the number of characters this field can take. If you don&#39;t specify <code>max_length</code> then a default value of <code>200</code> will be used.</p></li>
</ol>

<p>An astute reader might say but what about the second argument in class signature i.e <br/>
<code>**options</code>?</p>

<p>The <code>**options</code> refers to the optional keyword arguments that all of the fields can take. We have covered some of them in the previous section.</p>

<p>Let&#39;s say you want to create unique <code>URLField</code> field of length <code>100</code>. Here is the code to do that:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">URLField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, all fields are required. If you don&#39;t specify data to a required field Django will display validation errors. To make the URL field optional add <code>blank=True</code>.</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">URLField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Did you notice something odd?</p>

<p>Here we have made <code>url</code> field optional. This means if you don&#39;t enter provide any value to it Django will automatically insert an empty string. But we have also set <code>unique</code> to <code>True</code> that means no two columns can have the same values. To resolve the conflict you must add <code>null=True</code> to <code>url</code> field definition:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">URLField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div><span id="completing-other-models" class="anchor-target"></span><h2 class="heading">Completing other Models <a class="header-link" href="#completing-other-models">#</a></h2>

<p>Let&#39;s add the code for the remaining models.</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="hll"><span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">Preference</span> <span class="k">as</span> <span class="n">Pref</span>
</span>
<span class="c1"># Create your models here.</span>


<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">(</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">active</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="hll">    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">    <span class="n">last_logged_in</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">
</span><span class="hll"><span class="k">class</span> <span class="nc">Language</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="hll">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span class="hll">    <span class="n">lang_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">    <span class="n">mime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s1">&#39;MIME to use when sending snippet as file.&#39;</span><span class="p">)</span>
</span><span class="hll">    <span class="n">file_extension</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span class="hll">    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">
</span><span class="hll"><span class="k">class</span> <span class="nc">Snippet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="hll">    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">    <span class="n">original_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
</span><span class="hll">    <span class="n">highlighted_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
</span><span class="hll">    <span class="n">expiration</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Pref</span><span class="o">.</span><span class="n">expiration_choices</span><span class="p">)</span>
</span><span class="hll">    <span class="n">exposure</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Pref</span><span class="o">.</span><span class="n">exposure_choices</span><span class="p">)</span>
</span><span class="hll">    <span class="n">hits</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span class="hll">    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">()</span>
</span><span class="hll">    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">
</span><span class="hll"><span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="hll">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>There is nothing new in above code except for <code>auto_now</code> and <code>auto_now_add</code> parameters passed to <code>DateTimeField</code> constructor. The <code>auto_now</code> parameter when set to <code>True</code> updates the value of the field automatically to current date and time every time an object (i.e an instance of <code>Model</code>) is saved. We use this parameter to commonly store last-modified timestamps. The important thing to note about this parameter is that it only updates the field when <code>Model.save()</code> method is called on the model instance. At this point, we haven&#39;t covered the <code>save()</code> method, so just keep this statement in mind, it will make more sense when we will discuss the <code>save()</code> method in <a href="../django-orm-basics-part-1/index.html">Django ORM Basics</a> lesson.</p>

<p>The <code>auto_now_add</code> parameter, when set to <code>True</code> automatically, sets the field value to current date and time when the object is first created.</p>

<p>You can also pass these two parameters to the <code>DateField</code>. In that case, <code>auto_now</code> updates the value of the field automatically to current date every time object is saved. And <code>auto_now_add</code> parameter when set to <code>True</code> automatically sets the field value to the current date when the object is first created.</p>

<p>The choices for <code>expiration</code> and <code>exposure</code> fields in the <code>Snippet</code> model is coming from the <code>Preference</code> class defined in <code>utils.py</code> file as follows:</p>

<p><strong>djangobin/django_project/djangobin/utils.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Preference</span><span class="p">:</span>

    <span class="n">SNIPPET_EXPIRE_NEVER</span> <span class="o">=</span> <span class="s1">&#39;never&#39;</span>
    <span class="n">SNIPPET_EXPIRE_1WEEK</span> <span class="o">=</span> <span class="s1">&#39;1 week&#39;</span>
    <span class="n">SNIPPET_EXPIRE_1MONTH</span> <span class="o">=</span> <span class="s1">&#39;1 month&#39;</span>
    <span class="n">SNIPPET_EXPIRE_6MONTH</span> <span class="o">=</span> <span class="s1">&#39;6 month&#39;</span>
    <span class="n">SNIPPET_EXPIRE_1YEAR</span> <span class="o">=</span> <span class="s1">&#39;1 year&#39;</span>

    <span class="n">expiration_choices</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">SNIPPET_EXPIRE_NEVER</span><span class="p">,</span> <span class="s1">&#39;Never&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SNIPPET_EXPIRE_1WEEK</span><span class="p">,</span> <span class="s1">&#39;1 week&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SNIPPET_EXPIRE_1MONTH</span><span class="p">,</span> <span class="s1">&#39;1 month&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SNIPPET_EXPIRE_6MONTH</span><span class="p">,</span> <span class="s1">&#39;6 month&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SNIPPET_EXPIRE_1YEAR</span><span class="p">,</span> <span class="s1">&#39;1 year&#39;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">SNIPPET_EXPOSURE_PUBLIC</span> <span class="o">=</span> <span class="s1">&#39;public&#39;</span>
    <span class="n">SNIPPET_EXPOSURE_UNLIST</span> <span class="o">=</span> <span class="s1">&#39;unlisted&#39;</span>
    <span class="n">SNIPPET_EXPOSURE_PRIVATE</span> <span class="o">=</span> <span class="s1">&#39;private&#39;</span>

    <span class="n">exposure_choices</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">SNIPPET_EXPOSURE_PUBLIC</span><span class="p">,</span> <span class="s1">&#39;Public&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SNIPPET_EXPOSURE_UNLIST</span><span class="p">,</span> <span class="s1">&#39;Unlisted&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SNIPPET_EXPOSURE_PRIVATE</span><span class="p">,</span> <span class="s1">&#39;Private&#39;</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>We are defining choices in a separate class so that the other modules of the application can access them easily.</p>
<span id="adding-relationships-to-our-models" class="anchor-target"></span><h2 class="heading">Adding relationships to our models <a class="header-link" href="#adding-relationships-to-our-models">#</a></h2>

<p>In this section, we will learn how to add relationships between our models:</p>

<p>Recall that we have outlined the following the relationships between our models.</p>

<ol>
<li>A one-to-many relationship between Author and Snippet models.</li>
<li>A one-to-many relationship between Language and Snippet models.</li>
<li>A many-to-many relationship between Snippet and Tag models.</li>
</ol>

<p>Creating one-to-many relationship is simple, just add <code>ForeignKey</code> field on the many side of the relationship. The <code>ForeignKey</code> constructor requires two parameters: the name of the class to which the model is related and <code>on_delete</code> option. The <code>on_delete</code> option specifies how Django treats rows in the child table when a row in the parent table is deleted. The following table lists possible values of <code>on_delete</code> option.</p>
<div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>CASCADE</code></td>
<td>Delete the row or rows in the child table automatically when a row in the parent table is deleted.</td>
</tr>
<tr>
<td><code>PROTECT</code></td>
<td>Restrict deletion of a row in the parent table if there are related rows in the child table.</td>
</tr>
<tr>
<td><code>SET_NULL</code></td>
<td>Set the Foreign key column or columns in the child table to <code>NULL</code> and delete the row from the parent table.</td>
</tr>
<tr>
<td><code>SET_DEFAULT</code></td>
<td>Set the Foreign key column or columns in the child table to some default value. To use this option you must set some default value using the <code>default</code> parameter.</td>
</tr>
<tr>
<td><code>DO_NOTHING</code></td>
<td>No action is taken in the child table if a record in the parent table is deleted. If your database enforces referential integrity then this will generate an error.</td>
</tr>
<tr>
<td><code>SET()</code></td>
<td>Set a value to the Foreign key column through a callable. This is not the part of SQL standard.</td>
</tr>
</tbody>
</table></div>
<p>Let&#39;s now add <code>ForeignKey</code> field to our models. Open <code>models.py</code> file and add two <code>ForeignKey</code> fields to <code>Snippet</code> models as follows:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="k">class</span> <span class="nc">Snippet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">original_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">highlighted_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">expiration</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Pref</span><span class="o">.</span><span class="n">expiration_choices</span><span class="p">)</span>
    <span class="n">exposure</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Pref</span><span class="o">.</span><span class="n">exposure_choices</span><span class="p">)</span>
    <span class="n">hits</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">()</span>
    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="hll">    <span class="n">language</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Language</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</span><span class="hll">    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Here we have added the 2 one-to-many relationships:</p>

<ol>
<li>The first is between <code>Language</code> and <code>Snippet</code>.</li>
<li>The second is between <code>Author</code> and <code>Snippet</code>.</li>
</ol>

<p>Similarly, creating a many-to-many relationship is easy. In our case, we have a many-to-many relationship between <code>Snippet</code> and <code>Tag</code> models. To create many-to-many relationship add <code>ManyToManyField</code> field to any one side of the relationship. In other words, you can add <code>ManyToManyField</code> either on the <code>Snippet</code> model or <code>Tag</code> model. Just like <code>ForeignKey</code> field, it requires you to pass the name of the model you want to connect to.</p>

<p>Here is the code to add a many-to-many relationship between <code>Snippet</code> and <code>Tag</code> models.</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="k">class</span> <span class="nc">Snippet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">original_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">highlighted_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">expiration</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Pref</span><span class="o">.</span><span class="n">expiration_choices</span><span class="p">)</span>
    <span class="n">exposure</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Pref</span><span class="o">.</span><span class="n">exposure_choices</span><span class="p">)</span>
    <span class="n">hits</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">()</span>
    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">language</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Language</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
<span class="hll">    <span class="n">tags</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">)</span>
</span>

<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Notice that, in line 15, I am passing the name of the model as a string instead of the class object, this is because the definition of the <code>Tag</code> model comes below the <code>Snippet</code> model. You can do the same thing with the <code>ForeignKey</code> field. At this point, <code>models.py</code> file should look like this:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">Preference</span> <span class="k">as</span> <span class="n">Pref</span>

<span class="c1"># Create your models here.</span>


<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">(</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">active</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">last_logged_in</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Language</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">lang_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">mime</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s1">&#39;MIME to use when sending snippet as file.&#39;</span><span class="p">)</span>
    <span class="n">file_extension</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Snippet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">original_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">highlighted_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">expiration</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Pref</span><span class="o">.</span><span class="n">expiration_choices</span><span class="p">)</span>
    <span class="n">exposure</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Pref</span><span class="o">.</span><span class="n">exposure_choices</span><span class="p">)</span>
    <span class="n">hits</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">()</span>
    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">language</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Language</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><span id="adding-url-patterns-and-views" class="anchor-target"></span><h2 class="heading">Adding URL patterns and Views <a class="header-link" href="#adding-url-patterns-and-views">#</a></h2>

<p>Currently, our app djangobin&#39;s <code>urls.py</code> file contains 6 URL patterns:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="c1"># app_name = &#39;djangobin&#39;</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^time/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">today_is</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^user/(?P&lt;username&gt;[A-Za-z0-9]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;profile&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^books/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">book_category</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;book_category&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^books/(?P&lt;category&gt;[\w-]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">book_category</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;book_category&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^extra/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">extra_args</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;extra_args&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>We are done working with the first and last three URL patterns and their corresponding view function. So you can safely delete them.</p>

<p>Next, we will add 4 new URL patterns. The following table describes the role of each URL pattern:</p>
<div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>URL Path</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>/trending/</code></td>
<td>show a list of trending (most viewed) snippets.</td>
</tr>
<tr>
<td><code>/trending/&lt;language&gt;</code></td>
<td>show a list of trending snippets from a particular language</td>
</tr>
<tr>
<td><code>/&lt;snippet_id&gt;/</code></td>
<td>show the highlighted snippet</td>
</tr>
<tr>
<td><code>/tag/&lt;tag&gt;/</code></td>
<td>show a list of snippets tagged with a certain tag.</td>
</tr>
</tbody>
</table></div>
<p>Open <code>urls.py</code> add update it to include the new URL patterns as follows:</p>

<p><strong>djangobin/django_project/djangobin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>    
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^user/(?P&lt;username&gt;[A-Za-z0-9]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;profile&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="s1">&#39;^trending/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">trending_snippets</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;trending_snippets&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="s1">&#39;^trending/(?P&lt;language_slug&gt;[\w]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">trending_snippets</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;trending_snippets&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="s1">&#39;^(?P&lt;snippet_slug&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">snippet_detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;snippet_detail&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="s1">&#39;^tag/(?P&lt;tag&gt;[\w-]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">tag_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tag_list&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Now add 3 new view function after <code>index()</code> view in <code>views.py</code> as follows:</p>

<p><strong>djangobin/django_project/djangobin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">render</span>


<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;&lt;p&gt;Hello Django&lt;/p&gt;&#34;</span><span class="p">)</span>


<span class="hll"><span class="k">def</span> <span class="nf">snippet_detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">snippet_slug</span><span class="p">):</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s1">&#39;viewing snippet #{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">snippet_slug</span><span class="p">))</span>
</span><span class="hll">
</span><span class="hll">
</span><span class="hll"><span class="k">def</span> <span class="nf">trending_snippets</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">language_slug</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;trending {} snippets&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">language_slug</span> <span class="k">if</span> <span class="n">language_slug</span> <span class="k">else</span> <span class="s2">&#34;&#34;</span><span class="p">))</span>
</span><span class="hll">
</span><span class="hll">
</span><span class="hll"><span class="k">def</span> <span class="nf">tag_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s1">&#39;viewing tag #{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span>
</span>

<span class="k">def</span> <span class="nf">profile</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;&lt;p&gt;Profile page of #{}&lt;/p&gt;&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Right now, view functions are just stub displaying simple output. We will update then as we move along.</p>
<span id="adding-model-methods" class="anchor-target"></span><h2 class="heading">Adding Model Methods <a class="header-link" href="#adding-model-methods">#</a></h2>

<p>Django models are just ordinary Python classes which inherit from <code>models.Model</code> class. That means we can define normal Python methods in our model class too.</p>

<p>To implement syntax highlighting using Pygments, we have to add some helper methods to the <code>Language</code> and <code>Snippet</code> models. But before we do that, let&#39;s first install Pygments by typing:</p>
<div class="codeblock language-bash"><div class="highlight"><pre><span></span>$ pip install pygments
</pre></div>
</div>
<p>The first step in highlighting a code snippet is to determine the name of the lexer. The lexer is a program which analyzes the syntax of the programming language. Pygments ships with lexers for a large set of languages, each one is given a unique name.  We can get the lexer using the <code>get_lexer_by_name()</code> function of the <code>pygments.lexers</code> package.</p>

<p>Let&#39;s add a method to the <code>Language</code> model to return the appropriate lexer for a given language:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="hll"><span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">lexers</span><span class="p">,</span> <span class="n">highlight</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">pygments.formatters</span> <span class="kn">import</span> <span class="n">HtmlFormatter</span><span class="p">,</span> <span class="n">ClassNotFound</span>
</span><span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">Preference</span> <span class="k">as</span> <span class="n">Pref</span>

<span class="c1">#...</span>

<span class="k">class</span> <span class="nc">Language</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="hll">    <span class="k">def</span> <span class="nf">get_lexer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">lexers</span><span class="o">.</span><span class="n">get_lexer_by_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang_code</span><span class="p">)</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Given a <code>Language</code> instance <code>l1</code>, we can now get the lexer by calling <code>get_lexer()</code> method as follows:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="n">l1</span><span class="o">.</span><span class="n">get_lexer</span><span class="p">()</span>
</pre></div>
</div>
<p>The next step is to add a method to the <code>Snippet</code> model which knows how to highlight the snippet. Open <code>models.py</code> file and add <code>highlight()</code> method to the <code>Snippet</code> model as follows:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="k">class</span> <span class="nc">Snippet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">)</span>

<span class="hll">    <span class="k">def</span> <span class="nf">highlight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">(</span><span class="n">linenos</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">highlight</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="o">.</span><span class="n">get_lexer</span><span class="p">(),</span> <span class="n">formatter</span><span class="p">)</span>
</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>To highlight the code the Pygments provides <code>highlight()</code> function. It takes three arguments, the code to highlight, lexer and the formatter. And returns the highlighted code. You can learn more about <code>highlight()</code> function as it&#39;s parameters <a href="../../pygments-tutorial/index.html">here</a>.</p>

<p>Now, our models have the ability to highlight snippets but we won&#39;t be testing it until <a href="../django-admin-app/index.html">chapter 16</a>.</p>

<p>To make working with model instances easier, Django advocates implementing the following two methods in the model class.</p>

<ol>
<li><code>__str__()</code> method</li>
<li><code>get_absolute_url()</code> method</li>
</ol>

<p>Let&#39;s start with the <code>__str__()</code> method.</p>
<span id="str-method" class="anchor-target"></span><h3 class="heading"><strong>str</strong>() method <a class="header-link" href="#str-method">#</a></h3>

<p>The <code>__str__()</code> method tells Python how to display an object in the human-readable form. If you don&#39;t define <code>__str__()</code> method then its default implementation will print the object like this:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Snippet</span><span class="p">:</span> <span class="n">Snippet</span> <span class="nb">object</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This representation isn&#39;t very helpful because apart from the Model name it doesn&#39;t give any other information about the object.</p>

<p>Similarly, a list of objects will look like this:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">&lt;</span><span class="n">Snippet</span><span class="p">:</span> <span class="n">Snippet</span> <span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Snippet</span><span class="p">:</span> <span class="n">Snippet</span> <span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Snippet</span><span class="p">:</span> <span class="n">Snippet</span> <span class="nb">object</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>As you can see, objects in the list are practically indistinguishable from each other. </p>

<p>We can solve these issues by simply defining a <code>__str__()</code> method in the model class. Open <code>models.py</code> file and define <code>__str__()</code> in every model class as follows:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="n">last_logged_in</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="hll">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&#34; : &#34;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">email</span>
</span>

<span class="k">class</span> <span class="nc">Language</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_lexer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">lexers</span><span class="o">.</span><span class="n">get_lexer_by_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang_code</span><span class="p">)</span>

<span class="hll">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span>

<span class="k">class</span> <span class="nc">Snippet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="n">created_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">highlight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">(</span><span class="n">linenos</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">highlight</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="o">.</span><span class="n">get_lexer</span><span class="p">(),</span> <span class="n">formatter</span><span class="p">)</span>

<span class="hll">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="k">else</span> <span class="s2">&#34;Untitled&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34; - &#34;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="o">.</span><span class="n">name</span>
</span>

<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>    
    <span class="c1">#...</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="hll">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span></pre></div>
</td></tr></tbody></table></div><span id="get_absolute_url-method" class="anchor-target"></span><h3 class="heading">get_absolute_url() method <a class="header-link" href="#get_absolute_url-method">#</a></h3>

<p>The <code>get_absolute_url()</code> method returns the canonical URL of an object. Eventually, most of our model instances will be displayed in its unique URL. The job of the <code>get_absolute_url()</code> method is to return this unique URL. </p>

<p>What makes <code>get_absolute_url()</code> special is that unlike the <code>{% url %}</code> tag and <code>reverse()</code> function, we can use <code>get_absolute_url()</code> in our Python code as well as in templates. </p>

<p>In addition to that, Django admin site (which we will discuss in lesson <a href="../django-admin-app/index.html">Django Admin app</a>) uses <code>get_absolute_url()</code> method to create a &#34;VIEW ON SITE&#34; link in the object-editing page that points to the public view of the object.</p>

<p>Above all, the most important benefit we get from defining <code>get_absolute_url()</code> method is that, if we need to change the structure of the URL, then we just need to modify <code>get_absolute_url()</code> method and all the templates and Python modules will pick up the changes automatically. It also means that you don&#39;t have to remember whether Snippet or Tag object takes id or any other argument.</p>

<p>Let&#39;s define <code>get_absolute_url()</code> in all our model classes. Open <code>models.py</code> and modify it as follows:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">reverse</span>
</span><span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">Preference</span> <span class="k">as</span> <span class="n">Pref</span>

<span class="c1">#...</span>

<span class="k">class</span> <span class="nc">Language</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="hll">    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;djangobin:trending_snippets&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slug</span><span class="p">])</span>
</span>

<span class="k">class</span> <span class="nc">Snippet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>    
    <span class="c1">#...    </span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="k">else</span> <span class="s2">&#34;Untitled&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34; - &#34;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="o">.</span><span class="n">name</span>

<span class="hll">    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;djangobin:snippet_detail&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slug</span><span class="p">])</span>
</span>

<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="hll">    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;djangobin:tag_list&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slug</span><span class="p">])</span>
</span></pre></div>
</td></tr></tbody></table></div><span id="customizing-model-behavior-using-inner-meta-class" class="anchor-target"></span><h2 class="heading">Customizing Model Behavior using inner Meta class <a class="header-link" href="#customizing-model-behavior-using-inner-meta-class">#</a></h2>

<p>The <code>Meta</code> class deals with the options that are not specific to any fields. For example, the name of the database table, default sort order when querying the database, adding composite indexes and so on. Adding <code>Meta</code> class is completely optional. We define <code>Meta</code> class as a nested class in the model class.</p>

<p>Here are some common options that we can specify in the <code>Meta</code> class.</p>
<span id="ordering" class="anchor-target"></span><h3 class="heading">ordering <a class="header-link" href="#ordering">#</a></h3>

<p>This option specifies the default ordering scheme for the object. If specified, this ordering scheme will be used every time we access data using Django ORM (We will learn what is Django ORM in the upcoming lessons.). It accepts a list or tuple of field names. For example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Post</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>    

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-pub_date&#39;</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>This example sets the default ordering of <code>Post</code> objects to <code>pub_date</code> in descending order. If we now list <code>Post</code> objects, Django will automatically return them in reverse chronological order (latest first).</p>
<span id="unique_together" class="anchor-target"></span><h3 class="heading">unique_together <a class="header-link" href="#unique_together">#</a></h3>

<p>This option specifies the unique constraint on two or more field names when taken together. It accepts two or more field names as a tuple of tuple. For example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Author</span><span class="p">:</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">()</span>    

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">),)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>This example adds <code>UNIQUE</code> constraint spanning the two columns, <code>name</code> and <code>email</code>. In other words, <code>name</code> and <code>email</code> values, when taken together must be unique</p>
<span id="indexes" class="anchor-target"></span><h3 class="heading">indexes <a class="header-link" href="#indexes">#</a></h3>

<p>This option is used to create indexes on one or more fields. It accepts a list of <code>models.Index</code> instances. The <code>models.Index</code> takes two arguments: <code>fields</code> and an optional <code>name</code>. The <code>fields</code> refers to a list of model fields where you want to add the index and <code>name</code> is the name of the index. If <code>name</code> isn&#39;t specified Django will auto-generate a name. Specifying more than one fields in the <code>fields</code> list, will create a composite index ( i.e. an index on more than one column). Here is an example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Employee</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>   

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>        
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span> <span class="s1">&#39;first_name&#39;</span><span class="p">]),</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;address&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;address_idx&#39;</span><span class="p">),</span>
        <span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>This example creates two indexes: a composite index on <code>last_name</code> and <code>first_name</code> fields and a regular index on the <code>address</code> field.</p>
<span id="verbose_name" class="anchor-target"></span><h3 class="heading">verbose_name <a class="header-link" href="#verbose_name">#</a></h3>

<p>This option specifies the singular name of the model. It accepts a string. For example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">JusticeLeague</span>
    <span class="c1">#...</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>        
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s1">&#39;JusticeLeague&#39;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The value of <code>verbose_name</code> option is used in a number of places in Django admin site, for example, object-editing page, object list page and so on. if you don&#39;t define this option then Django will generate a munged version of the class name i.e <code>JusticeLeague</code> will become <code>justice league</code>.</p>
<span id="verbose_name_plural" class="anchor-target"></span><h3 class="heading">verbose_name_plural <a class="header-link" href="#verbose_name_plural">#</a></h3>

<p>This option specify the pluralized name of the model. It accepts a string. For example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Category</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
   <span class="c1">#...</span>
   <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
       <span class="n">verbose_plural_name</span> <span class="o">=</span> <span class="s2">&#34;Category&#34;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Just like <code>verbose_name</code> option, the value of <code>verbose_name_plural</code> is used in many pages of the Django admin site. If you don&#39;t define this option Django will use verbose_name + <code>s</code>. </p>
<span id="db_table" class="anchor-target"></span><h3 class="heading">db_table <a class="header-link" href="#db_table">#</a></h3>

<p>By default, Django automatically creates table names for us. For example, If we have an app called forum and a model class named <code>Bounty</code>, then the table name would be <code>forum_bounty</code>. If for some reason you want to override this naming convention use <code>db_table</code> option. It accepts a string as an argument. For example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Bounty</span>
    <span class="c1">#...</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;bounties&#34;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>For a full list of <code>Meta</code> options visit the Django documentation.</p>

<p>Let&#39;s now update our <code>models.py</code> to add some Meta options to <code>Language</code>, <code>Snippet</code> and <code>Tag</code> models as follows:</p>

<p><strong>djangobin/django_project/djangobin/models.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="k">class</span> <span class="nc">Language</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="hll">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class="hll">        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</span><span class="c1">#...</span>


<span class="k">class</span> <span class="nc">Snippet</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">)</span>

<span class="hll">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class="hll">        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-created_on&#39;</span><span class="p">]</span>
</span><span class="c1">#...</span>


<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="hll">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span><span class="hll">        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>        
</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>We will continue adding missing elements to <code>models.py</code> file it but for now, it&#39;s enough.</p>

<p>We have now created some models. So what&#39;s next?</p>

<p>The next step is to create database tables from models. To do so, we use something called migration.</p>



    



        <nav aria-label="pagination">
            <ul class="pager">
                
                    <li class="previous">
                        <a href="../template-inheritance-in-django/index.html" title="Template Inheritance in Django">
                            <span class="fa fa-arrow-left" aria-hidden="true"></span>
                            Template Inheritance in Django
                        </a>
                    </li>
                

                
                    <li class="next">
                        <a href="../migrations-in-django/index.html" title="Migrations in Django">
                            Migrations in Django
                            <span class="fa fa-arrow-right" aria-hidden="true"></span>
                        </a>
                    </li>
                
            </ul>
        </nav>







    <hr/>
    <div id="disqus_thread">
    <p style="margin-bottom: 10px" class="text-center">
        <a href="#" class=" btn btn-primary comments-holder" onclick="loadDisqus();return false;">
            <i class="fa fa-comments" aria-hidden="true"></i> Load Comments
        </a>
    </p>
    </div>
    <hr/>
    <script>
        var is_disqus_loaded = false;
        function loadDisqus() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '../../../overiqcom.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        };
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>







            </div>
        </div>


        <div class="sidebar">
        
            <div class="col-lg-4 col-md-4 col-sm-12">
                

    
        
    <div class="well">
        <h4>Django 1.11 Tutorial</h4>
        <ul>
            
                <li><a href="../intro-to-django/index.html">Intro to Django</a></li>
            
                <li><a href="../installing-django/index.html">Installing Django</a></li>
            
                <li><a href="../creating-django-project/index.html">Creating Django Project</a></li>
            
                <li><a href="../mvc-pattern-and-django/index.html">MVC Pattern and Django</a></li>
            
                <li><a href="../views-and-urlconfs-in-django/index.html">Views and URLconfs in Django</a></li>
            
                <li><a href="../creating-urls-and-custom-response/index.html">Creating URLs and Custom Response</a></li>
            
                <li><a href="../basics-of-django-templates/index.html">Basics of Django Templates</a></li>
            
                <li><a href="../template-tags-in-django/index.html">Template tags in Django</a></li>
            
                <li><a href="../template-filters-in-django/index.html">Template filters in Django</a></li>
            
                <li><a href="../loading-templates-in-django/index.html">Loading Templates in Django</a></li>
            
                <li><a href="../template-inheritance-in-django/index.html">Template Inheritance in Django</a></li>
            
                <li><a href="index.html">Basics of Models in Django</a></li>
            
                <li><a href="../migrations-in-django/index.html">Migrations in Django</a></li>
            
                <li><a href="../django-orm-basics-part-1/index.html">Django ORM Basics Part 1</a></li>
            
                <li><a href="../django-orm-basics-part-2/index.html">Django ORM Basics Part 2</a></li>
            
                <li><a href="../django-admin-app/index.html">Django Admin App</a></li>
            
                <li><a href="../django-authentication-framework-basics/index.html">Django Authentication Framework Basics</a></li>
            
                <li><a href="../data-migrations-in-django/index.html">Data migrations in Django</a></li>
            
                <li><a href="../django-form-basics/index.html">Django Form Basics</a></li>
            
                <li><a href="../displaying-forms-in-django/index.html">Displaying Forms in Django</a></li>
            
                <li><a href="../django-rendering-form-fields-manually/index.html">Django Rendering Form Fields Manually</a></li>
            
                <li><a href="../handling-static-content-in-django/index.html">Handling Static Content in Django</a></li>
            
                <li><a href="../handling-media-files-in-django/index.html">Handling Media Files in Django</a></li>
            
                <li><a href="../building-djangobin-the-first-steps/index.html">Building Djangobin - The First Steps</a></li>
            
                <li><a href="../creating-trending-snippet-page/index.html">Creating Trending Snippet Page</a></li>
            
                <li><a href="../building-contact-us-form/index.html">Building Contact Us Form</a></li>
            
                <li><a href="../django-logging-users-in-and-out/index.html">Django Logging Users In and Out</a></li>
            
                <li><a href="../user-registration-in-django/index.html">User Registration in Django</a></li>
            
                <li><a href="../building-profile-pages-for-djangobin/index.html">Building profile pages for Djangobin</a></li>
            
                <li><a href="../searching-snippets/index.html">Searching Snippets</a></li>
            
                <li><a href="../asynchronous-tasks-with-celery/index.html">Asynchronous Tasks with Celery</a></li>
            
                <li><a href="../flatpages-in-django/index.html">Flatpages in Django</a></li>
            
                <li><a href="../creating-sitemaps-in-django/index.html">Creating Sitemaps in Django</a></li>
            
                <li><a href="../settings-for-multiple-environments-in-django/index.html">Settings for Multiple Environments in Django</a></li>
            
                <li><a href="../deploying-django-project-to-digitalocean/index.html">Deploying Django Project to DigitalOcean</a></li>
            
        </ul>
    </div>

    

    
        

<div class="well">
    <h4>Recent Posts</h4>
    <ul>
        
            <li><a href="../../machine-learning-experts-you-should-be-following-online/index.html">Machine Learning Experts You Should Be Following Online</a></li>
        
            <li><a href="../../4-ways-to-prepare-for-the-ap-computer-science-a-exam/index.html">4 Ways to Prepare for the AP Computer Science A Exam</a></li>
        
            <li><a href="../../finance-assignment-online-help-for-the-busy-and-tired-students-get-help-from-experts/index.html">Finance Assignment Online Help for the Busy and Tired Students: Get Help from Experts</a></li>
        
            <li><a href="../../top-9-machine-learning-algorithms-for-data-scientists/index.html">Top 9 Machine Learning Algorithms for Data Scientists</a></li>
        
            <li><a href="../../data-science-learning-path-or-steps-to-become-a-data-scientist-final/index.html">Data Science Learning Path or Steps to become a data scientist Final</a></li>
        
            <li><a href="../../enable-edit-button-in-shutter-in-linux-mint-19-and-ubuntu-18-04/index.html">Enable Edit Button in Shutter In Linux Mint 19 and Ubuntu 18.04</a></li>
        
            <li><a href="../../python-3-time-module/index.html">Python 3 time module</a></li>
        
            <li><a href="../../pygments-tutorial/index.html">Pygments Tutorial</a></li>
        
            <li><a href="../../how-to-use-virtualenv/index.html">How to use Virtualenv?</a></li>
        
            <li><a href="../../installing-mysql-windows-linux-and-mac/index.html">Installing MySQL (Windows, Linux and Mac)</a></li>
        
            <li><a href="../../what-is-if-__name__-__main__-in-python/index.html">What is if __name__ == &#39;__main__&#39;  in Python ?</a></li>
        
            <li><a href="../../installing-goaccess-a-real-time-web-log-analyzer/index.html">Installing GoAccess (A Real-time web log analyzer)</a></li>
        
            <li><a href="../../installing-isso/index.html">Installing Isso</a></li>
        
    </ul>
</div>

<!-- Blog Search Well -->





















    



            </div>
        </div>
    </div>



    

</div>

<!-- Footer -->
<footer class="overiq-footer">
    <div class="container">
        <div class="row">

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../terms-of-use/index.html">Terms</a></li>
                    <li><a href="../../privacy-policy/index.html">Privacy Policy</a></li>
                    <li><a href="../../sitemap.xml/index.html">Sitemap</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../contact/index.html">Contact</a></li>
                    <li><a href="../../blog/index.html">Blog</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="https://www.facebook.com/OverIQ/">Facebook</a></li>
                    <li><a href="https://twitter.com/infoOverIQ">Twitter</a></li>
                    <li><a href="https://github.com/overiq">Github</a></li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../c-programming-101/index.html">C Tutorial</a></li>
                    <li><a href="../../python-101/index.html">Python Tutorial</a></li>
                    <li><a href="../index.html">Django Tutorial</a></li>
                    <li><a href="../../flask-101/index.html">Flask Tutorial</a></li>
                    <li><a href="../../mysql-connector-python-101/index.html">MySQL Connector/Python Tutorial</a></li>
                    <li><a href="../../sqlalchemy-101/index.html">SQLAlchemy Tutorial</a></li>
                    <li><a href="../../c-examples/index.html">C Programming Examples</a></li>
                </ul>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <div class="row text-center">
            <p>© 2025 OverIQ.com</p>
            <small><a href="#">Back to top</a></small>
        </div>

        <!-- /.row -->
    </div>
</footer>



<script type="text/javascript" src="../../static/CACHE/js/output.2e0ff002c1a4.js"></script>




<script async="" src="../../../cdn.jsdelivr.net/npm/cookieconsent%403/build/cookieconsent.min.js" data-cfasync="false"></script>

<script>

    
    window.addEventListener('load', function () {
        window.cookieconsent.initialise({
            "palette": {
                "popup": {
                    "background": "#5ca9e0",
                    "text": "#ffffff"
                },
                "button": {
                    "background": "#fff",
                    "text": "#237afc"
                }
            },
            "theme": "classic",
            "position": "top",
            "static": true,
            "content": {
                "href": "https://overiq.com/privacy-policy/"
            }
        });
    });


</script>

<script src="../../../polyfill.io/v3/polyfill.min1162.js?features=es6"></script>
<script id="MathJax-script" defer="" src="../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml.js"></script>

<script async="" type="text/javascript" src="../../../cdn.carbonads.com/carbonfbdb.js?serve=CE7DC53E&amp;placement=overiqcom" id="_carbonads_js"></script>





<script data-cfasync="false">function _emitEzConsentEvent(){var customEvent=new CustomEvent("ezConsentEvent",{detail:{ezTcfConsent:window.ezTcfConsent},bubbles:true,cancelable:true,});document.dispatchEvent(customEvent);}
(function(window,document){function _setAllEzConsentTrue(){window.ezTcfConsent.loaded=true;window.ezTcfConsent.store_info=true;window.ezTcfConsent.develop_and_improve_services=true;window.ezTcfConsent.measure_ad_performance=true;window.ezTcfConsent.measure_content_performance=true;window.ezTcfConsent.select_basic_ads=true;window.ezTcfConsent.create_ad_profile=true;window.ezTcfConsent.select_personalized_ads=true;window.ezTcfConsent.create_content_profile=true;window.ezTcfConsent.select_personalized_content=true;window.ezTcfConsent.understand_audiences=true;window.ezTcfConsent.use_limited_data_to_select_content=true;window.ezTcfConsent.select_personalized_content=true;}
function _clearEzConsentCookie(){document.cookie="ezCMPCookieConsent=tcf2;Domain=.overiq.com;Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT";}
_clearEzConsentCookie();if(typeof window.__tcfapi!=="undefined"){window.ezgconsent=false;var amazonHasRun=false;function _ezAllowed(tcdata,purpose){return(tcdata.purpose.consents[purpose]||tcdata.purpose.legitimateInterests[purpose]);}
function _handleConsentDecision(tcdata){window.ezTcfConsent.loaded=true;if(!tcdata.vendor.consents["347"]&&!tcdata.vendor.legitimateInterests["347"]){window._emitEzConsentEvent();return;}
window.ezTcfConsent.store_info=_ezAllowed(tcdata,"1");window.ezTcfConsent.develop_and_improve_services=_ezAllowed(tcdata,"10");window.ezTcfConsent.measure_content_performance=_ezAllowed(tcdata,"8");window.ezTcfConsent.select_basic_ads=_ezAllowed(tcdata,"2");window.ezTcfConsent.create_ad_profile=_ezAllowed(tcdata,"3");window.ezTcfConsent.select_personalized_ads=_ezAllowed(tcdata,"4");window.ezTcfConsent.create_content_profile=_ezAllowed(tcdata,"5");window.ezTcfConsent.measure_ad_performance=_ezAllowed(tcdata,"7");window.ezTcfConsent.use_limited_data_to_select_content=_ezAllowed(tcdata,"11");window.ezTcfConsent.select_personalized_content=_ezAllowed(tcdata,"6");window.ezTcfConsent.understand_audiences=_ezAllowed(tcdata,"9");window._emitEzConsentEvent();}
function _handleGoogleConsentV2(tcdata){if(!tcdata||!tcdata.purpose||!tcdata.purpose.consents){return;}
var googConsentV2={};if(tcdata.purpose.consents[1]){googConsentV2.ad_storage='granted';googConsentV2.analytics_storage='granted';}
if(tcdata.purpose.consents[3]&&tcdata.purpose.consents[4]){googConsentV2.ad_personalization='granted';}
if(tcdata.purpose.consents[1]&&tcdata.purpose.consents[7]){googConsentV2.ad_user_data='granted';}
if(googConsentV2.analytics_storage=='denied'){gtag('set','url_passthrough',true);}
gtag('consent','update',googConsentV2);}
__tcfapi("addEventListener",2,function(tcdata,success){if(!success||!tcdata){window._emitEzConsentEvent();return;}
if(!tcdata.gdprApplies){_setAllEzConsentTrue();window._emitEzConsentEvent();return;}
if(tcdata.eventStatus==="useractioncomplete"||tcdata.eventStatus==="tcloaded"){if(typeof gtag!='undefined'){_handleGoogleConsentV2(tcdata);}
_handleConsentDecision(tcdata);if(tcdata.purpose.consents["1"]===true&&tcdata.vendor.consents["755"]!==false){window.ezgconsent=true;(adsbygoogle=window.adsbygoogle||[]).pauseAdRequests=0;}
if(window.__ezconsent){__ezconsent.setEzoicConsentSettings(ezConsentCategories);}
__tcfapi("removeEventListener",2,function(success){return null;},tcdata.listenerId);if(!(tcdata.purpose.consents["1"]===true&&_ezAllowed(tcdata,"2")&&_ezAllowed(tcdata,"3")&&_ezAllowed(tcdata,"4"))){if(typeof __ez=="object"&&typeof __ez.bit=="object"&&typeof window["_ezaq"]=="object"&&typeof window["_ezaq"]["page_view_id"]=="string"){__ez.bit.Add(window["_ezaq"]["page_view_id"],[new __ezDotData("non_personalized_ads",true),]);}}}});}else{_setAllEzConsentTrue();window._emitEzConsentEvent();}})(window,document);</script></body>
<!-- Mirrored from overiq.com/django-1-11/basics-of-models-in-django/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:12:46 GMT -->
</html>