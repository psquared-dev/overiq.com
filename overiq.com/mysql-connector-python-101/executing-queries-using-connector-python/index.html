<!DOCTYPE html><html lang="en">
<!-- Mirrored from overiq.com/mysql-connector-python-101/executing-queries-using-connector-python/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:16:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"/>
<script>var __ezHttpConsent={setByCat:function(src,tagType,attributes,category,force){var setScript=function(){if(force||window.ezTcfConsent[category]){var scriptElement=document.createElement(tagType);scriptElement.src=src;attributes.forEach(function(attr){for(var key in attr){if(attr.hasOwnProperty(key)){scriptElement.setAttribute(key,attr[key]);}}});var firstScript=document.getElementsByTagName(tagType)[0];firstScript.parentNode.insertBefore(scriptElement,firstScript);}};if(force||(window.ezTcfConsent&&window.ezTcfConsent.loaded)){setScript();}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){setScript();}else{console.error("cannot get ez consent data");force=true;setScript();}});}else{force=true;setScript();console.error("getEzConsentData is not a function");}},};</script>
<script>var ezTcfConsent=window.ezTcfConsent?window.ezTcfConsent:{loaded:false,store_info:false,develop_and_improve_services:false,measure_ad_performance:false,measure_content_performance:false,select_basic_ads:false,create_ad_profile:false,select_personalized_ads:false,create_content_profile:false,select_personalized_content:false,understand_audiences:false,use_limited_data_to_select_content:false,};function getEzConsentData(){return new Promise(function(resolve){document.addEventListener("ezConsentEvent",function(event){var ezTcfConsent=event.detail.ezTcfConsent;resolve(ezTcfConsent);});});}</script>
<script>if(typeof _setEzCookies!=='function'){function _setEzCookies(ezConsentData){var cookies=window.ezCookieQueue;for(var i=0;i<cookies.length;i++){var cookie=cookies[i];if(ezConsentData&&ezConsentData.loaded&&ezConsentData[cookie.tcfCategory]){document.cookie=cookie.name+"="+cookie.value;}}}}
window.ezCookieQueue=window.ezCookieQueue||[];if(typeof addEzCookies!=='function'){function addEzCookies(arr){window.ezCookieQueue=[...window.ezCookieQueue,...arr];}}
addEzCookies([]);if(window.ezTcfConsent&&window.ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else{console.error("cannot get ez consent data");_setEzCookies(window.ezTcfConsent);}});}else{console.error("getEzConsentData is not a function");_setEzCookies(window.ezTcfConsent);}</script>
<script data-ezscrex='false' data-cfasync='false' data-pagespeed-no-defer>var __ez=__ez||{};__ez.stms=Date.now();__ez.evt={};__ez.script={};__ez.ck=__ez.ck||{};__ez.template={};__ez.template.isOrig=true;window.__ezScriptHost="//www.ezojs.com";__ez.queue=__ez.queue||function(){var e=0,i=0,t=[],n=!1,o=[],r=[],s=!0,a=function(e,i,n,o,r,s,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,d=this;this.name=e,this.funcName=i,this.parameters=null===n?null:w(n)?n:[n],this.isBlock=o,this.blockedBy=r,this.deleteWhenComplete=s,this.isError=!1,this.isComplete=!1,this.isInitialized=!1,this.proceedIfError=a,this.fWindow=l,this.isTimeDelay=!1,this.process=function(){f("... func = "+e),d.isInitialized=!0,d.isComplete=!0,f("... func.apply: "+e);var i=d.funcName.split("."),n=null,o=this.fWindow||window;i.length>3||(n=3===i.length?o[i[0]][i[1]][i[2]]:2===i.length?o[i[0]][i[1]]:o[d.funcName]),null!=n&&n.apply(null,this.parameters),!0===d.deleteWhenComplete&&delete t[e],!0===d.isBlock&&(f("----- F'D: "+d.name),m())}},l=function(e,i,t,n,o,r,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,l=this;this.name=e,this.path=i,this.async=o,this.defer=r,this.isBlock=t,this.blockedBy=n,this.isInitialized=!1,this.isError=!1,this.isComplete=!1,this.proceedIfError=s,this.fWindow=a,this.isTimeDelay=!1,this.isPath=function(e){return"/"===e[0]&&"/"!==e[1]},this.getSrc=function(e){return void 0!==window.__ezScriptHost&&this.isPath(e)&&"banger.js"!==this.name?window.__ezScriptHost+e:e},this.process=function(){l.isInitialized=!0,f("... file = "+e);var i=this.fWindow?this.fWindow.document:document,t=i.createElement("script");t.src=this.getSrc(this.path),!0===o?t.async=!0:!0===r&&(t.defer=!0),t.onerror=function(){var e={url:window.location.href,name:l.name,path:l.path,user_agent:window.navigator.userAgent};"undefined"!=typeof _ezaq&&(e.pageview_id=_ezaq.page_view_id);var i=encodeURIComponent(JSON.stringify(e)),t=new XMLHttpRequest;t.open("GET/index.html","//g.ezoic.net/ezqlog?d="+i,!0),t.send(),f("----- ERR'D: "+l.name),l.isError=!0,!0===l.isBlock&&m()},t.onreadystatechange=t.onload=function(){var e=t.readyState;f("----- F'D: "+l.name),e&&!/loaded|complete/.test(e)||(l.isComplete=!0,!0===l.isBlock&&m())},i.getElementsByTagName("head")[0].appendChild(t)}},d=function(e,i){this.name=e,this.path="",this.async=!1,this.defer=!1,this.isBlock=!1,this.blockedBy=[],this.isInitialized=!0,this.isError=!1,this.isComplete=i,this.proceedIfError=!1,this.isTimeDelay=!1,this.process=function(){}};function c(e,i,n,s,a,d,c,u,f){var m=new l(e,i,n,s,a,d,c,f);!0===u?o[e]=m:r[e]=m,t[e]=m,h(m)}function h(e){!0!==u(e)&&0!=s&&e.process()}function u(e){if(!0===e.isTimeDelay&&!1===n)return f(e.name+" blocked = TIME DELAY!"),!0;if(w(e.blockedBy))for(var i=0;i<e.blockedBy.length;i++){var o=e.blockedBy[i];if(!1===t.hasOwnProperty(o))return f(e.name+" blocked = "+o),!0;if(!0===e.proceedIfError&&!0===t[o].isError)return!1;if(!1===t[o].isComplete)return f(e.name+" blocked = "+o),!0}return!1}function f(e){var i=window.location.href,t=new RegExp("[?&]ezq=([^&#]*)","i").exec(i);"1"===(t?t[1]:null)&&console.debug(e)}function m(){++e>200||(f("let's go"),p(o),p(r))}function p(e){for(var i in e)if(!1!==e.hasOwnProperty(i)){var t=e[i];!0===t.isComplete||u(t)||!0===t.isInitialized||!0===t.isError?!0===t.isError?f(t.name+": error"):!0===t.isComplete?f(t.name+": complete already"):!0===t.isInitialized&&f(t.name+": initialized already"):t.process()}}function w(e){return"[object Array]"==Object.prototype.toString.call(e)}return window.addEventListener("load",(function(){setTimeout((function(){n=!0,f("TDELAY -----"),m()}),5e3)}),!1),{addFile:c,addFileOnce:function(e,i,n,o,r,s,a,l,d){t[e]||c(e,i,n,o,r,s,a,l,d)},addDelayFile:function(e,i){var n=new l(e,i,!1,[],!1,!1,!0);n.isTimeDelay=!0,f(e+" ...  FILE! TDELAY"),r[e]=n,t[e]=n,h(n)},addFunc:function(e,n,s,l,d,c,u,f,m,p){!0===c&&(e=e+"_"+i++);var w=new a(e,n,s,l,d,u,f,p);!0===m?o[e]=w:r[e]=w,t[e]=w,h(w)},addDelayFunc:function(e,i,n){var o=new a(e,i,n,!1,[],!0,!0);o.isTimeDelay=!0,f(e+" ...  FUNCTION! TDELAY"),r[e]=o,t[e]=o,h(o)},items:t,processAll:m,setallowLoad:function(e){s=e},markLoaded:function(e){if(e&&0!==e.length){if(e in t){var i=t[e];!0===i.isComplete?f(i.name+" "+e+": error loaded duplicate"):(i.isComplete=!0,i.isInitialized=!0)}else t[e]=new d(e,!0);f("markLoaded dummyfile: "+t[e].name)}},logWhatsBlocked:function(){for(var e in t)!1!==t.hasOwnProperty(e)&&u(t[e])}}}();__ez.evt.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n()},__ez.evt.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]};__ez.script.add=function(e){var t=document.createElement("script");t.src=e,t.async=!0,t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)};__ez.dot={};__ez.queue.addFile('../../detroitchicago/boise.js', '../../detroitchicago/boisebb26.js?gcb=195-3&amp;cb=5', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/abilene.js', '../../parsonsmaize/abilenec0f9.js?gcb=195-3&amp;cb=7f81d60744', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/mulvane.js', '../../parsonsmaize/mulvane2d63.js?gcb=195-3&amp;cb=e75e48eec0', true, ['/parsonsmaize/abilene.js'], true, false, true, false);__ez.queue.addFile('../../detroitchicago/birmingham.js', '../../detroitchicago/birminghame7ec.js?gcb=195-3&amp;cb=539c47377c', true, ['/parsonsmaize/abilene.js'], true, false, true, false);</script>
<script data-ezscrex="false" type="text/javascript" data-cfasync="false">window._ezaq = Object.assign({"ad_cache_level":1,"adpicker_placement_cnt":0,"ai_placeholder_cache_level":1,"ai_placeholder_placement_cnt":-1,"domain_id":92771,"ezcache_level":1,"ezcache_skip_code":0,"has_bad_image":0,"has_bad_words":0,"is_sitespeed":0,"lt_cache_level":0,"response_size":132299,"response_size_orig":126531,"response_time_orig":520,"template_id":5,"url":"https://overiq.com/mysql-connector-python-101/executing-queries-using-connector-python/","word_count":0,"worst_bad_word_level":0}, typeof window._ezaq !== "undefined" ? window._ezaq : {});__ez.queue.markLoaded('ezaqBaseReady');</script>
<script type='text/javascript' data-ezscrex='false' data-cfasync='false'>
window.ezAnalyticsStatic = true;

function analyticsAddScript(script) {
	var ezDynamic = document.createElement('script');
	ezDynamic.type = 'text/javascript';
	ezDynamic.innerHTML = script;
	document.head.appendChild(ezDynamic);
}
function getCookiesWithPrefix() {
    var allCookies = document.cookie.split(';');
    var cookiesWithPrefix = {};

    for (var i = 0; i < allCookies.length; i++) {
        var cookie = allCookies[i].trim();

        for (var j = 0; j < arguments.length; j++) {
            var prefix = arguments[j];
            if (cookie.indexOf(prefix) === 0) {
                var cookieParts = cookie.split('=');
                var cookieName = cookieParts[0];
                var cookieValue = cookieParts.slice(1).join('=');
                cookiesWithPrefix[cookieName] = decodeURIComponent(cookieValue);
                break; // Once matched, no need to check other prefixes
            }
        }
    }

    return cookiesWithPrefix;
}
function productAnalytics() {
	var d = {"pr":[6],"omd5":"2d5dd52cae9fb929e55a779a033e2f61"};
	d.u = _ezaq.url;
	d.p = _ezaq.page_view_id;
	d.v = _ezaq.visit_uuid;
	d.ab = _ezaq.ab_test_id;
	d.e = JSON.stringify(_ezaq);
	d.ref = document.referrer;
	d.c = getCookiesWithPrefix('active_template', 'ez', 'lp_');
	if(typeof ez_utmParams !== 'undefined') {
		d.utm = ez_utmParams;
	}

	var dataText = JSON.stringify(d);
	var xhr = new XMLHttpRequest();
	xhr.open('POST/index.html','/ezais/analytics?cb=1', true);
	xhr.onload = function () {
		if (xhr.status!=200) {
            return;
		}

        if(document.readyState !== 'loading') {
            analyticsAddScript(xhr.response);
            return;
        }

        var eventFunc = function() {
            if(document.readyState === 'loading') {
                return;
            }
            document.removeEventListener('readystatechange', eventFunc, false);
            analyticsAddScript(xhr.response);
        };

        document.addEventListener('readystatechange', eventFunc, false);
	};
	xhr.setRequestHeader('Content-Type','text/plain');
	xhr.send(dataText);
}
__ez.queue.addFunc("productAnalytics", "productAnalytics", null, true, ['ezaqBaseReady'], false, false, false, true);
</script><base />
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Executing Queries using Connector/Python - MySQL Connector/Python Tutorial - OverIQ.com</title>

    
    



    <meta name="description" content="In the last lesson we have learned how to connect MySQL database using Connector/Python. In this lesson we will learn how to execute queries.
Creatin…"/>



    <link rel="canonical" href="index.html"/>


<meta property="og:locale" content="en_US"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Executing Queries using Connector/Python"/>

    <meta property="og:description" content="In the last lesson we have learned how to connect MySQL database using Connector/Python. In this lesson we will learn how to execute queries.
Creatin…"/>


<meta property="og:url" content="https://overiq.com/mysql-connector-python-101/executing-queries-using-connector-python/"/>
<meta property="og:site_name" content="OverIQ.com"/>


<meta property="article:publisher" content="https://www.facebook.com/OverIQ/"/>



<meta name="twitter:card" content="summary_large_image"/>

    <meta name="twitter:description" content="In the last lesson we have learned how to connect MySQL database using Connector/Python. In this lesson we will learn how to execute queries.
Creatin…"/>


<meta name="twitter:title" content="Executing Queries using Connector/Python"/>
<meta name="twitter:site" content="@infoOverIQ"/>

<meta name="twitter:creator" content="@infoOverIQ"/>




    
    
    


    
    
    


    <link rel="alternate" type="application/rss+xml" title="RSS" href="../../feed.xml/index.html"/>
    
    
    <link href="../../../fonts.googleapis.com/cssd2d5.css?family=Open+Sans" rel="stylesheet"/>
    <link rel="stylesheet" href="../../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="icon" href="../../static/wiki/favicon.png" sizes="32x32"/>

    <link rel="stylesheet" href="../../static/CACHE/css/output.db46da465a8b.css" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-125424793-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125424793-1');
    </script>


<script type='text/javascript'>
var ezoTemplate = 'orig_site';
var ezouid = '1';
var ezoFormfactor = '1';
</script><script data-ezscrex="false" type='text/javascript'>
var soc_app_id = '0';
var did = 92771;
var ezdomain = 'overiq.com';
var ezoicSearchable = 1;
</script></head>
<body>

<div class="overiq-header text-center">
    <div class="site-branding">
        <p class="main-title">
            <a href="../../index.html" rel="home">
                OverIQ.com
            </a>
        </p>
    </div>
</div>

<!-- Navigation -->
<nav class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">Home</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                

                <li>
                    <a href="../../blog/index.html">Blog</a>
                </li>
                <li>
                    <a href="../../contact/index.html">Contact</a>
                </li>
                <li>
                    <a href="../../about/index.html">About</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right visible-lg visible-md">
                <li>
                    <a href="../../feed.xml/index.html" title="RSS" target="_blank">
                        <i class="fa fa-rss fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/overiq/" target="_blank" title="Github">
                        <i class="fa fa-github fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://www.facebook.com/OverIQ/" target="_blank" title="Facebook">
                        <i class="fa fa-facebook fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://twitter.com/infoOverIQ" target="_blank" title="Twitter">
                        <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
                    </a>
                </li>

                

            </ul>

            <form action="https://overiq.com/search/" class="navbar-form navbar-left" role="search">

                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search" name="query" value=""/>
                </div>

                <button type="submit" class="btn btn-default">Submit</button>
            </form>

        </div>



        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">

    


    <div class="se-pre-con"></div>

    

    <div class="row">

        
        <div class="main">
            <div class="col-lg-8 col-md-8 col-sm-12">
                

    


    
        <ol class="breadcrumb">

    <li><a href="../../index.html">Home</a></li>

    
        
        <li><a href="../index.html">MySQL Connector/Python Tutorial</a></li>
        

        

        
    
        

        

        
            <li class="active">Executing Queries using Connector/Python</li>
        
    

</ol>
    


<h1>Executing Queries using Connector/Python</h1>




    <p><i class="fa fa-calendar" aria-hidden="true"></i>
        Last updated on July 27, 2020
    </p>


<hr/>



<p>In the <a href="../connecting-to-mysql-using-connector-python/index.html">last lesson</a> we have learned how to connect MySQL database using Connector/Python. In this lesson we will learn how to execute queries.</p>
<span id="creating-cursor-object" class="anchor-target"></span><h2 class="heading">Creating Cursor Object <a class="header-link" href="#creating-cursor-object">#</a></h2>

<p>The cursor object allows us to execute queries and retrieve rows. The cursor object is an instance of <code>MySQLCursor</code> class.</p>

<p>We can create the cursor object by either by using the <code>cursor()</code> method of the connection object (i.e <code>MySQLConnection</code>) or call the <code>MySQLCursor</code> class directly.</p>

<p>Just like the connection object, when you are finished working with the cursor you have to close it by calling the <code>close()</code> method.</p>

<p>Here is an example which illustrates two way different ways of creating cursors.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor1</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>  <span class="c1"># 1st method</span>
<span class="n">cursor2</span> <span class="o">=</span> <span class="n">MySQLCursor</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>   <span class="c1"># 2nd method</span>

<span class="k">print</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;cursor1: &#34;</span><span class="p">,</span> <span class="n">cursor1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&#34;cursor2: &#34;</span><span class="p">,</span> <span class="n">cursor2</span><span class="p">)</span>

<span class="n">cursor1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">cursor2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>&lt;mysql.connector.connection.MySQLConnection object at 0x7fcf99799da0&gt;
cursor1:  MySQLCursor: (Nothing executed yet)
cursor2:  MySQLCursor: (Nothing executed yet)
</pre></div>
</td></tr></tbody></table></div>
<p>We are now ready to execute queries to the database.</p>
<span id="a-simple-select-statement" class="anchor-target"></span><h2 class="heading">A simple SELECT statement <a class="header-link" href="#a-simple-select-statement">#</a></h2>

<p>There are several methods to execute the query. The most common being the <code>execute()</code> method.<br/>
Its syntax is as follows:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="sb">`execute(query, params=None)`</span>
</pre></div>
</div><div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>query</code></td>
<td>(required) SQL query or command to execute</td>
</tr>
<tr>
<td><code>params</code></td>
<td>(optional) Sequence or mapping used to provide values for the query parameters.</td>
</tr>
</tbody>
</table></div>
<p>Let&#39;s look at some examples now:</p>

<p>The following listing select first five rows from the city table.</p>

<p><strong>Example 1:</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;select * from city limit 5&#34;</span><span class="p">)</span>

<span class="c1"># iterate over result</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Kabul&#39;</span><span class="p">,</span> <span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Kabol&#39;</span><span class="p">,</span> <span class="mi">1780000</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Qandahar&#39;</span><span class="p">,</span> <span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Qandahar&#39;</span><span class="p">,</span> <span class="mi">237500</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Herat&#39;</span><span class="p">,</span> <span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Herat&#39;</span><span class="p">,</span> <span class="mi">186800</span><span class="p">)</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Mazar-e-Sharif&#39;</span><span class="p">,</span> <span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Balkh&#39;</span><span class="p">,</span> <span class="mi">127800</span><span class="p">)</span>
<span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Amsterdam&#39;</span><span class="p">,</span> <span class="s1">&#39;NLD&#39;</span><span class="p">,</span> <span class="s1">&#39;Noord-Holland&#39;</span><span class="p">,</span> <span class="mi">731200</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>After executing the query we use cursor object to iterate over the results. Notice that each row is returned in the form of tuple. To access the data in the individual column use the index. Also notice that the data in column is converted to its equivalent Python type.</p>

<p>Here is another example which access the data in the individual column and prints it&#39;s type.</p>

<p><strong>Example 2:</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>


<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;select * from city limit 5&#34;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">type</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">type</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>1 &lt;class &#39;int&#39;&gt; Kabul &lt;class &#39;str&#39;&gt;
2 &lt;class &#39;int&#39;&gt; Qandahar &lt;class &#39;str&#39;&gt;
3 &lt;class &#39;int&#39;&gt; Herat &lt;class &#39;str&#39;&gt;
4 &lt;class &#39;int&#39;&gt; Mazar-e-Sharif &lt;class &#39;str&#39;&gt;
5 &lt;class &#39;int&#39;&gt; Amsterdam &lt;class &#39;str&#39;&gt;
</pre></div>
</td></tr></tbody></table></div>
<p>Remember to read the rows before consuming the res</p>
<span id="fetch-methods" class="anchor-target"></span><h2 class="heading">Fetch Methods <a class="header-link" href="#fetch-methods">#</a></h2>

<p>Instead of iterating over the cursor object we can use the following methods to access one or more rows at time.</p>
<div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>fetchone()</code></td>
<td>Returns the next row from the result set as tuple. If there are no more rows to retrieve, <code>None</code> is returned.</td>
</tr>
<tr>
<td><code>fetchmany([size])</code></td>
<td>Returns the specified number of rows (as a list of tuple) from the result set. If there are no more rows to retrieve, <code>[]</code> is returned. The default size is 1.</td>
</tr>
<tr>
<td><code>fetchall()</code></td>
<td>Returns the all (or remaining) rows from the result set.</td>
</tr>
</tbody>
</table></div>
<p>Here are some examples:</p>

<p>Example 1: Retrieving rows using <code>fetchone()</code>.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;select * from city limit 5&#34;</span><span class="p">)</span>

<span class="c1"># first row</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>

<span class="c1"># loop over the remaining result set</span>
<span class="k">while</span> <span class="n">row</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>(1, &#39;Kabul&#39;, &#39;AFG&#39;, &#39;Kabol&#39;, 1780000)
(2, &#39;Qandahar&#39;, &#39;AFG&#39;, &#39;Qandahar&#39;, 237500)
(3, &#39;Herat&#39;, &#39;AFG&#39;, &#39;Herat&#39;, 186800)
(4, &#39;Mazar-e-Sharif&#39;, &#39;AFG&#39;, &#39;Balkh&#39;, 127800)
(5, &#39;Amsterdam&#39;, &#39;NLD&#39;, &#39;Noord-Holland&#39;, 731200)
</pre></div>
</td></tr></tbody></table></div>
<p>In line 5, we read the first row from the result set. Then, we use while loop to access the remaining rows. The loop stops when the <code>fetchone()</code> method returns <code>None</code>.</p>

<p><strong>Example 2:</strong> </p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;select * from city limit 5&#34;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">())</span>  <span class="c1"># fetch the first row</span>
<span class="k">print</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchmany</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>  <span class="c1"># fetch the next 2 rows</span>
<span class="k">print</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>  <span class="c1"># fetch all the remaining rows</span>
<span class="k">print</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchmany</span><span class="p">())</span>  <span class="c1"># the result set is now empty</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Kabul&#39;</span><span class="p">,</span> <span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Kabol&#39;</span><span class="p">,</span> <span class="mi">1780000</span><span class="p">)</span>
<span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Qandahar&#39;</span><span class="p">,</span> <span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Qandahar&#39;</span><span class="p">,</span> <span class="mi">237500</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Herat&#39;</span><span class="p">,</span> <span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Herat&#39;</span><span class="p">,</span> <span class="mi">186800</span><span class="p">)]</span>
<span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Mazar-e-Sharif&#39;</span><span class="p">,</span> <span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Balkh&#39;</span><span class="p">,</span> <span class="mi">127800</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Amsterdam&#39;</span><span class="p">,</span> <span class="s1">&#39;NLD&#39;</span><span class="p">,</span> <span class="s1">&#39;Noord-Holland&#39;</span><span class="p">,</span> <span class="mi">731200</span><span class="p">)]</span>
<span class="p">[]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>In line 1, we call <code>fetchone()</code> to read first row from the result set. Next, we call <code>fetchmany()</code> to read the next 2 rows and finally we call <code>fetchall()</code> to fetch the remaining row. The result set is empty now, so the next call to <code>fetchmany()</code> returns an empty list.</p>
<span id="buffered-and-unbuffered-cursor" class="anchor-target"></span><h2 class="heading">Buffered and Unbuffered Cursor <a class="header-link" href="#buffered-and-unbuffered-cursor">#</a></h2>

<p>By default, the cursor object is unbuffered. What does that mean?</p>

<p>It simply means that the rows from the database server are not fetched until you call a row fetching method or iterate over the cursor object. In other words, unbuffered cursor produces result on demand. On the other hand, when a query is executed using a buffered cursor, the rows are read immediately into the buffer and the row fetching methods return rows from the set of buffered rows. </p>

<p>Use buffered cursor only when:</p>

<ol>
<li>You already know that the result set is small. or,</li>
<li>You want to use the result of one query in another query</li>
</ol>

<p>Keep in mind that, a buffered cursor will load all the rows into the memory at once. If you have a large result set then this can take quite a bit of memory and may even cause the program to crash if you don&#39;t have sufficient memory. For this reason, when working with lthe arge result set you should always load results on demand (i.e use unbuffered cursor).</p>

<p>In the case of an unbuffered cursor, trying to close the cursor object or executing a new query before reading the result set from the old one will result in <code>InternalError: Unread result found</code> exception.</p>

<p>Here are two examples which demonstrate these facts in action:</p>

<p>Example 1: Closing cursor object before reading the result set </p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;select * from city limit 5&#34;</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># closing cursor before reading the result set</span>

<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Traceback (most recent call last):
...
    raise errors.InternalError(&#34;Unread result found&#34;)
mysql.connector.errors.InternalError: Unread result found
</pre></div>
</td></tr></tbody></table></div>
<p>Example 2: Executing a new query before reading the result set from the old one.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;select * from city limit 5&#34;</span><span class="p">)</span>

<span class="c1"># result set from the above query is not read</span>

<span class="c1"># now we are executing a new query</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;select Code, Name, Region, Population, Continent from </span>
<span class="s2">country where Continent=&#39;North America&#39; limit 5&#34;&#34;&#34;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Traceback (most recent call last):
...
    raise errors.InternalError(&#34;Unread result found&#34;)
mysql.connector.errors.InternalError: Unread result found
</pre></div>
</td></tr></tbody></table></div>
<p>With the buffered cursors, however, you are allowed to execute a new query but the result set from the previous query will be discarded.</p>

<p>We will learn how to create buffered cursor later in this chapter.</p>
<span id="cursor-attributes" class="anchor-target"></span><h2 class="heading">Cursor Attributes <a class="header-link" href="#cursor-attributes">#</a></h2>

<p>The following table list some read-only attributes that help us to get the relevant information about the last executed query.</p>
<div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>column_names</code></td>
<td>Returns column names as a tuple from which the data is returned.</td>
</tr>
<tr>
<td><code>with_rows</code></td>
<td>A boolean attribute which returns <code>True</code> if the query produces the result set, otherwise it returns <code>False</code>.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>Returns a list of tuples containing information about the columns in the result set. The tuple of the form <code>(name, type_code, display_size, internal_ size, precision, scale, null_ok)</code>. The <code>name</code> refers to the column name, type_code is an integer indicating the type of the column and <code>null_ok</code> determines whether a column can accept <code>NULL</code> values or not (1 means True and 0 means False). Rest of the fields are always set to <code>None</code>.</td>
</tr>
<tr>
<td><code>lastrowid</code></td>
<td>Returns the id of the last modified or inserted row, or <code>None</code> when no such value is available (e.g for SELECT statements). If multiple rows are inserted or updated then it returns the id of the first row only.</td>
</tr>
<tr>
<td><code>statement</code></td>
<td>Returns the last executed query as a string.</td>
</tr>
<tr>
<td><code>rowcount</code></td>
<td>Returns the number of rows produced or affected by the last query. For unbuffered cursors, <code>rowcount</code> is initially set to -1, and increments as rows are read.</td>
</tr>
</tbody>
</table></div>
<p>Here is an example which demonstrates these attributes in action:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;select Code, Name, Region, Population, Continent from</span>
<span class="s2">country where Continent=&#39;North America&#39; limit 5&#34;&#34;&#34;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (initial):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># reading rows but not displaying</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span> <span class="k">pass</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;column_names:&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">column_names</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&#34;with_rows:&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">with_rows</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;description: &#34;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">statement:&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">statement</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;lastrowid:&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">lastrowid</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (final):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount (initial): -1

column_names: (&#39;Code&#39;, &#39;Name&#39;, &#39;Region&#39;, &#39;Population&#39;, &#39;Continent&#39;)

with_rows: True

description: [(&#39;Code&#39;, 254, None, None, None, None, 0, 16387),
 (&#39;Name&#39;, 254, None, None, None, None, 0, 1),
 (&#39;Region&#39;, 254, None, None, None, None, 0, 1),
 (&#39;Population&#39;, 3, None, None, None, None, 0, 1),
 (&#39;Continent&#39;, 254, None, None, None, None, 0, 257)]

statement: select Code, Name, Region, Population, Continent from
country where Continent=&#39;North America&#39; limit 5

lastrowid: None

rowcount (final): 5
</pre></div>
</td></tr></tbody></table></div>
<p>Note that in the above output, the column type is printed as an integer, which is not very helpful.</p>

<p>We can get the actual type of the column using the <code>FieldType</code> class. The <code>FieldType</code> class provides all supported data types of MySQL. To convert integer type codes to its string representation, we use the <code>get_info()</code> method of the <code>FieldType</code> class, as follows:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector</span> <span class="kn">import</span> <span class="n">FieldType</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;select Code, Name, Region, Population, Continent from</span>
<span class="s2">country where Continent=&#39;North America&#39; limit 5&#34;&#34;&#34;</span><span class="p">)</span>


<span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span> <span class="c1"># read the result without printing anything</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;description: &#34;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

<span class="k">print</span><span class="p">()</span>

<span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Column &#39;{}&#39; is of type {}&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">FieldType</span><span class="o">.</span><span class="n">get_info</span><span class="p">(</span><span class="n">desc</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>description: [(&#39;Code&#39;, 254, None, None, None, None, 0, 16387),
 (&#39;Name&#39;, 254, None, None, None, None, 0, 1),
 (&#39;Region&#39;, 254, None, None, None, None, 0, 1),
 (&#39;Population&#39;, 3, None, None, None, None, 0, 1),
 (&#39;Continent&#39;, 254, None, None, None, None, 0, 257)]

Column &#39;Code&#39; is of type STRING
Column &#39;Name&#39; is of type STRING
Column &#39;Region&#39; is of type STRING
Column &#39;Population&#39; is of type LONG
Column &#39;Continent&#39; is of type STRING
</pre></div>
</td></tr></tbody></table></div><span id="query-parameters" class="anchor-target"></span><h2 class="heading">Query Parameters <a class="header-link" href="#query-parameters">#</a></h2>

<p>We have executed only static queries so far. To create SQL queries dynamically, we need to pass user-supplied data into our queries. We do this using Query parameter.</p>

<p>A Query parameter is simply a placeholder for the value and will be replaced with the actual value when the query is executed. The following are two common styles used to specify query parameters.</p>

<ol>
<li>format - %s, %d</li>
<li>pyformat - %(name)s </li>
</ol>

<p>In <code>format</code> style, we use format codes like <code>%s</code>, <code>%d</code>, etc. as a placeholder. The values to these placeholders are specified using a sequence (like a list or tuple).</p>

<p>In <code>pyformat</code> style, the extended format codes, such as <code>%(name)s</code> is used as a placeholder and values are specified using a mapping (like a dictionary).</p>

<p>The following listing demonstrates each parameter style in action:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="c1"># query with format parameter style</span>
<span class="n">sql1</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;select Code, Name, Region, Population, Continent from</span>
<span class="s2">country where Continent=</span><span class="si">%s</span><span class="s2"> limit </span><span class="si">%s</span><span class="s2">&#34;&#34;&#34;</span>

<span class="n">data1</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Europe&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql1</span><span class="p">,</span> <span class="n">data1</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>


<span class="c1"># query with pyformat parameter style</span>
<span class="n">sql2</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;select Code, Name, Region, Population, Continent from</span>
<span class="s2">country where Continent=</span><span class="si">%(continent)s</span><span class="s2"> limit </span><span class="si">%(limit)s</span><span class="s2">&#34;&#34;&#34;</span>

<span class="n">data2</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;continent&#39;</span><span class="p">:</span> <span class="s1">&#39;Asia&#39;</span><span class="p">,</span>
        <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="mi">4</span>
<span class="p">}</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql2</span><span class="p">,</span> <span class="n">data2</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s1">&#39;ALB&#39;</span><span class="p">,</span> <span class="s1">&#39;Albania&#39;</span><span class="p">,</span> <span class="s1">&#39;Southern Europe&#39;</span><span class="p">,</span> <span class="mi">3401200</span><span class="p">,</span> <span class="s1">&#39;Europe&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;AND&#39;</span><span class="p">,</span> <span class="s1">&#39;Andorra&#39;</span><span class="p">,</span> <span class="s1">&#39;Southern Europe&#39;</span><span class="p">,</span> <span class="mi">78000</span><span class="p">,</span> <span class="s1">&#39;Europe&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;AUT&#39;</span><span class="p">,</span> <span class="s1">&#39;Austria&#39;</span><span class="p">,</span> <span class="s1">&#39;Western Europe&#39;</span><span class="p">,</span> <span class="mi">8091800</span><span class="p">,</span> <span class="s1">&#39;Europe&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;BEL&#39;</span><span class="p">,</span> <span class="s1">&#39;Belgium&#39;</span><span class="p">,</span> <span class="s1">&#39;Western Europe&#39;</span><span class="p">,</span> <span class="mi">10239000</span><span class="p">,</span> <span class="s1">&#39;Europe&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;BGR&#39;</span><span class="p">,</span> <span class="s1">&#39;Bulgaria&#39;</span><span class="p">,</span> <span class="s1">&#39;Eastern Europe&#39;</span><span class="p">,</span> <span class="mi">8190900</span><span class="p">,</span> <span class="s1">&#39;Europe&#39;</span><span class="p">)</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="p">(</span><span class="s1">&#39;AFG&#39;</span><span class="p">,</span> <span class="s1">&#39;Afghanistan&#39;</span><span class="p">,</span> <span class="s1">&#39;Southern and Central Asia&#39;</span><span class="p">,</span> <span class="mi">22720000</span><span class="p">,</span> <span class="s1">&#39;Asia&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;ARE&#39;</span><span class="p">,</span> <span class="s1">&#39;United Arab Emirates&#39;</span><span class="p">,</span> <span class="s1">&#39;Middle East&#39;</span><span class="p">,</span> <span class="mi">2441000</span><span class="p">,</span> <span class="s1">&#39;Asia&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;ARM&#39;</span><span class="p">,</span> <span class="s1">&#39;Armenia&#39;</span><span class="p">,</span> <span class="s1">&#39;Middle East&#39;</span><span class="p">,</span> <span class="mi">3520000</span><span class="p">,</span> <span class="s1">&#39;Asia&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;AZE&#39;</span><span class="p">,</span> <span class="s1">&#39;Azerbaijan&#39;</span><span class="p">,</span> <span class="s1">&#39;Middle East&#39;</span><span class="p">,</span> <span class="mi">7734000</span><span class="p">,</span> <span class="s1">&#39;Asia&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div><span id="executing-multiple-queries-with-execute" class="anchor-target"></span><h2 class="heading">Executing multiple queries with execute() <a class="header-link" href="#executing-multiple-queries-with-execute">#</a></h2>

<p>The <code>execute()</code> method accepts an optional keyword argument named <code>multi</code>. By default, it is set to <code>False</code>. If set to <code>True</code>, allows <code>execute()</code> to execute multiple queries separated by semicolons. When called with <code>multi=True</code>, the <code>execute()</code> method returns an iterator which can be used to access the result set produced by the queries.</p>

<p>Here is an example in action:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="c1"># query with format parameter style</span>

<span class="n">sql1</span> <span class="o">=</span> <span class="s2">&#34;select version()&#34;</span>

<span class="n">sql2</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;select Code, Name, Region, Population, Continent from</span>
<span class="s2">country where Continent=</span><span class="si">%s</span><span class="s2"> limit </span><span class="si">%s</span><span class="s2">&#34;&#34;&#34;</span>

<span class="n">sql3</span> <span class="o">=</span> <span class="s2">&#34;select 1+1&#34;</span>

<span class="n">queries</span> <span class="o">=</span> <span class="p">[</span><span class="n">sql1</span><span class="p">,</span> <span class="n">sql2</span><span class="p">,</span> <span class="n">sql3</span><span class="p">]</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;South America&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="c1"># returns an iterator</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;;&#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">queries</span><span class="p">),</span> <span class="n">data</span><span class="p">,</span> <span class="n">multi</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>

    <span class="c1"># result is a cursor object i.e result == cursor</span>
    <span class="c1"># so we have access to all cursor attributes and methods </span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Query {0} - {1} :&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">statement</span><span class="p">))</span>

    <span class="c1"># does query has result?</span>
    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">with_rows</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;No result found&#34;</span><span class="p">)</span>

    <span class="k">print</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">Query</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">select</span> <span class="n">version</span><span class="p">():</span>
<span class="p">(</span><span class="s1">&#39;5.7.22-0ubuntu0.16.04.1&#39;</span><span class="p">,)</span>

<span class="n">Query</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">select</span> <span class="n">Code</span><span class="p">,</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Region</span><span class="p">,</span> <span class="n">Population</span><span class="p">,</span> <span class="n">Continent</span> <span class="kn">from</span>
<span class="nn">country</span> <span class="nn">where</span> <span class="nn">Continent</span><span class="o">=</span><span class="s1">&#39;South America&#39;</span> <span class="n">limit</span> <span class="mi">5</span><span class="p">:</span>
<span class="p">(</span><span class="s1">&#39;ARG&#39;</span><span class="p">,</span> <span class="s1">&#39;Argentina&#39;</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">,</span> <span class="mi">37032000</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;BOL&#39;</span><span class="p">,</span> <span class="s1">&#39;Bolivia&#39;</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">,</span> <span class="mi">8329000</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;BRA&#39;</span><span class="p">,</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">,</span> <span class="mi">170115000</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;CHL&#39;</span><span class="p">,</span> <span class="s1">&#39;Chile&#39;</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">,</span> <span class="mi">15211000</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;COL&#39;</span><span class="p">,</span> <span class="s1">&#39;Colombia&#39;</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">,</span> <span class="mi">42321000</span><span class="p">,</span> <span class="s1">&#39;South America&#39;</span><span class="p">)</span>

<span class="n">Query</span> <span class="mi">3</span> <span class="o">-</span> <span class="n">select</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The drawback of this approach is that all the query parameters must be passed in a single sequence or mapping. If you have a large number of parameters then you might lose track of them. A much better and straightforward way would be to execute each query on its own.</p>

<p>On occasions, you might want to execute the same query with a different set of parameters. One way to achieve this is to call <code>execute()</code> method in a loop, like this:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>
<span class="kn">from</span> <span class="nn">mysql.connector.cursor</span> <span class="kn">import</span> <span class="n">MySQLCursor</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;update country</span>
<span class="s2">set LifeExpectancy = </span><span class="si">%(life_expectency)s</span><span class="s2">, </span>
<span class="s2">Population = </span><span class="si">%(population)s</span><span class="s2"></span>
<span class="s2">where Name = </span><span class="si">%(name)s</span><span class="s2">&#34;&#34;&#34;</span>

<span class="n">data_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;life_expectency&#39;</span><span class="p">:</span> <span class="mf">78.9</span><span class="p">,</span>
        <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">103500</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Aruba&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;life_expectency&#39;</span><span class="p">:</span> <span class="mf">46.9</span><span class="p">,</span>
        <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">22720400</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Afghanistan&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;life_expectency&#39;</span><span class="p">:</span> <span class="mf">38.3</span><span class="p">,</span>
        <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">12879000</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Angola&#39;</span>
    <span class="p">},</span>
<span class="p">]</span>


<span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

<span class="c1"># db.commit()  # call commit() method to save the changes</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p>This script updates the life expectancy and population of Aruba, Afghanistan and Angola.</p>

<p>However, if you look at the <code>country</code> table after executing the script you will find that the table is not updated at all, this is because after executing any DML statement you will have to call <code>commit()</code> method of the connection object to commit the transaction and save the changes to the database. We will learn more about the transaction in chapter Transactions.</p>
<span id="introducing-executemany" class="anchor-target"></span><h2 class="heading">Introducing executemany() <a class="header-link" href="#introducing-executemany">#</a></h2>

<p>The <code>executemany()</code> method is another way to execute a query with different sets of parameters. It internally calls the <code>execute()</code> method. Its Syntax is as follows:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="n">executemany</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">parameter_seqeunce</span><span class="p">)</span>
</pre></div>
</div><div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>query</code></td>
<td>Query to execute</td>
</tr>
<tr>
<td><code>parameter_sequence</code></td>
<td>Sequence containing parameters to use within the query</td>
</tr>
</tbody>
</table></div>
<p>The <code>executemany()</code> method discards the result set returned by the queries, so don&#39;t use it to execute the <code>SELECT</code> statement.</p>

<p>The code in the preceding listing can be rewritten using <code>executemany()</code> as follows:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;update country</span>
<span class="s2">set LifeExpectancy = </span><span class="si">%(life_expectency)s</span><span class="s2">,</span>
<span class="s2">Population = </span><span class="si">%(population)s</span><span class="s2"></span>
<span class="s2">where Name = </span><span class="si">%(name)s</span><span class="s2">&#34;&#34;&#34;</span>


<span class="n">data_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;life_expectency&#39;</span><span class="p">:</span> <span class="mf">78.9</span><span class="p">,</span>
        <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">103500</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Aruba&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;life_expectency&#39;</span><span class="p">:</span> <span class="mf">46.9</span><span class="p">,</span>
        <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">22720400</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Afghanistan&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;life_expectency&#39;</span><span class="p">:</span> <span class="mf">38.3</span><span class="p">,</span>
        <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="mi">12879099</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Angola&#39;</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">data_list</span><span class="p">)</span>

<span class="c1"># db.commit()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p>We have just removed the for header and replaced the <code>execute()</code> call with <code>executemany()</code>, rest of the code is exactly the same.</p>

<p>For most of the queries there is no real difference between calling <code>executemany()</code> or calling <code>execute()</code> inside a loop. But for <code>INSERT</code> and <code>REPLACE</code> statements optimizations are applied.</p>

<p>Consider the following <code>INSERT</code> statements:</p>
<div class="codeblock language-sql"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">into</span> <span class="n">customer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="k">values</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="mi">45</span><span class="p">);</span>

<span class="k">insert</span> <span class="k">into</span> <span class="n">customer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="k">values</span><span class="p">(</span><span class="s1">&#39;Max&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>

<span class="k">insert</span> <span class="k">into</span> <span class="n">customer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="k">values</span><span class="p">(</span><span class="s1">&#39;Jane&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>

<span class="k">insert</span> <span class="k">into</span> <span class="n">customer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="k">values</span><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The <code>executemany()</code> would convert the above 4 statements into a single <code>INSERT</code> statement, as follows:</p>
<div class="codeblock language-sql"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">insert</span> <span class="k">into</span> <span class="n">customer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="k">values</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="mi">45</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Max&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Jane&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Since the latter form will insert the four rows in a single transaction (instead of 4), it is significantly faster than the single-row <code>INSERT</code> statement.</p>

<p>The same is true for the <code>REPLACE</code> statement.</p>

<p>Here is an example which creates a new table and inserts some rows into it using the <code>executemany()</code> method.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">sql1</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">create temporary table customer(</span>
<span class="s2">  id int AUTO_INCREMENT PRIMARY KEY,</span>
<span class="s2">  name VARCHAR(100) NOT NULL,</span>
<span class="s2">  age SMALLINT NOT NULL     </span>
<span class="s2">)</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql1</span><span class="p">)</span>

<span class="n">sql2</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">insert into customer(name, age)</span>
<span class="s2">VALUES (</span><span class="si">%(name)s</span><span class="s2">, </span><span class="si">%(age)s</span><span class="s2">)</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">data_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span>
        <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">45</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Max&#39;</span><span class="p">,</span>
        <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">25</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Jane&#39;</span><span class="p">,</span>
        <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">20</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Bob&#39;</span><span class="p">,</span>
        <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">34</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="n">sql2</span><span class="p">,</span> <span class="n">data_list</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Query:&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">statement</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Rowcount:&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>  <span class="c1"># rows inserted</span>

<span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>   <span class="c1"># commit the changes</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Query: insert into customer(name, age)
VALUES (&#39;John&#39;, 45),(&#39;Max&#39;, 25),(&#39;Jane&#39;, 20),(&#39;Bob&#39;, 34)
Rowcount: 4
</pre></div>
</td></tr></tbody></table></div><span id="customizing-the-cursor-object" class="anchor-target"></span><h2 class="heading">Customizing the Cursor Object <a class="header-link" href="#customizing-the-cursor-object">#</a></h2>

<p>Cursor subclasses are used to customize the way the result set is returned by the cursor or modify the object behavior in some other way. To create objects of these class we can either call the subclass directly or pass a one-off argument to the <code>cursor()</code> method of the connection object.</p>

<p>The following is a list subclass which inherits from the <code>MySQLCursor</code> class.</p>

<ul>
<li><code>MySQLCursorBuffered</code></li>
<li><code>MySQLCursorRaw</code></li>
<li><code>MySQLCursorBufferedRaw</code></li>
<li><code>MySQLCursorDict</code></li>
<li><code>MySQLCursorBufferedDict</code></li>
<li><code>MySQLCursorNamedTuple</code></li>
<li><code>MySQLCursorBufferedNamedTuple</code></li>
<li><code>MySQLCursorPrepared</code></li>
</ul>

<p>Let&#39;s discuss them in detail one by one.</p>
<span id="mysqlcursorbuffered-class" class="anchor-target"></span><h3 class="heading">MySQLCursorBuffered class <a class="header-link" href="#mysqlcursorbuffered-class">#</a></h3>

<p>The <code>MySQLCursorBuffered</code> class creates a buffered cursor.</p>

<p>To create buffered cursor pass <code>buffered=True</code> to the <code>cursor()</code> method of the connection object. Alternatively, pass <code>buffered=True</code> to the <code>connect()</code> function, this will turn on buffering for all cursor objects created from the connection object.</p>

<p>Here is an example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># turn on buffering for all cursor objects created from</span>
<span class="c1"># this connection</span>
<span class="c1">#</span>
<span class="c1"># db = mysql.connector.connect(</span>
<span class="c1">#     option_files=&#39;my.conf&#39;,</span>
<span class="c1">#     use_pure=True,</span>
<span class="c1">#     buffered=True</span>
<span class="c1"># )</span>

<span class="c1"># only this cursor will buffer results</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">buffered</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">SELECT Name, Continent, Population, LifeExpectancy FROM country </span>
<span class="s2">where LifeExpectancy BETWEEN 70 and 80</span>
<span class="s2">order by LifeExpectancy DESC </span>
<span class="s2">limit 3</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (initial):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (final):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount (initial): 3
(&#39;Australia&#39;, &#39;Oceania&#39;, 18886000, 79.8)
(&#39;Switzerland&#39;, &#39;Europe&#39;, 7160400, 79.6)
(&#39;Sweden&#39;, &#39;Europe&#39;, 8861400, 79.6)
rowcount (final): 3
</pre></div>
</td></tr></tbody></table></div>
<p>Notice that after executing the query, the <code>rowcount</code> attribute returns 3, this is because we are using a buffered cursor and rows are fetched immediately after executing the query. Had we been using an unbuffered cursor, the <code>rowcount</code> would have returned -1.</p>
<span id="mysqlcursorraw-class" class="anchor-target"></span><h3 class="heading">MySQLCursorRaw class <a class="header-link" href="#mysqlcursorraw-class">#</a></h3>

<p>By default, the cursor object automatically converts MySQL types to its equivalent Python types when rows are fetched. If you want to turn off this conversion use <code>MySQLCursorRaw</code> cursor. </p>

<p>To create a raw cursor, pass <code>raw=True</code> to the <code>cursor()</code> method of the connection object. Alternatively, pass <code>raw=True</code> to the <code>connect()</code> function, this will make all cursors created from the connection raw by default.</p>

<p>Here is an example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># all cursor objects created from</span>
<span class="c1"># this connection will be raw</span>
<span class="c1">#</span>
<span class="c1"># db = mysql.connector.connect(</span>
<span class="c1">#     option_files=&#39;my.conf&#39;,</span>
<span class="c1">#     use_pure=True,</span>
<span class="c1">#     raw=True</span>
<span class="c1"># )</span>

<span class="c1"># only this cursor is raw</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">SELECT Name, Continent, Population, LifeExpectancy FROM country </span>
<span class="s2">where LifeExpectancy BETWEEN 70 and 80</span>
<span class="s2">order by LifeExpectancy DESC </span>
<span class="s2">limit 3</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (initial):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (final):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount (initial): -1
(bytearray(b&#39;Australia&#39;), bytearray(b&#39;Oceania&#39;), bytearray(b&#39;18886000&#39;), bytearray(b&#39;79.8&#39;))
(bytearray(b&#39;Switzerland&#39;), bytearray(b&#39;Europe&#39;), bytearray(b&#39;7160400&#39;), bytearray(b&#39;79.6&#39;))
(bytearray(b&#39;Sweden&#39;), bytearray(b&#39;Europe&#39;), bytearray(b&#39;8861400&#39;), bytearray(b&#39;79.6&#39;))
rowcount (final): 3
</pre></div>
</td></tr></tbody></table></div><span id="mysqlcursorbufferedraw-class" class="anchor-target"></span><h3 class="heading">MySQLCursorBufferedRaw class <a class="header-link" href="#mysqlcursorbufferedraw-class">#</a></h3>

<p>The <code>MySQLCursorBufferedRaw</code> class creates a raw buffered cursor.</p>

<p>To <code>MySQLCursorBufferedRaw</code> cursor pass <code>raw=True</code> and <code>buffered=True</code> to the <code>cursor()</code> method of the connection object. Alternatively, pass <code>raw=True</code> and <code>buffered=True</code> to the <code>connect()</code> function, this will make all the cursors created from the connection raw and buffered by default.</p>

<p>Here is an example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># all cursor objects created from</span>
<span class="c1"># this connection will be raw and buffered</span>
<span class="c1">#</span>
<span class="c1"># db = mysql.connector.connect(</span>
<span class="c1">#     option_files=&#39;my.conf&#39;,</span>
<span class="c1">#     use_pure=True,</span>
<span class="c1">#     raw=True</span>
<span class="c1">#     buffered=True</span>
<span class="c1"># )</span>

<span class="c1"># only this cursor will be raw and buffered</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">buffered</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">SELECT Name, Continent, Population, LifeExpectancy FROM country </span>
<span class="s2">where LifeExpectancy BETWEEN 70 and 80</span>
<span class="s2">order by LifeExpectancy DESC </span>
<span class="s2">limit 3</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (initial):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (final):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount (initial): 3
(bytearray(b&#39;Australia&#39;), bytearray(b&#39;Oceania&#39;), bytearray(b&#39;18886000&#39;), bytearray(b&#39;79.8&#39;))
(bytearray(b&#39;Switzerland&#39;), bytearray(b&#39;Europe&#39;), bytearray(b&#39;7160400&#39;), bytearray(b&#39;79.6&#39;))
(bytearray(b&#39;Sweden&#39;), bytearray(b&#39;Europe&#39;), bytearray(b&#39;8861400&#39;), bytearray(b&#39;79.6&#39;))
rowcount (final): 3
</pre></div>
</td></tr></tbody></table></div><span id="mysqlcursordict-class" class="anchor-target"></span><h3 class="heading">MySQLCursorDict class <a class="header-link" href="#mysqlcursordict-class">#</a></h3>

<p>The <code>MySQLCursorDict</code> class allows us to access rows as dictionaries instead of a tuple.</p>

<p>To create <code>MySQLCursorDict</code> cursor pass <code>dictionary=True</code> to the <code>cursor()</code> method of the connection object.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># return rows as dictionary instead of tuple</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">SELECT Name, Continent, Population, LifeExpectancy FROM country </span>
<span class="s2">where LifeExpectancy BETWEEN 70 and 80</span>
<span class="s2">order by LifeExpectancy DESC </span>
<span class="s2">limit 3</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (initial):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Continent&#39;</span><span class="p">])</span>   <span class="c1"># access columns by names</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (final):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount (initial): -1
{&#39;Continent&#39;: &#39;Oceania&#39;, &#39;LifeExpectancy&#39;: 79.8, &#39;Population&#39;: 18886000, &#39;Name&#39;: &#39;Australia&#39;}
Australia Oceania
{&#39;Continent&#39;: &#39;Europe&#39;, &#39;LifeExpectancy&#39;: 79.6, &#39;Population&#39;: 7160400, &#39;Name&#39;: &#39;Switzerland&#39;}
Switzerland Europe
{&#39;Continent&#39;: &#39;Europe&#39;, &#39;LifeExpectancy&#39;: 79.6, &#39;Population&#39;: 8861400, &#39;Name&#39;: &#39;Sweden&#39;}
Sweden Europe
rowcount (final): 3
</pre></div>
</td></tr></tbody></table></div><span id="mysqlcursorbuffereddict" class="anchor-target"></span><h3 class="heading">MySQLCursorBufferedDict <a class="header-link" href="#mysqlcursorbuffereddict">#</a></h3>

<p>The <code>MySQLCursorBufferedDict</code> works exactly like <code>MySQLCursorDict</code> but returns a buffered cursor.</p>

<p>To create <code>MySQLCursorBufferedDict</code> cursor pass <code>buffered=True</code> and <code>dictionary=True</code> to the <code>cursor()</code> method of the connection object.</p>

<p>Here is an example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># return a buffered MySQLCursorDict</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">buffered</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">SELECT Name, Continent, Population, LifeExpectancy FROM country </span>
<span class="s2">where LifeExpectancy BETWEEN 70 and 80</span>
<span class="s2">order by LifeExpectancy DESC </span>
<span class="s2">limit 3</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (initial):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Continent&#39;</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (final):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount (initial): 3
{&#39;Continent&#39;: &#39;Oceania&#39;, &#39;LifeExpectancy&#39;: 79.8, &#39;Name&#39;: &#39;Australia&#39;, &#39;Population&#39;: 18886000}
Australia Oceania
{&#39;Continent&#39;: &#39;Europe&#39;, &#39;LifeExpectancy&#39;: 79.6, &#39;Name&#39;: &#39;Switzerland&#39;, &#39;Population&#39;: 7160400}
Switzerland Europe
{&#39;Continent&#39;: &#39;Europe&#39;, &#39;LifeExpectancy&#39;: 79.6, &#39;Name&#39;: &#39;Sweden&#39;, &#39;Population&#39;: 8861400}
Sweden Europe
rowcount (final): 3
</pre></div>
</td></tr></tbody></table></div><span id="mysqlcursornamedtuple-class" class="anchor-target"></span><h3 class="heading">MySQLCursorNamedTuple class <a class="header-link" href="#mysqlcursornamedtuple-class">#</a></h3>

<p>The <code>MySQLCursorNamedTuple</code> class create a cursor that returns rows as <code>namedtuple</code>.</p>

<p>To create <code>MySQLCursorNamedTuple</code> pass <code>named_tuple=True</code> to the <code>cursor()</code> method of the connection object.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># return a unbuffered MySQLCursorNamedTuple</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">named_tuple</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">SELECT Name, Continent, Population, LifeExpectancy FROM country </span>
<span class="s2">where LifeExpectancy BETWEEN 70 and 80</span>
<span class="s2">order by LifeExpectancy DESC </span>
<span class="s2">limit 3</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (initial):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">Name</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">Continent</span><span class="p">)</span>  <span class="c1"># access columns as attributes</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (final):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount (initial): -1
Row(Name=&#39;Australia&#39;, Continent=&#39;Oceania&#39;, Population=18886000, LifeExpectancy=79.8)
Australia Oceania
Row(Name=&#39;Switzerland&#39;, Continent=&#39;Europe&#39;, Population=7160400, LifeExpectancy=79.6)
Switzerland Europe
Row(Name=&#39;Sweden&#39;, Continent=&#39;Europe&#39;, Population=8861400, LifeExpectancy=79.6)
Sweden Europe
rowcount (final): 3
</pre></div>
</td></tr></tbody></table></div><span id="mysqlcursorbufferednamedtuple-class" class="anchor-target"></span><h3 class="heading">MySQLCursorBufferedNamedTuple class <a class="header-link" href="#mysqlcursorbufferednamedtuple-class">#</a></h3>

<p>Similar to <code>MySQLCursorNamedTuple</code> but creates a buffered cursor.</p>

<p>To create <code>MySQLCursorBufferedNamedTuple</code> pass <code>named_tuple=True</code> and <code>buffered=True</code> to the <code>cursor()</code> method of the connection object.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># return a buffered MySQLCursorNamedTuple</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">named_tuple</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">buffered</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">SELECT Name, Continent, Population, LifeExpectancy FROM country </span>
<span class="s2">where LifeExpectancy BETWEEN 70 and 80</span>
<span class="s2">order by LifeExpectancy DESC </span>
<span class="s2">limit 3</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (initial):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">Name</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">Continent</span><span class="p">)</span>  <span class="c1"># access columns as attributes</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount (final):&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount (initial): 3
Row(Name=&#39;Australia&#39;, Continent=&#39;Oceania&#39;, Population=18886000, LifeExpectancy=79.8)
Australia Oceania
Row(Name=&#39;Switzerland&#39;, Continent=&#39;Europe&#39;, Population=7160400, LifeExpectancy=79.6)
Switzerland Europe
Row(Name=&#39;Sweden&#39;, Continent=&#39;Europe&#39;, Population=8861400, LifeExpectancy=79.6)
Sweden Europe
rowcount (final): 3
</pre></div>
</td></tr></tbody></table></div><span id="mysqlcursorprepared-class" class="anchor-target"></span><h3 class="heading">MySQLCursorPrepared class <a class="header-link" href="#mysqlcursorprepared-class">#</a></h3>

<p>The <code>MySQLCursorPrepared</code> class creates a cursor to execute the prepared statement.</p>

<p>A prepared statement a feature which allows us to reuse a SQL statement, without incurring the cost of compiling it multiple times. They are useful when you want to repeatedly execute a query with a different set of parameters.</p>

<p>Unlike, a non-prepared statement where you can use format (<code>%s</code>) or pyformat (<code>%(name)s</code>) parameter styles. With prepared statements, you can only use format(<code>%d</code>) or qmark (<code>?</code>) parameter styles.</p>

<p>To create <code>MySQLCursorPrepared</code> cursor pass <code>prepared=True</code> to the <code>cursor()</code> method of the connection object.</p>

<p>Here is an example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mysql.connector</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">option_files</span><span class="o">=</span><span class="s1">&#39;my.conf&#39;</span><span class="p">,</span> <span class="n">use_pure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># return a buffered MySQLCursorNamedTuple</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">prepared</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sql1</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">create temporary table customer(</span>
<span class="s2">  id int AUTO_INCREMENT PRIMARY KEY,</span>
<span class="s2">  name VARCHAR(100) NOT NULL,</span>
<span class="s2">  age SMALLINT NOT NULL     </span>
<span class="s2">)</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql1</span><span class="p">)</span>

<span class="n">sql2</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span>
<span class="s2">insert into customer(name, age)</span>
<span class="s2">VALUES (</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)</span>
<span class="s2">&#34;&#34;&#34;</span>

<span class="n">data_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="mi">45</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Max&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Jane&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">),</span>
<span class="p">]</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="n">sql2</span><span class="p">,</span> <span class="n">data_list</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;rowcount:&#34;</span><span class="p">,</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>Expected Output:</strong></p>
<div class="codeblock language-text"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rowcount: 4
MySQLCursorPrepared: 
insert into customer(name, age)
VALUES ..
</pre></div>
</td></tr></tbody></table></div>
<p>In the next few lessons, we will see some practical examples of <code>INSERT</code>, <code>UPDATE</code> and <code>DELTETE</code> statements:</p>



    



        <nav aria-label="pagination">
            <ul class="pager">
                
                    <li class="previous">
                        <a href="../connecting-to-mysql-using-connector-python/index.html" title="Connecting to MySQL using Connector/Python">
                            <span class="fa fa-arrow-left" aria-hidden="true"></span>
                            Connecting to MySQL using Connector/Pyt…
                        </a>
                    </li>
                

                
                    <li class="next">
                        <a href="../exception-handling-in-connector-python/index.html" title="Exception Handling in Connector/Python">
                            Exception Handling in Connector/Python
                            <span class="fa fa-arrow-right" aria-hidden="true"></span>
                        </a>
                    </li>
                
            </ul>
        </nav>







    <hr/>
    <div id="disqus_thread">
    <p style="margin-bottom: 10px" class="text-center">
        <a href="#" class=" btn btn-primary comments-holder" onclick="loadDisqus();return false;">
            <i class="fa fa-comments" aria-hidden="true"></i> Load Comments
        </a>
    </p>
    </div>
    <hr/>
    <script>
        var is_disqus_loaded = false;
        function loadDisqus() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '../../../overiqcom.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        };
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>







            </div>
        </div>


        <div class="sidebar">
        
            <div class="col-lg-4 col-md-4 col-sm-12">
                

    
        
    <div class="well">
        <h4>MySQL Connector/Python Tutorial</h4>
        <ul>
            
                <li><a href="../intro-to-mysql-connector-python/index.html">Intro to MySQL Connector/Python</a></li>
            
                <li><a href="../installing-mysql-connector-python/index.html">Installing MySQL Connector Python</a></li>
            
                <li><a href="../connecting-to-mysql-using-connector-python/index.html">Connecting to MySQL using Connector/Python</a></li>
            
                <li><a href="index.html">Executing Queries using Connector/Python</a></li>
            
                <li><a href="../exception-handling-in-connector-python/index.html">Exception Handling in Connector/Python</a></li>
            
                <li><a href="../creating-tables-using-connector-python/index.html">Creating Tables using Connector/Python</a></li>
            
                <li><a href="../inserting-data-using-connector-python/index.html">Inserting Data using Connector/Python</a></li>
            
                <li><a href="../updating-data-using-connector-python/index.html">Updating Data using Connector/Python</a></li>
            
                <li><a href="../deleting-data-using-connector-python/index.html">Deleting Data using Connector/Python</a></li>
            
                <li><a href="../calling-stored-procedures-using-connector-python/index.html">Calling Stored Procedures using Connector/Python</a></li>
            
                <li><a href="../handling-transactions-with-connector-python/index.html">Handling Transactions with Connector/Python</a></li>
            
                <li><a href="../connection-pooling-using-connector-python/index.html">Connection Pooling using Connector/Python</a></li>
            
                <li><a href="../using-connector-python-c-extension/index.html">Using Connector/Python C Extension</a></li>
            
        </ul>
    </div>

    

    
        

<div class="well">
    <h4>Recent Posts</h4>
    <ul>
        
            <li><a href="../../machine-learning-experts-you-should-be-following-online/index.html">Machine Learning Experts You Should Be Following Online</a></li>
        
            <li><a href="../../4-ways-to-prepare-for-the-ap-computer-science-a-exam/index.html">4 Ways to Prepare for the AP Computer Science A Exam</a></li>
        
            <li><a href="../../finance-assignment-online-help-for-the-busy-and-tired-students-get-help-from-experts/index.html">Finance Assignment Online Help for the Busy and Tired Students: Get Help from Experts</a></li>
        
            <li><a href="../../top-9-machine-learning-algorithms-for-data-scientists/index.html">Top 9 Machine Learning Algorithms for Data Scientists</a></li>
        
            <li><a href="../../data-science-learning-path-or-steps-to-become-a-data-scientist-final/index.html">Data Science Learning Path or Steps to become a data scientist Final</a></li>
        
            <li><a href="../../enable-edit-button-in-shutter-in-linux-mint-19-and-ubuntu-18-04/index.html">Enable Edit Button in Shutter In Linux Mint 19 and Ubuntu 18.04</a></li>
        
            <li><a href="../../python-3-time-module/index.html">Python 3 time module</a></li>
        
            <li><a href="../../pygments-tutorial/index.html">Pygments Tutorial</a></li>
        
            <li><a href="../../how-to-use-virtualenv/index.html">How to use Virtualenv?</a></li>
        
            <li><a href="../../installing-mysql-windows-linux-and-mac/index.html">Installing MySQL (Windows, Linux and Mac)</a></li>
        
            <li><a href="../../what-is-if-__name__-__main__-in-python/index.html">What is if __name__ == &#39;__main__&#39;  in Python ?</a></li>
        
            <li><a href="../../installing-goaccess-a-real-time-web-log-analyzer/index.html">Installing GoAccess (A Real-time web log analyzer)</a></li>
        
            <li><a href="../../installing-isso/index.html">Installing Isso</a></li>
        
    </ul>
</div>

<!-- Blog Search Well -->





















    



            </div>
        </div>
    </div>



    

</div>

<!-- Footer -->
<footer class="overiq-footer">
    <div class="container">
        <div class="row">

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../terms-of-use/index.html">Terms</a></li>
                    <li><a href="../../privacy-policy/index.html">Privacy Policy</a></li>
                    <li><a href="../../sitemap.xml/index.html">Sitemap</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../contact/index.html">Contact</a></li>
                    <li><a href="../../blog/index.html">Blog</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="https://www.facebook.com/OverIQ/">Facebook</a></li>
                    <li><a href="https://twitter.com/infoOverIQ">Twitter</a></li>
                    <li><a href="https://github.com/overiq">Github</a></li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../c-programming-101/index.html">C Tutorial</a></li>
                    <li><a href="../../python-101/index.html">Python Tutorial</a></li>
                    <li><a href="../../django-1-11/index.html">Django Tutorial</a></li>
                    <li><a href="../../flask-101/index.html">Flask Tutorial</a></li>
                    <li><a href="../index.html">MySQL Connector/Python Tutorial</a></li>
                    <li><a href="../../sqlalchemy-101/index.html">SQLAlchemy Tutorial</a></li>
                    <li><a href="../../c-examples/index.html">C Programming Examples</a></li>
                </ul>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <div class="row text-center">
            <p>© 2025 OverIQ.com</p>
            <small><a href="#">Back to top</a></small>
        </div>

        <!-- /.row -->
    </div>
</footer>



<script type="text/javascript" src="../../static/CACHE/js/output.2e0ff002c1a4.js"></script>




<script async="" src="../../../cdn.jsdelivr.net/npm/cookieconsent%403/build/cookieconsent.min.js" data-cfasync="false"></script>

<script>

    
    window.addEventListener('load', function () {
        window.cookieconsent.initialise({
            "palette": {
                "popup": {
                    "background": "#5ca9e0",
                    "text": "#ffffff"
                },
                "button": {
                    "background": "#fff",
                    "text": "#237afc"
                }
            },
            "theme": "classic",
            "position": "top",
            "static": true,
            "content": {
                "href": "https://overiq.com/privacy-policy/"
            }
        });
    });


</script>

<script src="../../../polyfill.io/v3/polyfill.min1162.js?features=es6"></script>
<script id="MathJax-script" defer="" src="../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml.js"></script>

<script async="" type="text/javascript" src="../../../cdn.carbonads.com/carbonfbdb.js?serve=CE7DC53E&amp;placement=overiqcom" id="_carbonads_js"></script>





<script data-cfasync="false">function _emitEzConsentEvent(){var customEvent=new CustomEvent("ezConsentEvent",{detail:{ezTcfConsent:window.ezTcfConsent},bubbles:true,cancelable:true,});document.dispatchEvent(customEvent);}
(function(window,document){function _setAllEzConsentTrue(){window.ezTcfConsent.loaded=true;window.ezTcfConsent.store_info=true;window.ezTcfConsent.develop_and_improve_services=true;window.ezTcfConsent.measure_ad_performance=true;window.ezTcfConsent.measure_content_performance=true;window.ezTcfConsent.select_basic_ads=true;window.ezTcfConsent.create_ad_profile=true;window.ezTcfConsent.select_personalized_ads=true;window.ezTcfConsent.create_content_profile=true;window.ezTcfConsent.select_personalized_content=true;window.ezTcfConsent.understand_audiences=true;window.ezTcfConsent.use_limited_data_to_select_content=true;window.ezTcfConsent.select_personalized_content=true;}
function _clearEzConsentCookie(){document.cookie="ezCMPCookieConsent=tcf2;Domain=.overiq.com;Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT";}
_clearEzConsentCookie();if(typeof window.__tcfapi!=="undefined"){window.ezgconsent=false;var amazonHasRun=false;function _ezAllowed(tcdata,purpose){return(tcdata.purpose.consents[purpose]||tcdata.purpose.legitimateInterests[purpose]);}
function _handleConsentDecision(tcdata){window.ezTcfConsent.loaded=true;if(!tcdata.vendor.consents["347"]&&!tcdata.vendor.legitimateInterests["347"]){window._emitEzConsentEvent();return;}
window.ezTcfConsent.store_info=_ezAllowed(tcdata,"1");window.ezTcfConsent.develop_and_improve_services=_ezAllowed(tcdata,"10");window.ezTcfConsent.measure_content_performance=_ezAllowed(tcdata,"8");window.ezTcfConsent.select_basic_ads=_ezAllowed(tcdata,"2");window.ezTcfConsent.create_ad_profile=_ezAllowed(tcdata,"3");window.ezTcfConsent.select_personalized_ads=_ezAllowed(tcdata,"4");window.ezTcfConsent.create_content_profile=_ezAllowed(tcdata,"5");window.ezTcfConsent.measure_ad_performance=_ezAllowed(tcdata,"7");window.ezTcfConsent.use_limited_data_to_select_content=_ezAllowed(tcdata,"11");window.ezTcfConsent.select_personalized_content=_ezAllowed(tcdata,"6");window.ezTcfConsent.understand_audiences=_ezAllowed(tcdata,"9");window._emitEzConsentEvent();}
function _handleGoogleConsentV2(tcdata){if(!tcdata||!tcdata.purpose||!tcdata.purpose.consents){return;}
var googConsentV2={};if(tcdata.purpose.consents[1]){googConsentV2.ad_storage='granted';googConsentV2.analytics_storage='granted';}
if(tcdata.purpose.consents[3]&&tcdata.purpose.consents[4]){googConsentV2.ad_personalization='granted';}
if(tcdata.purpose.consents[1]&&tcdata.purpose.consents[7]){googConsentV2.ad_user_data='granted';}
if(googConsentV2.analytics_storage=='denied'){gtag('set','url_passthrough',true);}
gtag('consent','update',googConsentV2);}
__tcfapi("addEventListener",2,function(tcdata,success){if(!success||!tcdata){window._emitEzConsentEvent();return;}
if(!tcdata.gdprApplies){_setAllEzConsentTrue();window._emitEzConsentEvent();return;}
if(tcdata.eventStatus==="useractioncomplete"||tcdata.eventStatus==="tcloaded"){if(typeof gtag!='undefined'){_handleGoogleConsentV2(tcdata);}
_handleConsentDecision(tcdata);if(tcdata.purpose.consents["1"]===true&&tcdata.vendor.consents["755"]!==false){window.ezgconsent=true;(adsbygoogle=window.adsbygoogle||[]).pauseAdRequests=0;}
if(window.__ezconsent){__ezconsent.setEzoicConsentSettings(ezConsentCategories);}
__tcfapi("removeEventListener",2,function(success){return null;},tcdata.listenerId);if(!(tcdata.purpose.consents["1"]===true&&_ezAllowed(tcdata,"2")&&_ezAllowed(tcdata,"3")&&_ezAllowed(tcdata,"4"))){if(typeof __ez=="object"&&typeof __ez.bit=="object"&&typeof window["_ezaq"]=="object"&&typeof window["_ezaq"]["page_view_id"]=="string"){__ez.bit.Add(window["_ezaq"]["page_view_id"],[new __ezDotData("non_personalized_ads",true),]);}}}});}else{_setAllEzConsentTrue();window._emitEzConsentEvent();}})(window,document);</script></body>
<!-- Mirrored from overiq.com/mysql-connector-python-101/executing-queries-using-connector-python/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:16:26 GMT -->
</html>