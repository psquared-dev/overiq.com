<!DOCTYPE html><html lang="en">
<!-- Mirrored from overiq.com/flask-101/form-handling-in-flask/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:10:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"/>
<script>var __ezHttpConsent={setByCat:function(src,tagType,attributes,category,force){var setScript=function(){if(force||window.ezTcfConsent[category]){var scriptElement=document.createElement(tagType);scriptElement.src=src;attributes.forEach(function(attr){for(var key in attr){if(attr.hasOwnProperty(key)){scriptElement.setAttribute(key,attr[key]);}}});var firstScript=document.getElementsByTagName(tagType)[0];firstScript.parentNode.insertBefore(scriptElement,firstScript);}};if(force||(window.ezTcfConsent&&window.ezTcfConsent.loaded)){setScript();}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){setScript();}else{console.error("cannot get ez consent data");force=true;setScript();}});}else{force=true;setScript();console.error("getEzConsentData is not a function");}},};</script>
<script>var ezTcfConsent=window.ezTcfConsent?window.ezTcfConsent:{loaded:false,store_info:false,develop_and_improve_services:false,measure_ad_performance:false,measure_content_performance:false,select_basic_ads:false,create_ad_profile:false,select_personalized_ads:false,create_content_profile:false,select_personalized_content:false,understand_audiences:false,use_limited_data_to_select_content:false,};function getEzConsentData(){return new Promise(function(resolve){document.addEventListener("ezConsentEvent",function(event){var ezTcfConsent=event.detail.ezTcfConsent;resolve(ezTcfConsent);});});}</script>
<script>if(typeof _setEzCookies!=='function'){function _setEzCookies(ezConsentData){var cookies=window.ezCookieQueue;for(var i=0;i<cookies.length;i++){var cookie=cookies[i];if(ezConsentData&&ezConsentData.loaded&&ezConsentData[cookie.tcfCategory]){document.cookie=cookie.name+"="+cookie.value;}}}}
window.ezCookieQueue=window.ezCookieQueue||[];if(typeof addEzCookies!=='function'){function addEzCookies(arr){window.ezCookieQueue=[...window.ezCookieQueue,...arr];}}
addEzCookies([]);if(window.ezTcfConsent&&window.ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else{console.error("cannot get ez consent data");_setEzCookies(window.ezTcfConsent);}});}else{console.error("getEzConsentData is not a function");_setEzCookies(window.ezTcfConsent);}</script>
<script data-ezscrex='false' data-cfasync='false' data-pagespeed-no-defer>var __ez=__ez||{};__ez.stms=Date.now();__ez.evt={};__ez.script={};__ez.ck=__ez.ck||{};__ez.template={};__ez.template.isOrig=true;window.__ezScriptHost="//www.ezojs.com";__ez.queue=__ez.queue||function(){var e=0,i=0,t=[],n=!1,o=[],r=[],s=!0,a=function(e,i,n,o,r,s,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,d=this;this.name=e,this.funcName=i,this.parameters=null===n?null:w(n)?n:[n],this.isBlock=o,this.blockedBy=r,this.deleteWhenComplete=s,this.isError=!1,this.isComplete=!1,this.isInitialized=!1,this.proceedIfError=a,this.fWindow=l,this.isTimeDelay=!1,this.process=function(){f("... func = "+e),d.isInitialized=!0,d.isComplete=!0,f("... func.apply: "+e);var i=d.funcName.split("."),n=null,o=this.fWindow||window;i.length>3||(n=3===i.length?o[i[0]][i[1]][i[2]]:2===i.length?o[i[0]][i[1]]:o[d.funcName]),null!=n&&n.apply(null,this.parameters),!0===d.deleteWhenComplete&&delete t[e],!0===d.isBlock&&(f("----- F'D: "+d.name),m())}},l=function(e,i,t,n,o,r,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,l=this;this.name=e,this.path=i,this.async=o,this.defer=r,this.isBlock=t,this.blockedBy=n,this.isInitialized=!1,this.isError=!1,this.isComplete=!1,this.proceedIfError=s,this.fWindow=a,this.isTimeDelay=!1,this.isPath=function(e){return"/"===e[0]&&"/"!==e[1]},this.getSrc=function(e){return void 0!==window.__ezScriptHost&&this.isPath(e)&&"banger.js"!==this.name?window.__ezScriptHost+e:e},this.process=function(){l.isInitialized=!0,f("... file = "+e);var i=this.fWindow?this.fWindow.document:document,t=i.createElement("script");t.src=this.getSrc(this.path),!0===o?t.async=!0:!0===r&&(t.defer=!0),t.onerror=function(){var e={url:window.location.href,name:l.name,path:l.path,user_agent:window.navigator.userAgent};"undefined"!=typeof _ezaq&&(e.pageview_id=_ezaq.page_view_id);var i=encodeURIComponent(JSON.stringify(e)),t=new XMLHttpRequest;t.open("GET/index.html","//g.ezoic.net/ezqlog?d="+i,!0),t.send(),f("----- ERR'D: "+l.name),l.isError=!0,!0===l.isBlock&&m()},t.onreadystatechange=t.onload=function(){var e=t.readyState;f("----- F'D: "+l.name),e&&!/loaded|complete/.test(e)||(l.isComplete=!0,!0===l.isBlock&&m())},i.getElementsByTagName("head")[0].appendChild(t)}},d=function(e,i){this.name=e,this.path="",this.async=!1,this.defer=!1,this.isBlock=!1,this.blockedBy=[],this.isInitialized=!0,this.isError=!1,this.isComplete=i,this.proceedIfError=!1,this.isTimeDelay=!1,this.process=function(){}};function c(e,i,n,s,a,d,c,u,f){var m=new l(e,i,n,s,a,d,c,f);!0===u?o[e]=m:r[e]=m,t[e]=m,h(m)}function h(e){!0!==u(e)&&0!=s&&e.process()}function u(e){if(!0===e.isTimeDelay&&!1===n)return f(e.name+" blocked = TIME DELAY!"),!0;if(w(e.blockedBy))for(var i=0;i<e.blockedBy.length;i++){var o=e.blockedBy[i];if(!1===t.hasOwnProperty(o))return f(e.name+" blocked = "+o),!0;if(!0===e.proceedIfError&&!0===t[o].isError)return!1;if(!1===t[o].isComplete)return f(e.name+" blocked = "+o),!0}return!1}function f(e){var i=window.location.href,t=new RegExp("[?&]ezq=([^&#]*)","i").exec(i);"1"===(t?t[1]:null)&&console.debug(e)}function m(){++e>200||(f("let's go"),p(o),p(r))}function p(e){for(var i in e)if(!1!==e.hasOwnProperty(i)){var t=e[i];!0===t.isComplete||u(t)||!0===t.isInitialized||!0===t.isError?!0===t.isError?f(t.name+": error"):!0===t.isComplete?f(t.name+": complete already"):!0===t.isInitialized&&f(t.name+": initialized already"):t.process()}}function w(e){return"[object Array]"==Object.prototype.toString.call(e)}return window.addEventListener("load",(function(){setTimeout((function(){n=!0,f("TDELAY -----"),m()}),5e3)}),!1),{addFile:c,addFileOnce:function(e,i,n,o,r,s,a,l,d){t[e]||c(e,i,n,o,r,s,a,l,d)},addDelayFile:function(e,i){var n=new l(e,i,!1,[],!1,!1,!0);n.isTimeDelay=!0,f(e+" ...  FILE! TDELAY"),r[e]=n,t[e]=n,h(n)},addFunc:function(e,n,s,l,d,c,u,f,m,p){!0===c&&(e=e+"_"+i++);var w=new a(e,n,s,l,d,u,f,p);!0===m?o[e]=w:r[e]=w,t[e]=w,h(w)},addDelayFunc:function(e,i,n){var o=new a(e,i,n,!1,[],!0,!0);o.isTimeDelay=!0,f(e+" ...  FUNCTION! TDELAY"),r[e]=o,t[e]=o,h(o)},items:t,processAll:m,setallowLoad:function(e){s=e},markLoaded:function(e){if(e&&0!==e.length){if(e in t){var i=t[e];!0===i.isComplete?f(i.name+" "+e+": error loaded duplicate"):(i.isComplete=!0,i.isInitialized=!0)}else t[e]=new d(e,!0);f("markLoaded dummyfile: "+t[e].name)}},logWhatsBlocked:function(){for(var e in t)!1!==t.hasOwnProperty(e)&&u(t[e])}}}();__ez.evt.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n()},__ez.evt.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]};__ez.script.add=function(e){var t=document.createElement("script");t.src=e,t.async=!0,t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)};__ez.dot={};__ez.queue.addFile('../../detroitchicago/boise.js', '../../detroitchicago/boisebb26.js?gcb=195-3&amp;cb=5', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/abilene.js', '../../parsonsmaize/abilenec0f9.js?gcb=195-3&amp;cb=7f81d60744', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/mulvane.js', '../../parsonsmaize/mulvane2d63.js?gcb=195-3&amp;cb=e75e48eec0', true, ['/parsonsmaize/abilene.js'], true, false, true, false);__ez.queue.addFile('../../detroitchicago/birmingham.js', '../../detroitchicago/birminghame7ec.js?gcb=195-3&amp;cb=539c47377c', true, ['/parsonsmaize/abilene.js'], true, false, true, false);</script>
<script data-ezscrex="false" type="text/javascript" data-cfasync="false">window._ezaq = Object.assign({"ad_cache_level":1,"adpicker_placement_cnt":0,"ai_placeholder_cache_level":1,"ai_placeholder_placement_cnt":-1,"domain_id":92771,"ezcache_level":1,"ezcache_skip_code":0,"has_bad_image":0,"has_bad_words":0,"is_sitespeed":0,"lt_cache_level":0,"response_size":89231,"response_size_orig":83463,"response_time_orig":521,"template_id":5,"url":"https://overiq.com/flask-101/form-handling-in-flask/","word_count":0,"worst_bad_word_level":0}, typeof window._ezaq !== "undefined" ? window._ezaq : {});__ez.queue.markLoaded('ezaqBaseReady');</script>
<script type='text/javascript' data-ezscrex='false' data-cfasync='false'>
window.ezAnalyticsStatic = true;

function analyticsAddScript(script) {
	var ezDynamic = document.createElement('script');
	ezDynamic.type = 'text/javascript';
	ezDynamic.innerHTML = script;
	document.head.appendChild(ezDynamic);
}
function getCookiesWithPrefix() {
    var allCookies = document.cookie.split(';');
    var cookiesWithPrefix = {};

    for (var i = 0; i < allCookies.length; i++) {
        var cookie = allCookies[i].trim();

        for (var j = 0; j < arguments.length; j++) {
            var prefix = arguments[j];
            if (cookie.indexOf(prefix) === 0) {
                var cookieParts = cookie.split('=');
                var cookieName = cookieParts[0];
                var cookieValue = cookieParts.slice(1).join('=');
                cookiesWithPrefix[cookieName] = decodeURIComponent(cookieValue);
                break; // Once matched, no need to check other prefixes
            }
        }
    }

    return cookiesWithPrefix;
}
function productAnalytics() {
	var d = {"pr":[6],"omd5":"3b2244fb30dd091ecc31a0c6166b2692"};
	d.u = _ezaq.url;
	d.p = _ezaq.page_view_id;
	d.v = _ezaq.visit_uuid;
	d.ab = _ezaq.ab_test_id;
	d.e = JSON.stringify(_ezaq);
	d.ref = document.referrer;
	d.c = getCookiesWithPrefix('active_template', 'ez', 'lp_');
	if(typeof ez_utmParams !== 'undefined') {
		d.utm = ez_utmParams;
	}

	var dataText = JSON.stringify(d);
	var xhr = new XMLHttpRequest();
	xhr.open('POST/index.html','/ezais/analytics?cb=1', true);
	xhr.onload = function () {
		if (xhr.status!=200) {
            return;
		}

        if(document.readyState !== 'loading') {
            analyticsAddScript(xhr.response);
            return;
        }

        var eventFunc = function() {
            if(document.readyState === 'loading') {
                return;
            }
            document.removeEventListener('readystatechange', eventFunc, false);
            analyticsAddScript(xhr.response);
        };

        document.addEventListener('readystatechange', eventFunc, false);
	};
	xhr.setRequestHeader('Content-Type','text/plain');
	xhr.send(dataText);
}
__ez.queue.addFunc("productAnalytics", "productAnalytics", null, true, ['ezaqBaseReady'], false, false, false, true);
</script><base />
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Form Handling in Flask - Flask tutorial - OverIQ.com</title>

    
    



    <meta name="description" content="Forms are an essential part of any web application but unfortunately working with them is quite difficult. It all starts with the client, first, you …"/>



    <link rel="canonical" href="index.html"/>


<meta property="og:locale" content="en_US"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Form Handling in Flask"/>

    <meta property="og:description" content="Forms are an essential part of any web application but unfortunately working with them is quite difficult. It all starts with the client, first, you …"/>


<meta property="og:url" content="https://overiq.com/flask-101/form-handling-in-flask/"/>
<meta property="og:site_name" content="OverIQ.com"/>


<meta property="article:publisher" content="https://www.facebook.com/OverIQ/"/>



<meta name="twitter:card" content="summary_large_image"/>

    <meta name="twitter:description" content="Forms are an essential part of any web application but unfortunately working with them is quite difficult. It all starts with the client, first, you …"/>


<meta name="twitter:title" content="Form Handling in Flask"/>
<meta name="twitter:site" content="@infoOverIQ"/>

<meta name="twitter:creator" content="@infoOverIQ"/>




    
    
    


    
    
    


    <link rel="alternate" type="application/rss+xml" title="RSS" href="../../feed.xml/index.html"/>
    
    
    <link href="../../../fonts.googleapis.com/cssd2d5.css?family=Open+Sans" rel="stylesheet"/>
    <link rel="stylesheet" href="../../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="icon" href="../../static/wiki/favicon.png" sizes="32x32"/>

    <link rel="stylesheet" href="../../static/CACHE/css/output.db46da465a8b.css" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-125424793-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125424793-1');
    </script>


<script type='text/javascript'>
var ezoTemplate = 'orig_site';
var ezouid = '1';
var ezoFormfactor = '1';
</script><script data-ezscrex="false" type='text/javascript'>
var soc_app_id = '0';
var did = 92771;
var ezdomain = 'overiq.com';
var ezoicSearchable = 1;
</script></head>
<body>

<div class="overiq-header text-center">
    <div class="site-branding">
        <p class="main-title">
            <a href="../../index.html" rel="home">
                OverIQ.com
            </a>
        </p>
    </div>
</div>

<!-- Navigation -->
<nav class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">Home</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                

                <li>
                    <a href="../../blog/index.html">Blog</a>
                </li>
                <li>
                    <a href="../../contact/index.html">Contact</a>
                </li>
                <li>
                    <a href="../../about/index.html">About</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right visible-lg visible-md">
                <li>
                    <a href="../../feed.xml/index.html" title="RSS" target="_blank">
                        <i class="fa fa-rss fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/overiq/" target="_blank" title="Github">
                        <i class="fa fa-github fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://www.facebook.com/OverIQ/" target="_blank" title="Facebook">
                        <i class="fa fa-facebook fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://twitter.com/infoOverIQ" target="_blank" title="Twitter">
                        <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
                    </a>
                </li>

                

            </ul>

            <form action="https://overiq.com/search/" class="navbar-form navbar-left" role="search">

                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search" name="query" value=""/>
                </div>

                <button type="submit" class="btn btn-default">Submit</button>
            </form>

        </div>



        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">

    


    <div class="se-pre-con"></div>

    

    <div class="row">

        
        <div class="main">
            <div class="col-lg-8 col-md-8 col-sm-12">
                

    


    
        <ol class="breadcrumb">

    <li><a href="../../index.html">Home</a></li>

    
        
        <li><a href="../index.html">Flask tutorial</a></li>
        

        

        
    
        

        

        
            <li class="active">Form Handling in Flask</li>
        
    

</ol>
    


<h1>Form Handling in Flask</h1>




    <p><i class="fa fa-calendar" aria-hidden="true"></i>
        Last updated on July 27, 2020
    </p>


<hr/>



<p>Forms are an essential part of any web application but unfortunately working with them is quite difficult. It all starts with the client, first, you have to validate the data on client side, then on the server. If that&#39;s not enough, you have take care of all the security concerns like CSRF, XSS, SQL Injection and so on. All in all, that&#39;s a lot of work. Fortunately, we have an excellent library called WTForms to do the heavy lifting for us. Before we learn more about WTForms, the following section gives you a little tour on how you can go about handling forms in Flask without using any library or package.</p>
<span id="form-handling-the-hard-way" class="anchor-target"></span><h2 class="heading">Form Handling - The Hard Way <a class="header-link" href="#form-handling-the-hard-way">#</a></h2>

<p>Create a new template named <code>login.html</code> with the following code:</p>

<p><strong>flask_app/template/login.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html lang=&#34;en&#34;&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">    &lt;meta charset=&#34;UTF-8&#34;&gt;</span>
<span class="x">    &lt;title&gt;Login&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">message</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
<span class="x">        &lt;p&gt;</span>
<span class="x">            &lt;label for=&#34;username&#34;&gt;Username&lt;/label&gt;</span>
<span class="x">            &lt;input type=&#34;text&#34; name=&#34;username&#34;&gt;</span>
<span class="x">        &lt;/p&gt;</span>
<span class="x">        &lt;p&gt;</span>
<span class="x">            &lt;label for=&#34;password&#34;&gt;Password&lt;/label&gt;</span>
<span class="x">            &lt;input type=&#34;password&#34; name=&#34;password&#34;&gt;</span>
<span class="x">        &lt;/p&gt;</span>
<span class="x">        &lt;p&gt;</span>
<span class="x">            &lt;input type=&#34;submit&#34;&gt;</span>
<span class="x">        &lt;/p&gt;</span>
<span class="x">    &lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Next, add the following code just after the <code>books()</code> view function in <code>main2.py</code>.</p>

<p><strong>flask_app/main2.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span>
</span><span class="c1">#...</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login/&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>  <span class="c1"># access the data inside </span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;root&#39;</span> <span class="ow">and</span> <span class="n">password</span> <span class="o">==</span> <span class="s1">&#39;pass&#39;</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s2">&#34;Correct username and password&#34;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s2">&#34;Wrong username or password&#34;</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;login.html&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Notice the <code>methods</code> argument passed to the <code>route()</code> decorator. By default, the request handler is only called when the <code>request.method</code> is either GET or HEAD. This can be changed by passing list of allowed HTTP methods to the <code>methods</code> keyword argument. From now on, the <code>login()</code> view function<br/>
will be called only when the request to <code>/login/</code> is made using GET, POST or HEAD method. Trying to access <code>/login/</code> URL using any other method will result in HTTP 405 Method Not Allowed error.</p>

<p>In previous lessons, we have discussed that the <code>request</code> object provides information about the current web request. The data submitted via the form is stored in the <code>form</code> attribute of the <code>request</code> object. The <code>request.form</code> is a dictionary like immutable object known as <code>ImmutableMultiDict</code>.</p>

<p>Start the server and visit <a href="http://localhost:5000/login/">http://localhost:5000/login/</a>. You should see a form like this.</p>

<p><img src="../../media/uploads/2018/1/11/login_page-bd3d7b96-d2be-4a59-9d89-3be7206d4d75.png" loading="lazy" alt=""/></p>

<p>The page is requested using the GET request, so the code inside the if block <br/>
in <code>login()</code> view function is skipped.</p>

<p>Submit the form without entering anything and you should see a page like this:</p>

<p><img src="../../media/uploads/2018/1/11/login_form_error_message-127ed6bf-3ad4-4cbe-8bb9-5c8cd830b65e.png" loading="lazy" alt=""/></p>

<p>This time the page was submitted using the POST method, so the code inside the if block is executed. Inside the if body we access username and password and set the value of <code>message</code> variable accordingly. Since we submitted an empty form, an error message is displayed.</p>

<p>Fill the form with correct username and password and hit enter. You should be greeted with <code>&#34;Correct username and password&#34;</code> message as follows:</p>

<p><img src="../../media/uploads/2018/1/11/login_form_success_message-71ec07c2-ec4c-4a6d-b0dc-bc6f137b008e.png" loading="lazy" alt=""/></p>

<p>That&#39;s how we handle forms in Flask. Let&#39;s now shift our attention to the WTForms package.</p>
<span id="wtforms" class="anchor-target"></span><h2 class="heading">WTForms <a class="header-link" href="#wtforms">#</a></h2>

<p>WTForms is a powerful framework-agnostic (framework independent) library written in Python. It allows us to generate HTML forms, validate forms, pre-populate form with data (useful for editing) and so on. In addition to that it also provides CSRF protection. To install WTForms we use Flask-WTF.</p>

<p>Flask-WTF is a Flask Extension which integrates Flask with WTForms. Flask-WTF also provides some additional features like File Uploads, reCAPTCHA, internationalization (i18n) and so on. To install Flask-WTF enter the following command.</p>

<pre><code>(env) overiq@vm:~/flask_app$ pip install flask-wtf</code></pre>
<span id="creating-form-class" class="anchor-target"></span><h2 class="heading">Creating Form class <a class="header-link" href="#creating-form-class">#</a></h2>

<p>We start by defining our forms as Python classes. Every form class must extend the <code>FlaskForm</code> class of the <code>flask_wtf</code> package. The <code>FlaskForm</code> is a wrapper containing some useful methods around the original <code>wtform.Form</code> class, which is the base class for creating forms. Inside the form class, we define form fields as class variables. Form fields are defined by creating an object associated with the field type. The <code>wtform</code> package provides several classes which represent form fields like <code>StringField</code>, <code>PasswordField</code>, <code>SelectField</code>, <code>TextAreaField</code>, <code>SubmitField</code> and so on.</p>

<p>Create a new file <code>forms.py</code> inside <code>flask_app</code> dictionary and add the following code to it.</p>

<p><strong>flask_app/forms.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_wtf</span> <span class="kn">import</span> <span class="n">FlaskForm</span>
<span class="kn">from</span> <span class="nn">wtforms</span> <span class="kn">import</span> <span class="n">StringField</span><span class="p">,</span> <span class="n">SubmitField</span><span class="p">,</span> <span class="n">TextAreaField</span>
<span class="kn">from</span> <span class="nn">wtforms.validators</span> <span class="kn">import</span> <span class="n">DataRequired</span><span class="p">,</span> <span class="n">Email</span>

<span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">FlaskForm</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s2">&#34;Name: &#34;</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">DataRequired</span><span class="p">()])</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s2">&#34;Email: &#34;</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">Email</span><span class="p">()])</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">TextAreaField</span><span class="p">(</span><span class="s2">&#34;Message&#34;</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">DataRequired</span><span class="p">()])</span>
    <span class="n">submit</span> <span class="o">=</span> <span class="n">SubmitField</span><span class="p">(</span><span class="s2">&#34;Submit&#34;</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Here we have defined a form class <code>ContactForm</code> which contains four form fields: <code>name</code>, <code>email</code>, <code>message</code> and <code>submit</code>. These variables will be used to render the form fields as well as set and retrieve data to and from the fields. The form is created using two <code>StringField</code>&#39;s, a <code>TextAreaField</code> and a <code>SubmitField</code>. Everytime we create a field object, we pass some arguments to its constructor function. The first argument is a string containing the label, that will displayed inside the <code>&lt;label&gt;</code> tag when the form field is rendered. The second optional argument is a list of validators passed to the constructor function as keyword arguments. The validators are functions or classes which determines whether the data in the field is valid or not. We can apply more that one validator to a field by separating them by a comma (<code>,</code>). The <code>wtforms.validators</code> module provides some basic validators but we can also create our own validators. In this form, we are using two built-in validators <code>DataRequired</code> and <code>Email</code>.</p>

<p><strong>DataRequired</strong>: It ensures that the user must enter some data in the field.</p>

<p><strong>Email</strong>: It checks whether the entered data is a valid email address or not.</p>

<p>The data in the field will not be accepted until all the validators applied on it are satisfied.</p>

<p><strong>Note:</strong> We have barely scratched the surface of form fields and validators, to view the full list visit <a href="https://wtforms.readthedocs.io/en/master/" rel="nofollow">https://wtforms.readthedocs.io/en/master/</a>.</p>
<span id="setting-up-the-secret-key" class="anchor-target"></span><h2 class="heading">Setting up the Secret Key <a class="header-link" href="#setting-up-the-secret-key">#</a></h2>

<p>By default, Flask-WTF prevents all forms from CSRF attacks. It does this by embedding a token in a hidden <code>&lt;input&gt;</code> element inside the form. The token is then used to verify the authenticity of the request. Before Flask-WTF can generate csrf token, we have to add a secret key. Open <code>main2.py</code> and set the secret key as follows:</p>

<p><strong>flask_app/main2.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">app</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="bp">True</span>
<span class="hll"><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a really really really really long secret key&#39;</span>
</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Here we are using the <code>config</code> attribute of the <code>Flask</code> object. The <code>config</code> attribute works just like a dictionary and it is used to place configuration options for Flask and Flask extensions but you can also place your own configuration if you want to.</p>

<p>The secret key should be a long, hard to guess string. The use of <code>SECRET_KEY</code> is not just limited to creating CSRF tokens, it is used by Flask and many other extensions. The secret key should be kept secret. Rather than storing the secret key in the application, a much better approach would be to store it in an environment variable. We will learn how to do this in later chapters.</p>
<span id="forms-in-the-console" class="anchor-target"></span><h2 class="heading">Forms in the Console <a class="header-link" href="#forms-in-the-console">#</a></h2>

<p>Open Python shell by entering the following command:</p>

<pre><code>(env) overiq@vm:~/flask_app$ python main2.py shell</code></pre>

<p>This will start Python shell inside the application context.</p>

<p>Now import <code>ContactForm</code> class and instantiate a new form object by passing form data to it.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">forms</span> <span class="kn">import</span> <span class="n">ContactForm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">werkzeug.datastructures</span> <span class="kn">import</span> <span class="n">MultiDict</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form1</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">MultiDict</span><span class="p">([(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;jerry&#39;</span><span class="p">),(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;jerry@mail.com&#39;</span><span class="p">)]))</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Notice that we are passing form data as <code>MultiDict</code> object, because the constructor function of <code>wtforms.Form</code> class accepts an argument of type <code>MultiDict</code>. If the form data is not specified while instantiating form object and the form is submitted using POST request, <code>wtforms.Form</code> will use the data from the <code>request.form</code> attribute. Recall that <code>request.form</code> returns an object of type <code>ImmutableMultiDict</code> which is same as <code>MultiDict</code> object but it is immutable.</p>

<p>The <code>validate()</code> method of the form object validates the form. On success, it returns <code>True</code>, otherwise <code>False</code>.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form1</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Our form failed to validate because we haven&#39;t provided any data to the required <code>message</code> field while creating the form object. We can access form errors using the <code>errors</code> attribute of the form object:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form1</span><span class="o">.</span><span class="n">errors</span>
<span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;This field is required.&#39;</span><span class="p">],</span> <span class="s1">&#39;csrf_token&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;The CSRF token is missing.&#39;</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Notice that in addition to error message for the <code>message</code> field, the output also contains error message for the missing csrf token. This is because we don&#39;t have an actual POST request with csrf token in the form data. </p>

<p>We can turn off CSRF protection on the form by passing <code>csrf_enabled=False</code> while instantiating form class. Here is an example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form3</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">MultiDict</span><span class="p">([(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;spike&#39;</span><span class="p">),(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;spike@mail.com&#39;</span><span class="p">)]),</span> <span class="n">csrf_enabled</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form3</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form3</span><span class="o">.</span><span class="n">errors</span>
<span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;This field is required.&#39;</span><span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>As expected, now we are only getting error for the missing <code>message</code> field. Let&#39;s create another form object but this time we will supply valid data to all the form fields.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form4</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">MultiDict</span><span class="p">([(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;jerry&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;jerry@mail.com&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s2">&#34;hello tom&#34;</span><span class="p">)]),</span> <span class="n">csrf_enabled</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form4</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form4</span><span class="o">.</span><span class="n">errors</span>
<span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The form validation succeeds this time.</p>

<p>Our next logical step would be to render the form which is discussed next.</p>
<span id="rendering-form" class="anchor-target"></span><h2 class="heading">Rendering Form <a class="header-link" href="#rendering-form">#</a></h2>

<p>There are two ways to render form fields:</p>

<ol>
<li>Render fields one by one.</li>
<li>Render fields using a for loop.</li>
</ol>
<span id="rendering-fields-one-by-one" class="anchor-target"></span><h3 class="heading">Rendering fields one by one <a class="header-link" href="#rendering-fields-one-by-one">#</a></h3>

<p>In the templates, once we have access to form instance, we can use the field names to render fields, label, and errors as follows:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span><span class="c1"># render the label tag associated with field #}</span>
<span class="p">{{</span> <span class="n">form</span><span class="o">.</span><span class="n">field_name</span><span class="o">.</span><span class="n">label</span><span class="p">()</span>  <span class="p">}}</span>  

<span class="p">{</span><span class="c1"># render the field itself #}</span>
<span class="p">{{</span> <span class="n">form</span><span class="o">.</span><span class="n">field_name</span><span class="p">()</span>  <span class="p">}}</span>  

<span class="p">{</span><span class="c1"># render the validation errors associated with the field #}</span>
<span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">form</span><span class="o">.</span><span class="n">field_name</span><span class="o">.</span><span class="n">errors</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="n">error</span> <span class="p">}}</span>  
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Let&#39;s test this inside the console:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">forms</span> <span class="kn">import</span> <span class="n">ContactForm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Here we have instantiated the form object without any request data, this is usually the case when the form is displayed for the first time using the GET request.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.name.label() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;label for=&#34;name&#34;&gt;Name: &lt;/label&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.name() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;input id=&#34;name&#34; name=&#34;name&#34; type=&#34;text&#34; value=&#34;&#34;&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.email.label() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;label for=&#34;email&#34;&gt;Email: &lt;/label&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.email() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;input id=&#34;email&#34; name=&#34;email&#34; type=&#34;text&#34; value=&#34;&#34;&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.message.label() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;label for=&#34;message&#34;&gt;Message&lt;/label&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.message() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;textarea id=&#34;message&#34; name=&#34;message&#34;&gt;&lt;/textarea&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.submit() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;input id=&#34;submit&#34; name=&#34;submit&#34; type=&#34;submit&#34; value=&#34;Submit&#34;&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Since the form is displayed for the first time, none of its fields will have any validation errors. The following code demonstrates this:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{</span><span class="si">% f</span><span class="s2">or error in form.name.errors %}{{ error }}{</span><span class="si">% e</span><span class="s2">ndfor %}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{</span><span class="si">% f</span><span class="s2">or error in form.email.errors %}{{ error }}{</span><span class="si">% e</span><span class="s2">ndfor %}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{</span><span class="si">% f</span><span class="s2">or error in form.message.errors %}{{ error }}{</span><span class="si">% e</span><span class="s2">ndfor %}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Instead of displaying validation errors per field you can use <code>form.errors</code> to access all the validation errors associated with the form. The <code>forms.errors</code> is commonly used to display validation errors at the top of the form.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{</span><span class="si">% f</span><span class="s2">or error in form.errors %}{{ error }}{</span><span class="si">% e</span><span class="s2">ndfor %}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>While rendering fields and labels, we can also supply additional keyword arguments which will be injected in the HTML as key value pairs. For example:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s1">&#39;{{ form.name(class=&#34;input&#34;, id=&#34;simple-input&#34;) }}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;input class=&#34;input&#34; id=&#34;simple-input&#34; name=&#34;name&#34; type=&#34;text&#34; value=&#34;&#34;&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s1">&#39;{{ form.name.label(class=&#34;lbl&#34;) }}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;label class=&#34;lbl&#34; for=&#34;name&#34;&gt;Name: &lt;/label&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Now suppose our form has been submitted. Let&#39; try rendering fields this time and see what happens.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">werkzeug.datastructures</span> <span class="kn">import</span> <span class="n">MultiDict</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">MultiDict</span><span class="p">([(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;spike&#39;</span><span class="p">),(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;spike@mail.com&#39;</span><span class="p">)]))</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.name() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;input id=&#34;name&#34; name=&#34;name&#34; type=&#34;text&#34; value=&#34;spike&#34;&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.email() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;input id=&#34;email&#34; name=&#34;email&#34; type=&#34;text&#34; value=&#34;spike@mail.com&#34;&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.message() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;textarea id=&#34;message&#34; name=&#34;message&#34;&gt;&lt;/textarea&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Notice that the <code>value</code> attribute of <code>name</code> and <code>email</code> field is filled with the data. However, the <code>&lt;textarea&gt;</code> element for the <code>message</code> field is empty since we didn&#39;t supply any data to it. We can access the validation error for the <code>message</code> field as follows:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{</span><span class="si">% f</span><span class="s2">or error in form.message.errors %}{{ error }}{</span><span class="si">% e</span><span class="s2">ndfor %}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;This field is required.&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Alternatively, you can also use <code>form.errors</code> to loop through all the validation errors at once.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span><span class="s2">&#34;&#34;&#34;</span><span class="se">\</span>
<span class="s2">... {</span><span class="si">% f</span><span class="s2">or field_name in form.errors %}</span><span class="se">\</span>
<span class="s2">...         {</span><span class="si">% f</span><span class="s2">or error in form.errors[field_name] %}</span><span class="se">\</span>
<span class="s2">...             &lt;li&gt;{{ field_name }}: {{ error }}&lt;/li&gt;</span>
<span class="s2">...         {</span><span class="si">% e</span><span class="s2">ndfor %}</span><span class="se">\</span>
<span class="s2">... {</span><span class="si">% e</span><span class="s2">ndfor %}</span><span class="se">\</span>
<span class="s2">... &#34;&#34;&#34;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;li&gt;csrf_token: The CSRF token is missing.&lt;/li&gt;</span><span class="se">\n</span>
<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">message</span><span class="p">:</span> <span class="n">This</span> <span class="n">field</span> <span class="ow">is</span> <span class="n">required</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\<span class="n">n</span><span class="s1">&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Notice that we are getting missing csrf token error because the request the was submitted without csrf token. We can render the csrf field just like a normal field as follows:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&#34;{{ form.csrf_token() }}&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="s1">&#39;&lt;input id=&#34;csrf_token&#34; name=&#34;csrf_token&#34; type=&#34;hidden&#34; value=&#34;IjZjOTBkOWM4ZmQ0M</span>
<span class="n">GMzZTY3NDc3ZTNiZDIxZTFjNDAzMGU1YzEwOTYi</span><span class="o">.</span><span class="n">DQlFlA</span><span class="o">.</span><span class="n">GQ</span><span class="o">-</span><span class="n">PrxsCJkQfoJ5k6i5YfZMzC7k</span><span class="s2">&#34;&gt;&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Rendering field one by one can be cumbersome if you have quite a few form fields. For such cases, you can use for loop to render the fields.</p>
<span id="rendering-fields-using-loop" class="anchor-target"></span><h3 class="heading">Rendering fields using loop <a class="header-link" href="#rendering-fields-using-loop">#</a></h3>

<p>The following shell session demonstrates how we can render fields using the for loop.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;</span><span class="se">\</span>
<span class="s2">...     &lt;div&gt;</span>
<span class="s2">...         {{ form.csrf_token }}</span>
<span class="s2">...     &lt;/div&gt;</span>
<span class="s2">... {</span><span class="si">% f</span><span class="s2">or field in form if field.name != &#39;csrf_token&#39; %}</span>
<span class="s2">...     &lt;div&gt;</span>
<span class="s2">...         {{ field.label() }}</span>
<span class="s2">...         {{ field() }}</span>
<span class="s2">...         {</span><span class="si">% f</span><span class="s2">or error in field.errors %}</span>
<span class="s2">...             &lt;div class=&#34;error&#34;&gt;{{ error }}&lt;/div&gt;</span>
<span class="s2">...         {</span><span class="si">% e</span><span class="s2">ndfor %}</span>
<span class="s2">...     &lt;/div&gt;</span>
<span class="s2">... {</span><span class="si">% e</span><span class="s2">ndfor %}</span>
<span class="s2">... &#34;&#34;&#34;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">))</span>
    <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&#34;csrf_token&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;csrf_token&#34;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&#34;hidden&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&#34;IjZjOTBkOW</span>
<span class="n">M4ZmQ0MGMzZTY3NDc3ZTNiZDIxZTFjNDAzMGU1YzEwOTYi</span><span class="o">.</span><span class="n">DQlFlA</span><span class="o">.</span><span class="n">GQ</span><span class="o">-</span><span class="n">PrxsCJkQfoJ5k6i5YfZMzC7</span>
<span class="n">k</span><span class="s2">&#34;&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&#34;name&#34;</span><span class="o">&gt;</span><span class="n">Name</span><span class="p">:</span> <span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&#34;name&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;name&#34;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&#34;spike&#34;</span><span class="o">&gt;</span>

    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&#34;email&#34;</span><span class="o">&gt;</span><span class="n">Email</span><span class="p">:</span> <span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&#34;email&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;email&#34;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&#34;text&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&#34;spike@mail.com&#34;</span><span class="o">&gt;</span>

    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&#34;message&#34;</span><span class="o">&gt;</span><span class="n">Message</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">textarea</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&#34;message&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;message&#34;</span><span class="o">&gt;&lt;/</span><span class="n">textarea</span><span class="o">&gt;</span>

            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;error&#34;</span><span class="o">&gt;</span><span class="n">This</span> <span class="n">field</span> <span class="ow">is</span> <span class="n">required</span><span class="o">.&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&#34;submit&#34;</span><span class="o">&gt;</span><span class="n">Submit</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&#34;submit&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;submit&#34;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&#34;submit&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&#34;Submit&#34;</span><span class="o">&gt;</span>

    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>It is important to note that no matter which method you use you have to manually add <code>&lt;form&gt;</code> tag to wrap the form fields.</p>

<p>Now we know how to create, validate and render forms. Let&#39;s use this knowledge to create some real forms.</p>

<p>Start by creating a new template <code>contact.html</code> with the following code:</p>

<p><strong>flask_app/templates/contact.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html lang=&#34;en&#34;&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">    &lt;meta charset=&#34;UTF-8&#34;&gt;</span>
<span class="x">    &lt;title&gt;Title&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>

<span class="x">    </span><span class="cp">{{</span> <span class="nv">form.csrf_token</span><span class="o">()</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">field</span> <span class="k">in</span> <span class="nv">form</span> <span class="k">if</span> <span class="nv">field.name</span> <span class="o">!=</span> <span class="s2">&#34;csrf_token&#34;</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">field.label</span><span class="o">()</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">        &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">field</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">error</span> <span class="k">in</span> <span class="nv">field.errors</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{{</span> <span class="nv">error</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;/p&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The only missing piece of the puzzle is the view function which we will create next.</p>
<span id="handing-form-submission" class="anchor-target"></span><h2 class="heading">Handing Form Submission <a class="header-link" href="#handing-form-submission">#</a></h2>

<p>Open <code>main2.py</code> and add the following code just after the <code>login()</code> view function.</p>

<p><strong>flask_app/main2.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>
</span><span class="kn">from</span> <span class="nn">flask_script</span> <span class="kn">import</span> <span class="n">Manager</span><span class="p">,</span> <span class="n">Command</span><span class="p">,</span> <span class="n">Shell</span>
<span class="hll"><span class="kn">from</span> <span class="nn">forms</span> <span class="kn">import</span> <span class="n">ContactForm</span>
</span><span class="c1">#...</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/contact/&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">contact</span><span class="p">():</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">validate_on_submit</span><span class="p">():</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">data</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">email</span><span class="o">.</span><span class="n">data</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="c1"># db logic goes here</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">Data received. Now redirecting ...&#34;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;contact.html&#39;</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>In line 7, we are creating a form object. In line 8, we are are checking the return value of <code>validate_on_submit()</code> method to execute some code inside the body of the if statement. </p>

<p>Why we are using <code>validate_on_submit()</code> instead of <code>validate()</code> just like we did in the console ? </p>

<p>The <code>validate()</code> method simply checks whether the form data is valid or not, it doesn&#39;t check whether the request is submitted using the POST method or not. That means if use we <code>validate()</code> method then a GET request to <code>/contact/</code> would trigger the form validation and users will see validation errors in the form. In general, we trigger validation routines only when the data is submitted using the POST request. The <code>validate_on_submit()</code> method returns <code>True</code> when the form is submitted using the POST request and data is valid. Otherwise <code>False</code>. The <code>validate_on_submit()</code> method internally calls the <code>validate()</code> method. Also, notice that we are not passing any data while instantiating the form object because when the form is submitted using the POST request WTForms reads the form data from the <code>request.form</code> attribute.</p>

<p>The form fields defined in the form class becomes attribute to the form object. To access field data we use the <code>data</code> attribute of the form field:</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">form</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">data</span>   <span class="c1"># access the data in the name field.</span>
<span class="n">form</span><span class="o">.</span><span class="n">email</span><span class="o">.</span><span class="n">data</span>   <span class="c1"># access the data in the email field.</span>
</pre></div>
</td></tr></tbody></table></div>
<p>To access all the form data at once use the <code>data</code> attribute of the form object:</p>
<div class="codeblock language-python"><div class="highlight"><pre><span></span><span class="n">form</span><span class="o">.</span><span class="n">data</span>   <span class="c1"># access all the form data</span>
</pre></div>
</div>
<p>When you visit URL <code>/contact/</code> using the GET request, the <code>validate_on_submit()</code> method returns <code>False</code>, the code inside the if body is skipped and the user is displayed an empty HTML form.</p>

<p>When the form is submitted using the POST request, the <code>validate_on_submit()</code> returns <code>True</code> assuming the data is valid. The <code>print()</code> calls inside the if body prints the data entered by the user and the <code>redirect()</code> function redirects the user to the <code>/contact/</code> page. On the other hand if <code>validate_on_submit()</code> returns <code>False</code> execution of statements inside the if body is skipped and form with validation errors is displayed.</p>

<p>Start the server, if not already running and visit <a href="http://localhost:5000/contact/">http://localhost:5000/contact/</a>. You should see Contact Form like this:</p>

<p><img src="../../media/uploads/2018/1/11/contact_form-40dbc56c-d9cd-46bc-9484-9b66df9e9739.png" loading="lazy" alt=""/></p>

<p>Without entering anything hit submit and you will be displayed validation errors like this:</p>

<p><img src="../../media/uploads/2018/1/11/validation_errors_in_contact_form-7ba6605c-2140-417e-9f1e-d2cb986f3067.png" loading="lazy" alt=""/></p>

<p>Enter some data in Name and Message field and invalid data in the Email field and submit the form again.</p>

<p><img src="../../media/uploads/2018/1/11/pre-populating_field_data_from_the_previous_request-6f22fa84-ad6e-498c-b868-4ce9c18a6c67.png" loading="lazy" alt=""/></p>

<p>Notice that all the fields still contains data from the previous request.</p>

<p>Enter a valid email in the Email field and hit submit. This time our validation will succeed and inside the shell running the server you should see output like this:</p>

<pre><code>Spike
spike@gmail.com
A Message

Data received. Now redirecting ...</code></pre>

<p>After displaying submitted data in the shell the view function will redirect the user to <code>/contact/</code> URL again. At this point, you should see an empty form without any validation errors as if you visited <code>/contact/</code> URL using the GET request for the first time.</p>

<p>It is good practice to display some feedback to the user after successful form submission. In Flask, we create such feedback using flash messages which is discussed next.</p>
<span id="flash-messages" class="anchor-target"></span><h2 class="heading">Flash Messages <a class="header-link" href="#flash-messages">#</a></h2>

<p>Flash messages is another one of those functions which depend upon the secret key. The secret key is necessary because behind the scenes flash messages are stored in the sessions. We will learn what sessions are and how to use them in depth in lesson <a href="../sessions-in-flask/index.html">Session in Flask</a>. Since we have already set the secret key, we are ready to go.</p>

<p>To flash messages, we use <code>flash()</code> function from the <code>flask</code> package. The <code>flash()</code> function accepts two arguments, the message to flash and an optional category. The category indicates the type of message such as <em>success</em>, <em>error</em>, <em>warning</em> etc. The category can be used in the template to determine the type of alert message to display. </p>

<p>Open <code>main2.py</code> and add <code>flash(&#34;Message Received&#34;, &#34;success&#34;)</code> just before the <code>redirect()</code> call in the <code>contact()</code> view function as follows:</p>

<p><strong>flask_app/main2.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span><span class="p">,</span> <span class="n">flash</span>
</span><span class="c1">#...</span>
        <span class="c1"># db logic goes here</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">Data received. Now redirecting ...&#34;</span><span class="p">)</span>
<span class="hll">        <span class="n">flash</span><span class="p">(</span><span class="s2">&#34;Message Received&#34;</span><span class="p">,</span> <span class="s2">&#34;success&#34;</span><span class="p">)</span>
</span>        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;contact.html&#39;</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The message set by the <code>flash()</code> function will only be available for the subsequent request and then it will be deleted.</p>

<p>We are now setting the flash message, to display it, we have to modify our template too.</p>

<p>Open <code>contact.html</code> and modify the file as follows:</p>

<p><strong>flask_app/templates/contact.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="x">&lt;body&gt;</span>

<span class="hll"><span class="cp">{%</span> <span class="k">for</span> <span class="nv">category</span><span class="o">,</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">get_flashed_messages</span><span class="o">(</span><span class="nv">with_categories</span><span class="o">=</span><span class="kp">true</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
</span><span class="hll"><span class="x">    &lt;p class=&#34;</span><span class="cp">{{</span> <span class="nv">category</span> <span class="cp">}}</span><span class="x">&#34;&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
</span><span class="hll"><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</span>
<span class="x">&lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Jinja provides a function called <code>get_flashed_messages()</code> which returns a list of pending flash messages without the category. To get the flash message along with the category pass <code>with_categories=True</code> while calling <code>get_flashed_messages()</code>. When <code>with_categories</code> is set to True, <code>get_flashed_messages()</code> returns a list of tuples of the form <code>(category, message)</code>.</p>

<p>After making these changes visit <a href="http://localhost:5000/contact/">http://localhost:5000/contact/</a> again. Fill the form and hit submit. This time you should get a success message at top of the form as follows:</p>

<p><img src="../../media/uploads/2018/1/11/flash_message-f7d879e7-b3de-407a-bffc-634cbfd0f79e.png" loading="lazy" alt=""/></p>



    



        <nav aria-label="pagination">
            <ul class="pager">
                
                    <li class="previous">
                        <a href="../extending-flask-with-flask-script/index.html" title="Extending Flask with Flask-Script">
                            <span class="fa fa-arrow-left" aria-hidden="true"></span>
                            Extending Flask with Flask-Script
                        </a>
                    </li>
                

                
                    <li class="next">
                        <a href="../cookies-in-flask/index.html" title="Cookies in Flask">
                            Cookies in Flask
                            <span class="fa fa-arrow-right" aria-hidden="true"></span>
                        </a>
                    </li>
                
            </ul>
        </nav>







    <hr/>
    <div id="disqus_thread">
    <p style="margin-bottom: 10px" class="text-center">
        <a href="#" class=" btn btn-primary comments-holder" onclick="loadDisqus();return false;">
            <i class="fa fa-comments" aria-hidden="true"></i> Load Comments
        </a>
    </p>
    </div>
    <hr/>
    <script>
        var is_disqus_loaded = false;
        function loadDisqus() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '../../../overiqcom.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        };
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>







            </div>
        </div>


        <div class="sidebar">
        
            <div class="col-lg-4 col-md-4 col-sm-12">
                

    
        
    <div class="well">
        <h4>Flask tutorial</h4>
        <ul>
            
                <li><a href="../intro-to-flask/index.html">Intro to Flask</a></li>
            
                <li><a href="../installing-flask/index.html">Installing Flask</a></li>
            
                <li><a href="../flask-basics/index.html">Flask Basics</a></li>
            
                <li><a href="../contexts-in-flask/index.html">Contexts in Flask</a></li>
            
                <li><a href="../custom-response-and-hook-points-in-flask/index.html">Custom Response and Hook Points in Flask</a></li>
            
                <li><a href="../templates-in-flask/index.html">Templates in Flask</a></li>
            
                <li><a href="../basics-of-jinja-template-language/index.html">Basics of Jinja Template Language</a></li>
            
                <li><a href="../creating-urls-in-flask/index.html">Creating URLs in Flask</a></li>
            
                <li><a href="../serving-static-files-in-flask/index.html">Serving Static Files in Flask</a></li>
            
                <li><a href="../extending-flask-with-flask-script/index.html">Extending Flask with Flask-Script</a></li>
            
                <li><a href="index.html">Form Handling in Flask</a></li>
            
                <li><a href="../cookies-in-flask/index.html">Cookies in Flask</a></li>
            
                <li><a href="../sessions-in-flask/index.html">Sessions in Flask</a></li>
            
                <li><a href="../database-modelling-in-flask/index.html">Database Modelling in Flask</a></li>
            
                <li><a href="../sqlalchemy-orm-basics/index.html">SQLAlchemy ORM Basics</a></li>
            
                <li><a href="../database-migrations-with-alembic/index.html">Database Migrations with Alembic</a></li>
            
                <li><a href="../sending-email-in-flask/index.html">Sending Email in Flask</a></li>
            
                <li><a href="../authentication-in-flask/index.html">Authentication in Flask</a></li>
            
                <li><a href="../application-structure-and-blueprint-in-flask/index.html">Application Structure and Blueprint in Flask</a></li>
            
        </ul>
    </div>

    

    
        

<div class="well">
    <h4>Recent Posts</h4>
    <ul>
        
            <li><a href="../../machine-learning-experts-you-should-be-following-online/index.html">Machine Learning Experts You Should Be Following Online</a></li>
        
            <li><a href="../../4-ways-to-prepare-for-the-ap-computer-science-a-exam/index.html">4 Ways to Prepare for the AP Computer Science A Exam</a></li>
        
            <li><a href="../../finance-assignment-online-help-for-the-busy-and-tired-students-get-help-from-experts/index.html">Finance Assignment Online Help for the Busy and Tired Students: Get Help from Experts</a></li>
        
            <li><a href="../../top-9-machine-learning-algorithms-for-data-scientists/index.html">Top 9 Machine Learning Algorithms for Data Scientists</a></li>
        
            <li><a href="../../data-science-learning-path-or-steps-to-become-a-data-scientist-final/index.html">Data Science Learning Path or Steps to become a data scientist Final</a></li>
        
            <li><a href="../../enable-edit-button-in-shutter-in-linux-mint-19-and-ubuntu-18-04/index.html">Enable Edit Button in Shutter In Linux Mint 19 and Ubuntu 18.04</a></li>
        
            <li><a href="../../python-3-time-module/index.html">Python 3 time module</a></li>
        
            <li><a href="../../pygments-tutorial/index.html">Pygments Tutorial</a></li>
        
            <li><a href="../../how-to-use-virtualenv/index.html">How to use Virtualenv?</a></li>
        
            <li><a href="../../installing-mysql-windows-linux-and-mac/index.html">Installing MySQL (Windows, Linux and Mac)</a></li>
        
            <li><a href="../../what-is-if-__name__-__main__-in-python/index.html">What is if __name__ == &#39;__main__&#39;  in Python ?</a></li>
        
            <li><a href="../../installing-goaccess-a-real-time-web-log-analyzer/index.html">Installing GoAccess (A Real-time web log analyzer)</a></li>
        
            <li><a href="../../installing-isso/index.html">Installing Isso</a></li>
        
    </ul>
</div>

<!-- Blog Search Well -->





















    



            </div>
        </div>
    </div>



    

</div>

<!-- Footer -->
<footer class="overiq-footer">
    <div class="container">
        <div class="row">

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../terms-of-use/index.html">Terms</a></li>
                    <li><a href="../../privacy-policy/index.html">Privacy Policy</a></li>
                    <li><a href="../../sitemap.xml/index.html">Sitemap</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../contact/index.html">Contact</a></li>
                    <li><a href="../../blog/index.html">Blog</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="https://www.facebook.com/OverIQ/">Facebook</a></li>
                    <li><a href="https://twitter.com/infoOverIQ">Twitter</a></li>
                    <li><a href="https://github.com/overiq">Github</a></li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../c-programming-101/index.html">C Tutorial</a></li>
                    <li><a href="../../python-101/index.html">Python Tutorial</a></li>
                    <li><a href="../../django-1-11/index.html">Django Tutorial</a></li>
                    <li><a href="../index.html">Flask Tutorial</a></li>
                    <li><a href="../../mysql-connector-python-101/index.html">MySQL Connector/Python Tutorial</a></li>
                    <li><a href="../../sqlalchemy-101/index.html">SQLAlchemy Tutorial</a></li>
                    <li><a href="../../c-examples/index.html">C Programming Examples</a></li>
                </ul>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <div class="row text-center">
            <p>© 2025 OverIQ.com</p>
            <small><a href="#">Back to top</a></small>
        </div>

        <!-- /.row -->
    </div>
</footer>



<script type="text/javascript" src="../../static/CACHE/js/output.2e0ff002c1a4.js"></script>




<script async="" src="../../../cdn.jsdelivr.net/npm/cookieconsent%403/build/cookieconsent.min.js" data-cfasync="false"></script>

<script>

    
    window.addEventListener('load', function () {
        window.cookieconsent.initialise({
            "palette": {
                "popup": {
                    "background": "#5ca9e0",
                    "text": "#ffffff"
                },
                "button": {
                    "background": "#fff",
                    "text": "#237afc"
                }
            },
            "theme": "classic",
            "position": "top",
            "static": true,
            "content": {
                "href": "https://overiq.com/privacy-policy/"
            }
        });
    });


</script>

<script src="../../../polyfill.io/v3/polyfill.min1162.js?features=es6"></script>
<script id="MathJax-script" defer="" src="../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml.js"></script>

<script async="" type="text/javascript" src="../../../cdn.carbonads.com/carbonfbdb.js?serve=CE7DC53E&amp;placement=overiqcom" id="_carbonads_js"></script>





<script data-cfasync="false">function _emitEzConsentEvent(){var customEvent=new CustomEvent("ezConsentEvent",{detail:{ezTcfConsent:window.ezTcfConsent},bubbles:true,cancelable:true,});document.dispatchEvent(customEvent);}
(function(window,document){function _setAllEzConsentTrue(){window.ezTcfConsent.loaded=true;window.ezTcfConsent.store_info=true;window.ezTcfConsent.develop_and_improve_services=true;window.ezTcfConsent.measure_ad_performance=true;window.ezTcfConsent.measure_content_performance=true;window.ezTcfConsent.select_basic_ads=true;window.ezTcfConsent.create_ad_profile=true;window.ezTcfConsent.select_personalized_ads=true;window.ezTcfConsent.create_content_profile=true;window.ezTcfConsent.select_personalized_content=true;window.ezTcfConsent.understand_audiences=true;window.ezTcfConsent.use_limited_data_to_select_content=true;window.ezTcfConsent.select_personalized_content=true;}
function _clearEzConsentCookie(){document.cookie="ezCMPCookieConsent=tcf2;Domain=.overiq.com;Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT";}
_clearEzConsentCookie();if(typeof window.__tcfapi!=="undefined"){window.ezgconsent=false;var amazonHasRun=false;function _ezAllowed(tcdata,purpose){return(tcdata.purpose.consents[purpose]||tcdata.purpose.legitimateInterests[purpose]);}
function _handleConsentDecision(tcdata){window.ezTcfConsent.loaded=true;if(!tcdata.vendor.consents["347"]&&!tcdata.vendor.legitimateInterests["347"]){window._emitEzConsentEvent();return;}
window.ezTcfConsent.store_info=_ezAllowed(tcdata,"1");window.ezTcfConsent.develop_and_improve_services=_ezAllowed(tcdata,"10");window.ezTcfConsent.measure_content_performance=_ezAllowed(tcdata,"8");window.ezTcfConsent.select_basic_ads=_ezAllowed(tcdata,"2");window.ezTcfConsent.create_ad_profile=_ezAllowed(tcdata,"3");window.ezTcfConsent.select_personalized_ads=_ezAllowed(tcdata,"4");window.ezTcfConsent.create_content_profile=_ezAllowed(tcdata,"5");window.ezTcfConsent.measure_ad_performance=_ezAllowed(tcdata,"7");window.ezTcfConsent.use_limited_data_to_select_content=_ezAllowed(tcdata,"11");window.ezTcfConsent.select_personalized_content=_ezAllowed(tcdata,"6");window.ezTcfConsent.understand_audiences=_ezAllowed(tcdata,"9");window._emitEzConsentEvent();}
function _handleGoogleConsentV2(tcdata){if(!tcdata||!tcdata.purpose||!tcdata.purpose.consents){return;}
var googConsentV2={};if(tcdata.purpose.consents[1]){googConsentV2.ad_storage='granted';googConsentV2.analytics_storage='granted';}
if(tcdata.purpose.consents[3]&&tcdata.purpose.consents[4]){googConsentV2.ad_personalization='granted';}
if(tcdata.purpose.consents[1]&&tcdata.purpose.consents[7]){googConsentV2.ad_user_data='granted';}
if(googConsentV2.analytics_storage=='denied'){gtag('set','url_passthrough',true);}
gtag('consent','update',googConsentV2);}
__tcfapi("addEventListener",2,function(tcdata,success){if(!success||!tcdata){window._emitEzConsentEvent();return;}
if(!tcdata.gdprApplies){_setAllEzConsentTrue();window._emitEzConsentEvent();return;}
if(tcdata.eventStatus==="useractioncomplete"||tcdata.eventStatus==="tcloaded"){if(typeof gtag!='undefined'){_handleGoogleConsentV2(tcdata);}
_handleConsentDecision(tcdata);if(tcdata.purpose.consents["1"]===true&&tcdata.vendor.consents["755"]!==false){window.ezgconsent=true;(adsbygoogle=window.adsbygoogle||[]).pauseAdRequests=0;}
if(window.__ezconsent){__ezconsent.setEzoicConsentSettings(ezConsentCategories);}
__tcfapi("removeEventListener",2,function(success){return null;},tcdata.listenerId);if(!(tcdata.purpose.consents["1"]===true&&_ezAllowed(tcdata,"2")&&_ezAllowed(tcdata,"3")&&_ezAllowed(tcdata,"4"))){if(typeof __ez=="object"&&typeof __ez.bit=="object"&&typeof window["_ezaq"]=="object"&&typeof window["_ezaq"]["page_view_id"]=="string"){__ez.bit.Add(window["_ezaq"]["page_view_id"],[new __ezDotData("non_personalized_ads",true),]);}}}});}else{_setAllEzConsentTrue();window._emitEzConsentEvent();}})(window,document);</script></body>
<!-- Mirrored from overiq.com/flask-101/form-handling-in-flask/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:10:46 GMT -->
</html>