<!DOCTYPE html><html lang="en">
<!-- Mirrored from overiq.com/django-1-10/revisiting-cadmin-app/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:06:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="utf-8"/>
<script>var __ezHttpConsent={setByCat:function(src,tagType,attributes,category,force){var setScript=function(){if(force||window.ezTcfConsent[category]){var scriptElement=document.createElement(tagType);scriptElement.src=src;attributes.forEach(function(attr){for(var key in attr){if(attr.hasOwnProperty(key)){scriptElement.setAttribute(key,attr[key]);}}});var firstScript=document.getElementsByTagName(tagType)[0];firstScript.parentNode.insertBefore(scriptElement,firstScript);}};if(force||(window.ezTcfConsent&&window.ezTcfConsent.loaded)){setScript();}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){setScript();}else{console.error("cannot get ez consent data");force=true;setScript();}});}else{force=true;setScript();console.error("getEzConsentData is not a function");}},};</script>
<script>var ezTcfConsent=window.ezTcfConsent?window.ezTcfConsent:{loaded:false,store_info:false,develop_and_improve_services:false,measure_ad_performance:false,measure_content_performance:false,select_basic_ads:false,create_ad_profile:false,select_personalized_ads:false,create_content_profile:false,select_personalized_content:false,understand_audiences:false,use_limited_data_to_select_content:false,};function getEzConsentData(){return new Promise(function(resolve){document.addEventListener("ezConsentEvent",function(event){var ezTcfConsent=event.detail.ezTcfConsent;resolve(ezTcfConsent);});});}</script>
<script>if(typeof _setEzCookies!=='function'){function _setEzCookies(ezConsentData){var cookies=window.ezCookieQueue;for(var i=0;i<cookies.length;i++){var cookie=cookies[i];if(ezConsentData&&ezConsentData.loaded&&ezConsentData[cookie.tcfCategory]){document.cookie=cookie.name+"="+cookie.value;}}}}
window.ezCookieQueue=window.ezCookieQueue||[];if(typeof addEzCookies!=='function'){function addEzCookies(arr){window.ezCookieQueue=[...window.ezCookieQueue,...arr];}}
addEzCookies([]);if(window.ezTcfConsent&&window.ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else if(typeof getEzConsentData==="function"){getEzConsentData().then(function(ezTcfConsent){if(ezTcfConsent&&ezTcfConsent.loaded){_setEzCookies(window.ezTcfConsent);}else{console.error("cannot get ez consent data");_setEzCookies(window.ezTcfConsent);}});}else{console.error("getEzConsentData is not a function");_setEzCookies(window.ezTcfConsent);}</script>
<script data-ezscrex='false' data-cfasync='false' data-pagespeed-no-defer>var __ez=__ez||{};__ez.stms=Date.now();__ez.evt={};__ez.script={};__ez.ck=__ez.ck||{};__ez.template={};__ez.template.isOrig=true;window.__ezScriptHost="//www.ezojs.com";__ez.queue=__ez.queue||function(){var e=0,i=0,t=[],n=!1,o=[],r=[],s=!0,a=function(e,i,n,o,r,s,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,d=this;this.name=e,this.funcName=i,this.parameters=null===n?null:w(n)?n:[n],this.isBlock=o,this.blockedBy=r,this.deleteWhenComplete=s,this.isError=!1,this.isComplete=!1,this.isInitialized=!1,this.proceedIfError=a,this.fWindow=l,this.isTimeDelay=!1,this.process=function(){f("... func = "+e),d.isInitialized=!0,d.isComplete=!0,f("... func.apply: "+e);var i=d.funcName.split("."),n=null,o=this.fWindow||window;i.length>3||(n=3===i.length?o[i[0]][i[1]][i[2]]:2===i.length?o[i[0]][i[1]]:o[d.funcName]),null!=n&&n.apply(null,this.parameters),!0===d.deleteWhenComplete&&delete t[e],!0===d.isBlock&&(f("----- F'D: "+d.name),m())}},l=function(e,i,t,n,o,r,s){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:window,l=this;this.name=e,this.path=i,this.async=o,this.defer=r,this.isBlock=t,this.blockedBy=n,this.isInitialized=!1,this.isError=!1,this.isComplete=!1,this.proceedIfError=s,this.fWindow=a,this.isTimeDelay=!1,this.isPath=function(e){return"/"===e[0]&&"/"!==e[1]},this.getSrc=function(e){return void 0!==window.__ezScriptHost&&this.isPath(e)&&"banger.js"!==this.name?window.__ezScriptHost+e:e},this.process=function(){l.isInitialized=!0,f("... file = "+e);var i=this.fWindow?this.fWindow.document:document,t=i.createElement("script");t.src=this.getSrc(this.path),!0===o?t.async=!0:!0===r&&(t.defer=!0),t.onerror=function(){var e={url:window.location.href,name:l.name,path:l.path,user_agent:window.navigator.userAgent};"undefined"!=typeof _ezaq&&(e.pageview_id=_ezaq.page_view_id);var i=encodeURIComponent(JSON.stringify(e)),t=new XMLHttpRequest;t.open("GET/index.html","//g.ezoic.net/ezqlog?d="+i,!0),t.send(),f("----- ERR'D: "+l.name),l.isError=!0,!0===l.isBlock&&m()},t.onreadystatechange=t.onload=function(){var e=t.readyState;f("----- F'D: "+l.name),e&&!/loaded|complete/.test(e)||(l.isComplete=!0,!0===l.isBlock&&m())},i.getElementsByTagName("head")[0].appendChild(t)}},d=function(e,i){this.name=e,this.path="",this.async=!1,this.defer=!1,this.isBlock=!1,this.blockedBy=[],this.isInitialized=!0,this.isError=!1,this.isComplete=i,this.proceedIfError=!1,this.isTimeDelay=!1,this.process=function(){}};function c(e,i,n,s,a,d,c,u,f){var m=new l(e,i,n,s,a,d,c,f);!0===u?o[e]=m:r[e]=m,t[e]=m,h(m)}function h(e){!0!==u(e)&&0!=s&&e.process()}function u(e){if(!0===e.isTimeDelay&&!1===n)return f(e.name+" blocked = TIME DELAY!"),!0;if(w(e.blockedBy))for(var i=0;i<e.blockedBy.length;i++){var o=e.blockedBy[i];if(!1===t.hasOwnProperty(o))return f(e.name+" blocked = "+o),!0;if(!0===e.proceedIfError&&!0===t[o].isError)return!1;if(!1===t[o].isComplete)return f(e.name+" blocked = "+o),!0}return!1}function f(e){var i=window.location.href,t=new RegExp("[?&]ezq=([^&#]*)","i").exec(i);"1"===(t?t[1]:null)&&console.debug(e)}function m(){++e>200||(f("let's go"),p(o),p(r))}function p(e){for(var i in e)if(!1!==e.hasOwnProperty(i)){var t=e[i];!0===t.isComplete||u(t)||!0===t.isInitialized||!0===t.isError?!0===t.isError?f(t.name+": error"):!0===t.isComplete?f(t.name+": complete already"):!0===t.isInitialized&&f(t.name+": initialized already"):t.process()}}function w(e){return"[object Array]"==Object.prototype.toString.call(e)}return window.addEventListener("load",(function(){setTimeout((function(){n=!0,f("TDELAY -----"),m()}),5e3)}),!1),{addFile:c,addFileOnce:function(e,i,n,o,r,s,a,l,d){t[e]||c(e,i,n,o,r,s,a,l,d)},addDelayFile:function(e,i){var n=new l(e,i,!1,[],!1,!1,!0);n.isTimeDelay=!0,f(e+" ...  FILE! TDELAY"),r[e]=n,t[e]=n,h(n)},addFunc:function(e,n,s,l,d,c,u,f,m,p){!0===c&&(e=e+"_"+i++);var w=new a(e,n,s,l,d,u,f,p);!0===m?o[e]=w:r[e]=w,t[e]=w,h(w)},addDelayFunc:function(e,i,n){var o=new a(e,i,n,!1,[],!0,!0);o.isTimeDelay=!0,f(e+" ...  FUNCTION! TDELAY"),r[e]=o,t[e]=o,h(o)},items:t,processAll:m,setallowLoad:function(e){s=e},markLoaded:function(e){if(e&&0!==e.length){if(e in t){var i=t[e];!0===i.isComplete?f(i.name+" "+e+": error loaded duplicate"):(i.isComplete=!0,i.isInitialized=!0)}else t[e]=new d(e,!0);f("markLoaded dummyfile: "+t[e].name)}},logWhatsBlocked:function(){for(var e in t)!1!==t.hasOwnProperty(e)&&u(t[e])}}}();__ez.evt.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n()},__ez.evt.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):delete e["on"+t]};__ez.script.add=function(e){var t=document.createElement("script");t.src=e,t.async=!0,t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)};__ez.dot={};__ez.queue.addFile('../../detroitchicago/boise.js', '../../detroitchicago/boisebb26.js?gcb=195-3&amp;cb=5', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/abilene.js', '../../parsonsmaize/abilenec0f9.js?gcb=195-3&amp;cb=7f81d60744', true, [], true, false, true, false);__ez.queue.addFile('../../parsonsmaize/mulvane.js', '../../parsonsmaize/mulvane2d63.js?gcb=195-3&amp;cb=e75e48eec0', true, ['/parsonsmaize/abilene.js'], true, false, true, false);__ez.queue.addFile('../../detroitchicago/birmingham.js', '../../detroitchicago/birminghame7ec.js?gcb=195-3&amp;cb=539c47377c', true, ['/parsonsmaize/abilene.js'], true, false, true, false);</script>
<script data-ezscrex="false" type="text/javascript" data-cfasync="false">window._ezaq = Object.assign({"ad_cache_level":1,"adpicker_placement_cnt":0,"ai_placeholder_cache_level":1,"ai_placeholder_placement_cnt":-1,"domain_id":92771,"ezcache_level":1,"ezcache_skip_code":0,"has_bad_image":0,"has_bad_words":0,"is_sitespeed":0,"lt_cache_level":0,"response_size":199538,"response_size_orig":193770,"response_time_orig":1410,"template_id":5,"url":"https://overiq.com/django-1-10/revisiting-cadmin-app/","word_count":0,"worst_bad_word_level":0}, typeof window._ezaq !== "undefined" ? window._ezaq : {});__ez.queue.markLoaded('ezaqBaseReady');</script>
<script type='text/javascript' data-ezscrex='false' data-cfasync='false'>
window.ezAnalyticsStatic = true;

function analyticsAddScript(script) {
	var ezDynamic = document.createElement('script');
	ezDynamic.type = 'text/javascript';
	ezDynamic.innerHTML = script;
	document.head.appendChild(ezDynamic);
}
function getCookiesWithPrefix() {
    var allCookies = document.cookie.split(';');
    var cookiesWithPrefix = {};

    for (var i = 0; i < allCookies.length; i++) {
        var cookie = allCookies[i].trim();

        for (var j = 0; j < arguments.length; j++) {
            var prefix = arguments[j];
            if (cookie.indexOf(prefix) === 0) {
                var cookieParts = cookie.split('=');
                var cookieName = cookieParts[0];
                var cookieValue = cookieParts.slice(1).join('=');
                cookiesWithPrefix[cookieName] = decodeURIComponent(cookieValue);
                break; // Once matched, no need to check other prefixes
            }
        }
    }

    return cookiesWithPrefix;
}
function productAnalytics() {
	var d = {"pr":[6],"omd5":"6e534925e33770289cebaf0d4f5e095f"};
	d.u = _ezaq.url;
	d.p = _ezaq.page_view_id;
	d.v = _ezaq.visit_uuid;
	d.ab = _ezaq.ab_test_id;
	d.e = JSON.stringify(_ezaq);
	d.ref = document.referrer;
	d.c = getCookiesWithPrefix('active_template', 'ez', 'lp_');
	if(typeof ez_utmParams !== 'undefined') {
		d.utm = ez_utmParams;
	}

	var dataText = JSON.stringify(d);
	var xhr = new XMLHttpRequest();
	xhr.open('POST/index.html','/ezais/analytics?cb=1', true);
	xhr.onload = function () {
		if (xhr.status!=200) {
            return;
		}

        if(document.readyState !== 'loading') {
            analyticsAddScript(xhr.response);
            return;
        }

        var eventFunc = function() {
            if(document.readyState === 'loading') {
                return;
            }
            document.removeEventListener('readystatechange', eventFunc, false);
            analyticsAddScript(xhr.response);
        };

        document.addEventListener('readystatechange', eventFunc, false);
	};
	xhr.setRequestHeader('Content-Type','text/plain');
	xhr.send(dataText);
}
__ez.queue.addFunc("productAnalytics", "productAnalytics", null, true, ['ezaqBaseReady'], false, false, false, true);
</script><base />
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Revisiting cadmin App - Django 1.10 Tutorial - OverIQ.com</title>

    
    



    <meta name="description" content="In this lesson, we will be building remaining pages of our cadmin app. Currently, our cadmin app has following pages:


Login page (http://127.0.0.1:…"/>



    <link rel="canonical" href="index.html"/>


<meta property="og:locale" content="en_US"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Revisiting cadmin App"/>

    <meta property="og:description" content="In this lesson, we will be building remaining pages of our cadmin app. Currently, our cadmin app has following pages:


Login page (http://127.0.0.1:…"/>


<meta property="og:url" content="https://overiq.com/django-1-10/revisiting-cadmin-app/"/>
<meta property="og:site_name" content="OverIQ.com"/>


<meta property="article:publisher" content="https://www.facebook.com/OverIQ/"/>



<meta name="twitter:card" content="summary_large_image"/>

    <meta name="twitter:description" content="In this lesson, we will be building remaining pages of our cadmin app. Currently, our cadmin app has following pages:


Login page (http://127.0.0.1:…"/>


<meta name="twitter:title" content="Revisiting cadmin App"/>
<meta name="twitter:site" content="@infoOverIQ"/>

<meta name="twitter:creator" content="@infoOverIQ"/>




    
    
    


    
    
    


    <link rel="alternate" type="application/rss+xml" title="RSS" href="../../feed.xml/index.html"/>
    
    
    <link href="../../../fonts.googleapis.com/cssd2d5.css?family=Open+Sans" rel="stylesheet"/>
    <link rel="stylesheet" href="../../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="icon" href="../../static/wiki/favicon.png" sizes="32x32"/>

    <link rel="stylesheet" href="../../static/CACHE/css/output.db46da465a8b.css" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-125424793-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125424793-1');
    </script>


<script type='text/javascript'>
var ezoTemplate = 'orig_site';
var ezouid = '1';
var ezoFormfactor = '1';
</script><script data-ezscrex="false" type='text/javascript'>
var soc_app_id = '0';
var did = 92771;
var ezdomain = 'overiq.com';
var ezoicSearchable = 1;
</script></head>
<body>

<div class="overiq-header text-center">
    <div class="site-branding">
        <p class="main-title">
            <a href="../../index.html" rel="home">
                OverIQ.com
            </a>
        </p>
    </div>
</div>

<!-- Navigation -->
<nav class="navbar navbar-inverse" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">Home</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                

                <li>
                    <a href="../../blog/index.html">Blog</a>
                </li>
                <li>
                    <a href="../../contact/index.html">Contact</a>
                </li>
                <li>
                    <a href="../../about/index.html">About</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right visible-lg visible-md">
                <li>
                    <a href="../../feed.xml/index.html" title="RSS" target="_blank">
                        <i class="fa fa-rss fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/overiq/" target="_blank" title="Github">
                        <i class="fa fa-github fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://www.facebook.com/OverIQ/" target="_blank" title="Facebook">
                        <i class="fa fa-facebook fa-lg" aria-hidden="true"></i>
                    </a>
                </li>
                <li>
                    <a href="https://twitter.com/infoOverIQ" target="_blank" title="Twitter">
                        <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
                    </a>
                </li>

                

            </ul>

            <form action="https://overiq.com/search/" class="navbar-form navbar-left" role="search">

                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search" name="query" value=""/>
                </div>

                <button type="submit" class="btn btn-default">Submit</button>
            </form>

        </div>



        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">

    


    <div class="se-pre-con"></div>

    

    <div class="row">

        
        <div class="main">
            <div class="col-lg-8 col-md-8 col-sm-12">
                

    


    
        <ol class="breadcrumb">

    <li><a href="../../index.html">Home</a></li>

    
        
        <li><a href="../index.html">Django 1.10 Tutorial</a></li>
        

        

        
    
        

        

        
            <li class="active">Revisiting cadmin App</li>
        
    

</ol>
    


<h1>Revisiting cadmin App</h1>




    <p><i class="fa fa-calendar" aria-hidden="true"></i>
        Last updated on July 27, 2020
    </p>


<hr/>



<p>In this lesson, we will be building remaining pages of our cadmin app. Currently, our cadmin app has following pages:</p>

<ul>
<li>Login page (<code>http://127.0.0.1:8000/cadmin/login/</code>)</li>
<li>Logout page (<code>http://127.0.0.1:8000/cadmin/logout/</code>)</li>
<li>Password change page (<code>http://127.0.0.1:8000/cadmin/password-change/</code>)</li>
<li>Password change done page (<code>http://127.0.0.1:8000/cadmin/password-change-done/</code>)</li>
<li>User registration page (<code>http://127.0.0.1:8000/cadmin/register/</code>)</li>
<li>Activate account page (<code>http://127.0.0.1:8000/cadmin/activate/account/</code>)</li>
<li>Post add/update page (<code>http://127.0.0.1:8000/cadmin/post/add/</code> and <code>http://127.0.0.1:8000/cadmin/post/update/&lt;post_id&gt;/</code>)</li>
</ul>

<p>In the upcoming section, we are creating the following pages:</p>

<ul>
<li>Post list page - to display a paginated list of posts.</li>
<li>Tag list page - to display a paginated list of tags.</li>
<li>Tag add page.</li>
<li>Tag update page.</li>
<li>Tag delete page.</li>
<li>Category list page - to display a paginated list of categories.</li>
<li>Category add page.</li>
<li>Category update page.</li>
<li>Category delete page.</li>
<li>Account Info page - to display the details of logged in user.</li>
</ul>

<p>In addition to that, we will also modify Post add and update page.</p>

<p>Let&#39;s start by modifying Post add page.</p>
<span id="modifying-post-add-page" class="anchor-target"></span><h2 class="heading">Modifying Post Add Page <a class="header-link" href="#modifying-post-add-page">#</a></h2>

<p>As the situation stands everytime we add or update a post we are presented with an author dropdown list, which is unnecessary. Instead of showing an author dropdown list, it would be much better if we automatically associate the post with the logged in author and only show author dropdown list to site superuser&#39;s ( i.e users whose <code>is_superuser</code> attribute is <code>True</code> ).</p>

<p>Further, It will not be mandatory for the superuser to select the author while adding a post. Because we will automatically assign a special account named <strong>staff</strong> to the post in case the author is not selected. Okay, let&#39;s implement this:</p>

<p>Open <code>post_add.html</code> and modify the file as follows:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/post_add.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Add New Post - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>

<span class="hll"><span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;post_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Posts&lt;/a&gt; &amp;#187; Add Post&lt;/p&gt;</span>
</span>
<span class="x">        &lt;h3&gt;Add Post&lt;/h3&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;ul class=&#34;messages&#34;&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;li</span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">message.tags</span> <span class="cp">%}</span><span class="x"> class=&#34;</span><span class="cp">{{</span> <span class="nv">message.tags</span> <span class="cp">}}</span><span class="x">&#34;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x">&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/li&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;/ul&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="hll"><span class="x">        &lt;p&gt;</span>
</span><span class="hll"><span class="x">            </span><span class="cp">{{</span> <span class="nv">form.non_field_errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">        &lt;/p&gt;</span>
</span>
<span class="x">        &lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;table&gt;</span>
<span class="hll"><span class="x">                &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.title.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.title.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.title</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.content.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.content.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.content</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.category.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.category.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.category</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.tags.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.tags.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.tags</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;/tr&gt;</span>
</span><span class="hll">
</span><span class="hll"><span class="x">                </span><span class="c">{#  Show authors only if logged in user is a superuser  #}</span><span class="x"></span>
</span><span class="hll"><span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_superuser</span> <span class="cp">%}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                        &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.author.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                        &lt;td&gt;</span>
</span><span class="hll"><span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</span><span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;Add Post&#34;&gt;&lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">            &lt;/table&gt;</span>
<span class="x">        &lt;/form&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Here we are rendering each form field manually. Notice that we are only displaying author list when the logged in author is superuser. So, essentially we want to make author field optional but the problem is our current state of the <code>Post</code> model doesn&#39;t allow that. To view this problem login to cadmin app using a non-superuser account and try creating a new post.</p>

<p><img src="../../media/uploads/2018/2/21/Selection_042-103239a8-68d8-4cd3-8931-87f3d55db605.png" loading="lazy" alt=""/></p>

<p>After hitting the save button you will be redirected to Post add page again. So what&#39;s going on? The problem is that the form validation failed because we have not provided any value to the author field.</p>

<p>But! Where are the errors?</p>

<p>We didn&#39;t get any error messages because we have hidden the author dropdown field. To view the error message, comment out the <code>if</code> tag (line 58) in <code>post_add.html</code> as follows:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/post_add.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# ... #}</span><span class="x"></span>
<span class="c">{#  Show authors only if logged in user is a superuser  #}</span><span class="x"></span>
<span class="c">{# {% if request.user.is_superuser %} #}</span><span class="x"></span>
<span class="x">    &lt;tr&gt;</span>
<span class="x">        &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.author.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">        &lt;td&gt;</span>
<span class="x">            </span><span class="cp">{{</span> <span class="nv">form.author.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{{</span> <span class="nv">form.author</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">        &lt;/td&gt;</span>
<span class="x">    &lt;/tr&gt;</span>
<span class="c">{# {% endif %} #}</span><span class="x"></span>
<span class="c">{# ... #}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Hit the save button again and you will be displayed a form like this:</p>

<p><img src="../../media/uploads/2018/2/21/Selection_043-a9edf39f-9d54-48e6-98a8-97d1923a6521.png" loading="lazy" alt=""/></p>

<p>One way to solve this problem is to make <code>author</code> field optional in <code>PostForm</code> class. To do so, modify <code>PostForm</code> class in blog&#39;s <code>forms.py</code> as follows:</p>

<p><strong>TGDB/django_project/blog/forms.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">class</span> <span class="nc">PostForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>    
<span class="hll">    <span class="n">author</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ModelChoiceField</span><span class="p">(</span><span class="n">queryset</span><span class="o">=</span><span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Post</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,)</span>
        <span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Here we are redefining <code>author</code> field as <code>ModelChoiceField</code> field. The <code>ModelChoiceField</code> will be rendered as dropdown list and will use data specified in the <code>queryset</code> parameter to populate the field. The <code>required=False</code> makes the author field optional. </p>

<p>Next, we need a new special Author account to assign post in case a superuser not selected any author from the dropdown list.</p>

<p>Create a new Author with username <code>staff</code> by visiting <code>http://127.0.0.1:8000/cadmin/register/</code> page, then verify the account the by clicking email verification link sent to the email. Hop back to the Django shell and set the <code>is_superuser</code> attribute of the user we just created to <code>True</code>.</p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">blog.models</span> <span class="kn">import</span> <span class="n">Author</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">u</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">u</span>
<span class="o">&lt;</span><span class="n">Author</span><span class="p">:</span> <span class="n">staff</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">u</span><span class="o">.</span><span class="n">user</span>
<span class="o">&lt;</span><span class="n">User</span><span class="p">:</span> <span class="n">staff</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">u</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">u</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span> <span class="o">=</span> <span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">u</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Instead of using Django Shell, we could have also used Django Admin for this change.</p>

<p>Now the only thing remain is to update our <code>post_add()</code> view. Open <code>post_add()</code> view and modify it as follows:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">post_add</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="hll">    <span class="c1"># If request is POST, create a bound form(form with data)</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&#34;POST&#34;</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">PostForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">        <span class="c1"># check whether form is valid or not</span>
</span><span class="hll">        <span class="c1"># if the form is valid, save the data to the database</span>
</span><span class="hll">        <span class="c1"># and redirect the user back to the add post form</span>
</span><span class="hll">
</span><span class="hll">        <span class="c1"># If form is invalid show form with errors again</span>
</span><span class="hll">        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
</span><span class="hll">            <span class="c1"># if author is not selected and user is superuser, then assign the post to the author named staff</span>
</span><span class="hll">            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">                <span class="n">new_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">                <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span>
</span><span class="hll">                <span class="n">new_post</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
</span><span class="hll">                <span class="n">new_post</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">                <span class="n">f</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">            <span class="c1"># if author is selected and user is superuser</span>
</span><span class="hll">            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">                <span class="n">new_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">            <span class="c1"># if user is not a superuser</span>
</span><span class="hll">            <span class="k">else</span><span class="p">:</span>
</span><span class="hll">                <span class="n">new_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">                <span class="n">new_post</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
</span><span class="hll">                <span class="n">new_post</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">                <span class="n">f</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">()</span>
</span><span class="hll">
</span>            <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Post added&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;post_add&#39;</span><span class="p">)</span>

    <span class="c1"># if request is GET the show unbound form to the user</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">PostForm</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/post_add.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">})</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>There is nothing new in the above code, except <code>commit=False</code> and <code>save_m2m()</code> method. As you already know, calling <code>save()</code> method on a <code>ModelForm</code> class saves the object into the database. When we pass <code>commit=False</code> to the <code>save()</code> method, then the <code>save()</code> method just returns the object instead of saving it into the database. We do this usually when we want to add some additional data to the object. In this case, we are assigning author object to the post.</p>

<p>A side effect of passing <code>commit=True</code> to <code>save()</code> method is that, if your model has many-to-many relation with other models, then Django will not save the data for many-to-many relation. To solve this issue Django provides a method called <code>save_m2m()</code> to every <code>ModelForm</code> class. Calling <code>save_m2m()</code> saves the data for many-to-many relation.</p>

<p>To view the fruits of our labor login to cadmin app using a superuser account (like the <code>staff</code>) and create a new post by visiting <code>http://127.0.0.1:8000/cadmin/post/add/</code> page.</p>

<p>Enter the data in all the fields except author and hit &#34;Add Post&#34; to create a new post.</p>

<p><img src="../../media/uploads/2018/2/21/Selection_044-a82738f9-a865-4ba1-bfcb-91b84aaa55e1.png" loading="lazy" alt=""/></p>

<p>This action will cause the execution of following snippet in the <code>post_add()</code> view:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="c1"># if author is not selected and user is superuser, then assign the post to the author named staff</span>
<span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
    <span class="n">new_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span>
    <span class="n">new_post</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
    <span class="n">new_post</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">f</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">()</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Create another post but this time select an author from the dropdown list.</p>

<p><img src="../../media/uploads/2018/2/21/Selection_045-05c09ab6-2d2b-4436-8db1-89ca1a167c88.png" loading="lazy" alt=""/></p>

<p>This action will trigger the execution of <code>elif</code> block in <code>post_add()</code> view:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="c1"># if author is selected and user is superuser</span>
<span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
    <span class="n">new_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Finally, logout from cadmin app and login again using a non-superuser account. And create a new post again by visiting <code>http://127.0.0.1:8000/cadmin/post/add/</code> page.</p>

<p><img src="../../media/uploads/2018/2/21/Selection_046-d2a7feb8-668e-492b-8cbb-d856ffa8228b.png" loading="lazy" alt=""/></p>

<p>As you can see the logged in user is not allowed to select author. Enter some data in the fields and hit &#34;Add Post&#34; button. This action will execute <code>else</code> block in the <code>post_add()</code> view:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="c1"># if user is not a superuser</span>
 <span class="k">else</span><span class="p">:</span>
    <span class="n">new_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">new_post</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
    <span class="n">new_post</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">f</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">()</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div><span id="modifying-post-update-page" class="anchor-target"></span><h2 class="heading">Modifying Post Update Page <a class="header-link" href="#modifying-post-update-page">#</a></h2>

<p>Open cadmin&#39;s <code>views.py</code> and amend <code>post_update()</code> view as follows:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">post_update</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Post</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>

    <span class="c1"># If request is POST, create a bound form(form with data)</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&#34;POST&#34;</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">PostForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="n">post</span><span class="p">)</span>

        <span class="c1"># check whether form is valid or not</span>
        <span class="c1"># if the form is valid, save the data to the database</span>
        <span class="c1"># and redirect the user back to the update post form</span>

        <span class="c1"># If form is invalid show form with errors again</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
<span class="hll">            <span class="c1"># if author is not selected and user is superuser, then assign the post to the author named staff</span>
</span><span class="hll">            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">                <span class="n">updated_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">                <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span>
</span><span class="hll">                <span class="n">updated_post</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
</span><span class="hll">                <span class="n">updated_post</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">                <span class="n">f</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">()</span>
</span><span class="hll">            <span class="c1"># if author is selected and user is superuser</span>
</span><span class="hll">            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">                <span class="n">updated_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">            <span class="c1"># if user is not a superuser</span>
</span><span class="hll">            <span class="k">else</span><span class="p">:</span>
</span><span class="hll">                <span class="n">updated_post</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">                <span class="n">updated_post</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
</span><span class="hll">                <span class="n">updated_post</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">                <span class="n">f</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">()</span>
</span><span class="hll">
</span>            <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Post updated&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;post_update&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">post</span><span class="o">.</span><span class="n">id</span><span class="p">]))</span>

    <span class="c1"># if request is GET the show unbound form to the user</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">PostForm</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">post</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/post_update.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">:</span> <span class="n">post</span><span class="p">})</span>
<span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Next, open <code>post_update.html</code> and modify the page as follows:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/post_update.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Update Post - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>
<span class="hll"><span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;post_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Posts&lt;/a&gt; &amp;#187; Post Update&lt;/p&gt;</span>
</span>
<span class="x">        &lt;h3&gt;Post Update&lt;/h3&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;ul class=&#34;messages&#34;&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;li</span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">message.tags</span> <span class="cp">%}</span><span class="x"> class=&#34;</span><span class="cp">{{</span> <span class="nv">message.tags</span> <span class="cp">}}</span><span class="x">&#34;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x">&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/li&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;/ul&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="hll"><span class="x">        &lt;p&gt;</span>
</span><span class="hll"><span class="x">            </span><span class="cp">{{</span> <span class="nv">form.non_field_errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">        &lt;/p&gt;</span>
</span>
<span class="x">        &lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;table&gt;</span>
<span class="hll"><span class="x">                &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.title.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.title.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.title</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.content.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.content.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.content</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.category.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.category.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.category</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.tags.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;td&gt;</span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.tags.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.tags</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                </span><span class="c">{#  Show authors only if logged in user is a superuser  #}</span><span class="x"></span>
</span><span class="hll"><span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_superuser</span> <span class="cp">%}</span><span class="x"></span>
</span><span class="hll"><span class="x">                    &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                        &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.author.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                        &lt;td&gt;</span>
</span><span class="hll"><span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author.errors</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="hll"><span class="x">                        &lt;/td&gt;</span>
</span><span class="hll"><span class="x">                    &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</span><span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;Update Post&#34;&gt;&lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">            &lt;/table&gt;</span>
<span class="x">        &lt;/form&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Now just like with Post Add page Author dropdown list will only appear in when the logged in user is a superuser.</p>
<span id="creating-post-list-page" class="anchor-target"></span><h2 class="heading">Creating Post List Page <a class="header-link" href="#creating-post-list-page">#</a></h2>

<p>Open cadmin&#39;s <code>views.py</code> and add <code>post_list()</code> view as follows:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">def</span> <span class="nf">activate_account</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1">#...</span>

<span class="hll"><span class="nd">@login_required</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">        <span class="n">posts</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&#34;-id&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">posts</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">author__user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&#34;-id&#34;</span><span class="p">)</span>
</span><span class="hll">    
</span><span class="hll">    <span class="n">posts</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">pg_records</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">posts</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/post_list.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;posts&#39;</span><span class="p">:</span> <span class="n">posts</span><span class="p">})</span>
</span><span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>The <code>post_list()</code> view displays a list of post in reverse chronological order (i.e latest first, oldest last). If logged in user is a superuser then it will display all the posts in the database. On the other hand, if logged in user is non-superuser it will only display posts created by himself.</p>

<p>Next, create <code>post_list.html</code> template with the following code:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/post_list.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    All Posts - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>

<span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;post_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Post&lt;/a&gt; &lt;/p&gt;</span>

<span class="x">        &lt;p class=&#34;button&#34;&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;post_add&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Add Post &amp;raquo;&lt;/a&gt;&lt;/p&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;p class=&#34;count&#34;&gt;Total Posts: </span><span class="cp">{{</span> <span class="nv">posts.paginator.count</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">        </span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="k">in</span> <span class="nv">posts</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">forloop</span><span class="nv">.first</span>     <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;table class=&#34;tbl-class&#34;&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;th&gt;Title&lt;/th&gt;</span>
<span class="x">                            &lt;th&gt;Category&lt;/th&gt;</span>
<span class="x">                            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_superuser</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                                &lt;th&gt;Author&lt;/th&gt;</span>
<span class="x">                            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                            &lt;th&gt;Date&lt;/th&gt;</span>
<span class="x">                            &lt;th&gt;Action&lt;/th&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td class=&#34;post-title&#34; title=&#34;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="x">&#34;&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span><span class="o">|</span><span class="nf">truncatechars</span><span class="o">:</span><span class="m">50</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">post.category</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_superuser</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                        &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">post.author</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                    &lt;td title=&#34;</span><span class="cp">{{</span> <span class="nv">post.pub_date</span> <span class="cp">}}</span><span class="x">&#34;&gt;</span><span class="cp">{{</span> <span class="nv">post.pub_date</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&#34;d M Y&#34;</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;post_update&#39;</span> <span class="nv">post.id</span> <span class="cp">%}</span><span class="x">&#34;&gt;Edit&lt;/a&gt; |</span>
<span class="x">                        &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;post_delete&#39;</span> <span class="nv">post.id</span> <span class="cp">%}</span><span class="x">?next=</span><span class="cp">{{</span> <span class="nv">request.get_full_path</span> <span class="cp">}}</span><span class="x">&#34; onclick=&#34; return confirm(&#39;Are you sure ?&#39;)&#34;&gt;Delete&lt;/a&gt;</span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">forloop</span><span class="nv">.last</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;/table&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">empty</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                No Posts</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;/div&gt;</span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">posts</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;div class=&#34;pagination&#34;&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">posts.has_previous</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;a href=&#34;?page=</span><span class="cp">{{</span> <span class="nv">posts.previous_page_number</span> <span class="cp">}}</span><span class="x">&#34;&gt;&amp;lt; Prev&lt;/a&gt; |</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">posts.has_next</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;a href=&#34;?page=</span><span class="cp">{{</span> <span class="nv">posts.next_page_number</span> <span class="cp">}}</span><span class="x">&#34;&gt;Next &amp;gt;&lt;/a&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;span&gt;Page </span><span class="cp">{{</span> <span class="nv">posts.number</span> <span class="cp">}}</span><span class="x"> of </span><span class="cp">{{</span> <span class="nv">posts.paginator.num_pages</span> <span class="cp">}}</span><span class="x">&lt;/span&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>We want users to show a list of post at the root URL of cadmin app i.e <code>http://127.0.0.1:8000/cadmin/</code>. Currently, the root URL of cadmin app points to <code>home()</code> view function.</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">),</span>
    <span class="c1">#...</span>
<span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Update the above URL pattern as follows:</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">post_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;post_list&#39;</span><span class="p">),</span>
    <span class="c1">#...</span>
<span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Right now if you visit post list page (<code>http://127.0.0.1:8000/cadmin/</code>), you will get an error as follows:</p>

<p><img src="../../media/uploads/2017/09/11/noreverse-exception-at-cadmin-homepage.png" loading="lazy" alt=""/></p>

<p>This is because we haven&#39;t yet created any URL pattern to delete post objects.</p>
<span id="deleting-posts" class="anchor-target"></span><h2 class="heading">Deleting Posts <a class="header-link" href="#deleting-posts">#</a></h2>

<p>To allow deletion of post from cadmin add <code>post_delete()</code> view at the end of the file as follows:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">post_delete</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Post</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
    <span class="n">post</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="n">next_page</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">[</span><span class="s1">&#39;next&#39;</span><span class="p">]</span>
    <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Post deleted&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">next_page</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Now open cadmin&#39;s <code>urls.py</code> and add the following URL pattern to just below <code>post_update</code> URL pattern.</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^post/update/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">post_update</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;post_update&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^post/delete/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">post_delete</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;post_delete&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>To view our changes in action visit <code>http://127.0.0.1:8000/cadmin/</code> and you should see a link to delete post beside Edit link as follows:</p>

<p><img src="../../media/uploads/2018/2/21/Selection_048-adeb86fb-244f-4be3-9f9b-02403b06d13a.png" loading="lazy" alt=""/></p>
<span id="creating-category-list-page" class="anchor-target"></span><h2 class="heading">Creating Category List Page <a class="header-link" href="#creating-category-list-page">#</a></h2>

<p>Open <code>views.py</code> and add <code>category_list()</code> view just below <code>post_delete()</code> view as follows:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">def</span> <span class="nf">post_delete</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
   <span class="c1">#...</span>

<span class="hll"><span class="nd">@login_required</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">category_list</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">        <span class="n">categories</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&#34;-id&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">categories</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">author__user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&#34;-id&#34;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">categories</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">pg_records</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/category_list.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="n">categories</span><span class="p">})</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Create a new template called <code>category_list.html</code> with the following code:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/category_list.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    All Posts - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>

<span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;category_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Categories&lt;/a&gt;&lt;/p&gt;</span>

<span class="x">        &lt;p class=&#34;button&#34;&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;category_add&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Add Category &amp;raquo;&lt;/a&gt;&lt;/p&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;p class=&#34;count&#34;&gt;Total Categories: </span><span class="cp">{{</span> <span class="nv">categories.paginator.count</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">category</span> <span class="k">in</span> <span class="nv">categories</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">forloop</span><span class="nv">.first</span>     <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;table class=&#34;tbl-class&#34;&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;th&gt;Name&lt;/th&gt;</span>
<span class="x">                            &lt;th&gt;Slug&lt;/th&gt;</span>
<span class="x">                            &lt;th&gt;Author&lt;/th&gt;</span>
<span class="x">                            &lt;th&gt;Action&lt;/th&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td class=&#34;post-title&#34; title=&#34;</span><span class="cp">{{</span> <span class="nv">category.name</span> <span class="cp">}}</span><span class="x">&#34;&gt;</span><span class="cp">{{</span> <span class="nv">category.name</span><span class="o">|</span><span class="nf">truncatechars</span><span class="o">:</span><span class="m">50</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">category.slug</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">category.author.user.username</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;category_update&#39;</span> <span class="nv">category.id</span> <span class="cp">%}</span><span class="x">&#34;&gt;Edit&lt;/a&gt; |</span>
<span class="x">                        &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;category_delete&#39;</span> <span class="nv">category.id</span> <span class="cp">%}</span><span class="x">?next=</span><span class="cp">{{</span> <span class="nv">request.get_full_path</span> <span class="cp">}}</span><span class="x">&#34; onclick=&#34; return confirm(&#39;Are you sure ?&#39;)&#34;&gt;Delete&lt;/a&gt;</span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">forloop</span><span class="nv">.last</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;/table&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">empty</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                No Posts</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;/table&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">categories</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;div class=&#34;pagination&#34;&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">categories.has_previous</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;a href=&#34;?page=</span><span class="cp">{{</span> <span class="nv">categories.previous_page_number</span> <span class="cp">}}</span><span class="x">&#34;&gt;&amp;lt; Prev&lt;/a&gt; |</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">categories.has_next</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;a href=&#34;?page=</span><span class="cp">{{</span> <span class="nv">categories.next_page_number</span> <span class="cp">}}</span><span class="x">&#34;&gt;Next &amp;gt;&lt;/a&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;span&gt;Page </span><span class="cp">{{</span> <span class="nv">categories.number</span> <span class="cp">}}</span><span class="x"> of </span><span class="cp">{{</span> <span class="nv">categories.paginator.num_pages</span> <span class="cp">}}</span><span class="x">&lt;/span&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Next, add the following URL pattern just below <code>post_delete</code> URL pattern as follows:</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^post/delete/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">post_delete</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;post_delete&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^category/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">category_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category_list&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div><span id="creating-category-addupdate-page" class="anchor-target"></span><h2 class="heading">Creating Category Add/Update Page <a class="header-link" href="#creating-category-addupdate-page">#</a></h2>

<p>Category Add/Update page will be similar to Post Add/Update page. Here too we will display author dropdown list only to the superusers.</p>

<p>First open blog&#39;s <code>forms.py</code> and redefine the <code>author</code> field in <code>CategoryForm</code> class as follows:</p>

<p><strong>TGDB/django_project/blog/forms.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">class</span> <span class="nc">CategoryForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
<span class="hll">    <span class="n">author</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ModelChoiceField</span><span class="p">(</span><span class="n">queryset</span><span class="o">=</span><span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Category</span>    
    <span class="c1">#...</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Open cadmin&#39;s <code>views.py</code> and add <code>category_add()</code> and <code>category_update()</code> view as follows:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">get_object_or_404</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="n">Http404</span>
<span class="hll"><span class="kn">from</span> <span class="nn">blog.forms</span> <span class="kn">import</span> <span class="n">PostForm</span><span class="p">,</span> <span class="n">CategoryForm</span>
</span><span class="c1">#...</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="c1">#...</span>

<span class="c1"># view to add new category</span>
<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">category_add</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>

    <span class="c1"># If request is POST, create a bound form(form with data)</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&#34;POST&#34;</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">CategoryForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>

        <span class="c1"># check whether form is valid or not</span>
        <span class="c1"># if the form is valid, save the data to the database</span>
        <span class="c1"># and redirect the user back to the add post form</span>

        <span class="c1"># If form is invalid show form with errors again</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="c1"># new_category = f.save()</span>
            <span class="c1"># new_category = f.save(commit=False)</span>
            <span class="c1"># new_category.author = get_user(request)</span>
            <span class="c1"># new_category.save()</span>

            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
                <span class="c1"># if author is not supplied and user is superuser</span>
                <span class="n">new_category</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span>
                <span class="n">new_category</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
                <span class="n">new_category</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
                <span class="c1"># if author is supplied and user is superuser</span>
                <span class="n">new_category</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># if author not a superuser</span>
                <span class="n">new_category</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="n">new_category</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
                <span class="n">new_category</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Category added&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;category_add&#39;</span><span class="p">)</span>

    <span class="c1"># if request is GET the show unbound form to the user</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">CategoryForm</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/category_add.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">})</span>


<span class="c1"># view to update category</span>
<span class="k">def</span> <span class="nf">category_update</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Category</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>

    <span class="c1"># If request is POST, create a bound form(form with data)</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&#34;POST&#34;</span><span class="p">:</span> <span class="c1"># If request is POST, create a bound form</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">CategoryForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="n">category</span><span class="p">)</span>

        <span class="c1"># check whether form is valid or not</span>
        <span class="c1"># if the form is valid, save the data to the database</span>
        <span class="c1"># and redirect the user back to the category form</span>

        <span class="c1"># If form is invalid show form with errors again</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
                <span class="c1"># if author is not supplied and user is superuser</span>
                <span class="n">updated_category</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span>
                <span class="n">updated_category</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
                <span class="n">updated_category</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
                <span class="c1"># if author is supplied and user is superuser</span>
                <span class="n">updated_category</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># if author not a superuser</span>
                <span class="n">updated_category</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="n">updated_category</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
                <span class="n">updated_category</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="n">new_category</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Category updated&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;category_update&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">category</span><span class="o">.</span><span class="n">id</span><span class="p">]))</span>

    <span class="c1"># if request is GET the show unbound form to the user</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">CategoryForm</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">category</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/category_update.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="n">category</span><span class="p">})</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Create two new templates <code>category_add.html</code> and <code>category_update.html</code> with the following code:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/category_add.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Add New Category - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>

<span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;category_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Category&lt;/a&gt; &amp;#187; Add Category&lt;/p&gt;</span>

<span class="x">        &lt;h3&gt;Add Category&lt;/h3&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        </span><span class="cp">{{</span> <span class="nv">form.non_field_errors</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">        &lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;table&gt;</span>
<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.name.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.name.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.name</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.slug.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.slug.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.slug</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_superuser</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;tr&gt;</span>
<span class="x">                        &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.author.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                        &lt;td&gt;</span>
<span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        &lt;/td&gt;</span>
<span class="x">                    &lt;/tr&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;Add Category&#34;&gt;&lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>

<span class="x">            &lt;/table&gt;</span>
<span class="x">        &lt;/form&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>TGDB/django_project/cadmin/templates/cadmin/category_update.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Add Category - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>

<span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;category_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Category&lt;/a&gt; &amp;#187; Update Category&lt;/p&gt;</span>

<span class="x">        &lt;h3&gt;Update Category&lt;/h3&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        </span><span class="cp">{{</span> <span class="nv">form.non_field_errors</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">        &lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;table&gt;</span>
<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.name.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.name.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.name</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.slug.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.slug.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.slug</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_superuser</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;tr&gt;</span>
<span class="x">                        &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.author.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                        &lt;td&gt;</span>
<span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        &lt;/td&gt;</span>
<span class="x">                    &lt;/tr&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;Update Category&#34;&gt;&lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>

<span class="x">            &lt;/table&gt;</span>
<span class="x">        &lt;/form&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>At last, add the following URL patterns to the end of <code>urlpatterns</code> list in cadmin&#39;s <code>urls.py</code> as follows:</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^category/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">category_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category_list&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^category/add/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">category_add</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category_add&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^category/update/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">category_update</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category_update&#39;</span><span class="p">),</span>
</span>    <span class="c1">#...</span>
<span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div><span id="deleting-categories" class="anchor-target"></span><h2 class="heading">Deleting Categories <a class="header-link" href="#deleting-categories">#</a></h2>

<p>In cadmin&#39;s <code>views.py</code>, add the <code>category_delete()</code> view just after <code>category_update()</code> as follows:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">def</span> <span class="nf">category_update</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="c1">#...</span>

<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">category_delete</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Category</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
    <span class="n">category</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="n">next_page</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">[</span><span class="s1">&#39;next&#39;</span><span class="p">]</span>
    <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Category deleted&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">next_page</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table></div>
<p>Next, add the following URL pattern at the end of <code>urlpatterns</code> list:</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
<span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^category/update/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">category_update</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category_update&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^category/delete/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">category_delete</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category_delete&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div><span id="creating-tag-pages" class="anchor-target"></span><h2 class="heading">Creating Tag Pages <a class="header-link" href="#creating-tag-pages">#</a></h2>

<p>First open blog&#39;s <code>forms.py</code> and redefine the <code>author</code> field in <code>TagForm</code> class as follows:</p>

<p><strong>TGDB/django_project/blog/forms.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">class</span> <span class="nc">TagForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
<span class="hll">    <span class="n">author</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ModelChoiceField</span><span class="p">(</span><span class="n">queryset</span><span class="o">=</span><span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Tag</span>
    <span class="c1">#...</span>
<span class="o">...</span>
</pre></div>
</td></tr></tbody></table></div><span id="creating-tag-list-page" class="anchor-target"></span><h2 class="heading">Creating Tag List Page <a class="header-link" href="#creating-tag-list-page">#</a></h2>

<p>In the cadmin&#39;s <code>views.py</code>, add <code>tag_list()</code> view just after <code>category_delete()</code> view.</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">def</span> <span class="nf">category_delete</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="c1">#...</span>

<span class="hll"><span class="c1"># view to add list all tags</span>
</span><span class="hll"><span class="nd">@login_required</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">tag_list</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">        <span class="n">tags</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&#34;-id&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">tags</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">author__user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&#34;-id&#34;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">tags</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">pg_records</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/tag_list.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;tags&#39;</span><span class="p">:</span> <span class="n">tags</span><span class="p">})</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Create a new template named <code>tag_list.html</code> and add the following code to it:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/tag_list.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    All Tags - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">   &lt;div class=&#34;main&#34;&gt;</span>

<span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;tag_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Tags&lt;/a&gt;&lt;/p&gt;</span>

<span class="x">        &lt;p class=&#34;button&#34;&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;tag_add&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Add Tag &amp;raquo;&lt;/a&gt;&lt;/p&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;p class=&#34;count&#34;&gt;Total Tags: </span><span class="cp">{{</span> <span class="nv">tags.paginator.count</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">tag</span> <span class="k">in</span> <span class="nv">tags</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">forloop</span><span class="nv">.first</span>     <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;table class=&#34;tbl-class&#34;&gt;</span>
<span class="x">                        &lt;tr&gt;</span>
<span class="x">                            &lt;th&gt;Name&lt;/th&gt;</span>
<span class="x">                            &lt;th&gt;Slug&lt;/th&gt;</span>
<span class="x">                            &lt;th&gt;Author&lt;/th&gt;</span>
<span class="x">                            &lt;th&gt;Action&lt;/th&gt;</span>
<span class="x">                        &lt;/tr&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td class=&#34;post-title&#34;&gt;</span><span class="cp">{{</span> <span class="nv">tag.name</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">tag.slug</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">tag.author.user</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;tag_update&#39;</span> <span class="nv">tag.id</span> <span class="cp">%}</span><span class="x">&#34;&gt;Edit&lt;/a&gt; |</span>
<span class="x">                        &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;tag_delete&#39;</span> <span class="nv">tag.id</span> <span class="cp">%}</span><span class="x">?next=</span><span class="cp">{{</span> <span class="nv">request.get_full_path</span> <span class="cp">}}</span><span class="x">&#34; onclick=&#34; return confirm(&#39;Are you sure ?&#39;)&#34;&gt;Delete&lt;/a&gt;</span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nb">forloop</span><span class="nv">.last</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;/table&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">empty</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                No Tags</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">   &lt;/div&gt;</span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">tags</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        &lt;div class=&#34;pagination&#34;&gt;</span>
<span class="x">            &lt;p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">tags.has_previous</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;a href=&#34;?page=</span><span class="cp">{{</span> <span class="nv">tags.previous_page_number</span> <span class="cp">}}</span><span class="x">&#34;&gt;&amp;lt; Prev&lt;/a&gt; |</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">tags.has_next</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;a href=&#34;?page=</span><span class="cp">{{</span> <span class="nv">tags.next_page_number</span> <span class="cp">}}</span><span class="x">&#34;&gt;Next &amp;gt;&lt;/a&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;span&gt;Page </span><span class="cp">{{</span> <span class="nv">tags.number</span> <span class="cp">}}</span><span class="x"> of </span><span class="cp">{{</span> <span class="nv">tags.paginator.num_pages</span> <span class="cp">}}</span><span class="x">&lt;/span&gt;</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Next, add the <code>tag_list</code> url pattern at the end of <code>urlpatterns</code> list as follows:</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^category/delete/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">category_delete</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category_delete&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^tag/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">tag_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tag_list&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div><span id="tag-addupdate-page" class="anchor-target"></span><h2 class="heading">Tag Add/Update Page <a class="header-link" href="#tag-addupdate-page">#</a></h2>

<p>In the cadmin&#39;s <code>views.py</code> file add <code>tag_add()</code> and <code>tag_update()</code> views as follows:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">get_object_or_404</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="n">Http404</span>
<span class="hll"><span class="kn">from</span> <span class="nn">blog.forms</span> <span class="kn">import</span> <span class="n">PostForm</span><span class="p">,</span> <span class="n">CategoryForm</span><span class="p">,</span> <span class="n">TagForm</span>
</span>
<span class="c1">#...</span>
<span class="k">def</span> <span class="nf">tag_list</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1">#...</span>

<span class="hll"><span class="c1"># view to add new tag</span>
</span><span class="hll"><span class="nd">@login_required</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">tag_add</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># If request is POST, create a bound form(form with data)</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&#34;POST&#34;</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">TagForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">        <span class="c1"># check whether form is valid or not</span>
</span><span class="hll">        <span class="c1"># if the form is valid, save the data to the database</span>
</span><span class="hll">        <span class="c1"># and redirect the user back to the add post form</span>
</span><span class="hll">
</span><span class="hll">        <span class="c1"># If form is invalid show form with errors again</span>
</span><span class="hll">        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
</span><span class="hll">            <span class="c1"># new_category = f.save()</span>
</span><span class="hll">            <span class="c1"># new_category = f.save(commit=False)</span>
</span><span class="hll">            <span class="c1"># new_category.author = get_user(request)</span>
</span><span class="hll">            <span class="c1"># new_category.save()</span>
</span><span class="hll">
</span><span class="hll">            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">                <span class="c1"># if author is not supplied and user is superuser</span>
</span><span class="hll">                <span class="n">new_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">                <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span>
</span><span class="hll">                <span class="n">new_tag</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
</span><span class="hll">                <span class="n">new_tag</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">                <span class="c1"># if author is supplied and user is superuser</span>
</span><span class="hll">                <span class="n">new_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">            <span class="k">else</span><span class="p">:</span>
</span><span class="hll">                <span class="c1"># if author not a superuser</span>
</span><span class="hll">                <span class="n">new_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">                <span class="n">new_tag</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
</span><span class="hll">                <span class="n">new_tag</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Tag added&#39;</span><span class="p">)</span>
</span><span class="hll">            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;tag_add&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># if request is GET the show unbound form to the user</span>
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">TagForm</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/tag_add.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">})</span>
</span><span class="hll">
</span><span class="hll">
</span><span class="hll"><span class="c1"># view to update tag</span>
</span><span class="hll"><span class="nd">@login_required</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">tag_update</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
</span><span class="hll">    <span class="n">tag</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Tag</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># If request is POST, create a bound form(form with data)</span>
</span><span class="hll">    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&#34;POST&#34;</span><span class="p">:</span> <span class="c1"># If request is POST, create a bound form</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">TagForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">        <span class="c1"># check whether form is valid or not</span>
</span><span class="hll">        <span class="c1"># if the form is valid, save the data to the database</span>
</span><span class="hll">        <span class="c1"># and redirect the user back to the tag update form</span>
</span><span class="hll">
</span><span class="hll">        <span class="c1"># If form is invalid show form with errors again</span>
</span><span class="hll">        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
</span><span class="hll">            <span class="c1"># updated_tag = f.save()</span>
</span><span class="hll">
</span><span class="hll">            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">                <span class="c1"># if author is not supplied and user is superuser</span>
</span><span class="hll">                <span class="n">updated_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">                <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="s1">&#39;staff&#39;</span><span class="p">)</span>
</span><span class="hll">                <span class="n">updated_tag</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
</span><span class="hll">                <span class="n">updated_tag</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">            <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
</span><span class="hll">                <span class="c1"># if author is supplied and user is superuser</span>
</span><span class="hll">                <span class="n">updated_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">            <span class="k">else</span><span class="p">:</span>
</span><span class="hll">                <span class="c1"># if author not a superuser</span>
</span><span class="hll">                <span class="n">updated_tag</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class="hll">                <span class="n">updated_tag</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user__username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
</span><span class="hll">                <span class="n">updated_tag</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll">            <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Tag updated&#39;</span><span class="p">)</span>
</span><span class="hll">            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;tag_update&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">id</span><span class="p">]))</span>
</span><span class="hll">
</span><span class="hll">    <span class="c1"># if request is GET the show unbound form to the user</span>
</span><span class="hll">    <span class="k">else</span><span class="p">:</span>
</span><span class="hll">        <span class="n">f</span> <span class="o">=</span> <span class="n">TagForm</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/tag_update.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;form&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">,</span> <span class="s1">&#39;tag&#39;</span><span class="p">:</span> <span class="n">tag</span><span class="p">})</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Create two new templates <code>tag_add.html</code> and <code>tag_update.html</code> with the following code:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/tag_add.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Add New Tag - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>

<span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;tag_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Tags&lt;/a&gt; &amp;#187; Add Tag&lt;/p&gt;</span>

<span class="x">        &lt;h3&gt;Add Tag&lt;/h3&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        </span><span class="cp">{{</span> <span class="nv">form.non_field_errors</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">        &lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;table&gt;</span>
<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.name.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.name.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.name</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.slug.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.slug.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.slug</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_superuser</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;tr&gt;</span>
<span class="x">                        &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.author.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                        &lt;td&gt;</span>
<span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                            </span><span class="cp">{{</span> <span class="nv">form.author</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        &lt;/td&gt;</span>
<span class="x">                    &lt;/tr&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;Add Tag&#34;&gt;&lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">            &lt;/table&gt;</span>
<span class="x">        &lt;/form&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p><strong>TGDB/django_project/cadmin/templates/cadmin/tag_update.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    Update Tag - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>

<span class="x">        &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;tag_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;All Tags&lt;/a&gt; &amp;#187; Update Tag&lt;/p&gt;</span>

<span class="x">        &lt;h3&gt;Update Tag&lt;/h3&gt;</span>

<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">        </span><span class="cp">{{</span> <span class="nv">form.non_field_errors</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">        &lt;form action=&#34;&#34; method=&#34;post&#34;&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;table&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.name.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.name.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.name</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.slug.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.slug.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">form.slug</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>

<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.is_superuser</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;tr&gt;</span>
<span class="x">                    &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">form.author.label_tag</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">                    &lt;td&gt;</span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.author.errors</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                        </span><span class="cp">{{</span> <span class="nv">form.author</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    &lt;/td&gt;</span>
<span class="x">                &lt;/tr&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;&lt;/td&gt;</span>
<span class="x">                &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;Update Tag&#34;&gt;&lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>

<span class="x">            &lt;/table&gt;</span>
<span class="x">        &lt;/form&gt;</span>
<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Next, add the following two URL patterns at the end of the <code>urlpatterns</code> list as follows:</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^tag/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">tag_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tag_list&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^tag/add/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">tag_add</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tag_add&#39;</span><span class="p">),</span>
</span><span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^tag/update/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">tag_update</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tag_update&#39;</span><span class="p">),</span>    
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div><span id="deleting-tags" class="anchor-target"></span><h2 class="heading">Deleting Tags <a class="header-link" href="#deleting-tags">#</a></h2>

<p>To delete tag add the following view to the cadmin&#39;s <code>views.py</code> file.</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">def</span> <span class="nf">tag_update</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
    <span class="c1">#...</span>

<span class="hll"><span class="nd">@login_required</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">tag_delete</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
</span><span class="hll">    <span class="n">tag</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Tag</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span class="hll">    <span class="n">tag</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span><span class="hll">    <span class="n">next_page</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">[</span><span class="s1">&#39;next&#39;</span><span class="p">]</span>
</span><span class="hll">    <span class="n">messages</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;Tag deleted&#39;</span><span class="p">)</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">next_page</span><span class="p">)</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Then, add the following URL pattern to the <code>urls.py</code> file as follows:</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^tag/update/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">tag_update</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tag_update&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^tag/delete/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">tag_delete</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tag_delete&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div><span id="creating-account-info-page" class="anchor-target"></span><h2 class="heading">Creating Account Info Page <a class="header-link" href="#creating-account-info-page">#</a></h2>

<p>In this section, we will create Account Info page, which will the display details of the logged in user. In <code>views.py</code>, add the following view at the end of the file:</p>

<p><strong>TGDB/django_project/cadmin/views.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="k">def</span> <span class="nf">tag_delete</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
   <span class="c1">#...</span>

<span class="hll"><span class="nd">@login_required</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">account_info</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;cadmin/account_info.html&#39;</span><span class="p">)</span>
</span></pre></div>
</td></tr></tbody></table></div>
<p>Create a template called <code>account_info.html</code> and add the following code to it:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/account_info.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&#34;cadmin/base_admin.html&#34;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    All Posts - </span><span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">main</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;div class=&#34;main&#34;&gt;</span>

<span class="x">    &lt;p&gt;&amp;#187; &lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;account_info&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Account Info&lt;/a&gt;&lt;/p&gt;</span>

<span class="x">        &lt;table&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Username&lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">request.user.username</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Email&lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">request.user.email</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    </span><span class="cp">{{</span> <span class="nv">request.user.email</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                        NA</span>
<span class="x">                    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Date Joined&lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">request.user.date_joined</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;Last Login&lt;/td&gt;</span>
<span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">request.user.last_login</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">            &lt;/tr&gt;</span>
<span class="x">        &lt;/table&gt;</span>

<span class="x">    &lt;/div&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>At last, open <code>urls.py</code> and add the following URL pattern at the end of the <code>urlpatterns</code> list :</p>

<p><strong>TGDB/django_project/cadmin/urls.py</strong></p>
<div class="codeblock language-python"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^tag/delete/(?P&lt;pk&gt;[\d]+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">tag_delete</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;tag_delete&#39;</span><span class="p">),</span>
<span class="hll">    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^account-info/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">account_info</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;account_info&#39;</span><span class="p">),</span>
</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table></div>
<p>To view logged in user details visit <code>http://127.0.0.1:8000/cadmin/account-info/</code>.</p>

<p><img src="../../media/uploads/2017/09/11/account-info-page-FXUATR.png" loading="lazy" alt=""/></p>
<span id="sidebar-links" class="anchor-target"></span><h2 class="heading">Sidebar Links <a class="header-link" href="#sidebar-links">#</a></h2>

<p>We have created all the required pages for our cadmin app. The only thing remain is to add links to the pages in the sidebar. Open <code>base_admin.html</code> and modify the links in the sidebar as follows as follows:</p>

<p><strong>TGDB/django_project/cadmin/templates/cadmin/base_admin.html</strong></p>
<div class="codeblock language-jinja"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# ... #}</span><span class="x"></span>
<span class="x">&lt;div class=&#34;sidebar&#34;&gt;</span>
<span class="x">    &lt;ul&gt;</span>
<span class="x">        &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;post_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Post&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">        &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;category_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Category&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">        &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;tag_list&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Tag&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">        &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;account_info&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Account Info&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">        &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;password_change&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Change Password&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">        &lt;li&gt;&lt;a target=&#34;_blank&#34; href=&#34;</span><span class="cp">{{</span> <span class="nv">request.scheme</span> <span class="cp">}}</span><span class="x">://</span><span class="cp">{{</span> <span class="nv">request.get_host</span> <span class="cp">}}</span><span class="x">&#34;&gt;View Site&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">        &lt;li&gt;&lt;a href=&#34;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;logout&#39;</span> <span class="cp">%}</span><span class="x">&#34;&gt;Logout&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">        &lt;li&gt;&lt;/li&gt;</span>
<span class="x">    &lt;/ul&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="c">{# ... #}</span><span class="x"></span>
</pre></div>
</td></tr></tbody></table></div>
<p>Nothing new here except <code>request.get_host</code> function. The <code>request</code> object (<code>HttpRequest</code>) has a method called <code>get_host()</code> which returns the hostname. At this point, cadmin app is fully functional, use it to create some new post, categories, and tags.</p>

<p>In the next lesson, we will learn how to integrate a WYSIWYG editor in Django Admin and our custom built cadmin app.</p>

<p><strong>Note:</strong> To checkout this version of the repository type <code>git checkout 36a</code>.</p>



    



        <nav aria-label="pagination">
            <ul class="pager">
                
                    <li class="previous">
                        <a href="../creating-sitemaps-in-django/index.html" title="Creating Sitemaps in Django">
                            <span class="fa fa-arrow-left" aria-hidden="true"></span>
                            Creating Sitemaps in Django
                        </a>
                    </li>
                

                
                    <li class="next">
                        <a href="../integrating-ckeditor-in-django/index.html" title="Integrating CKeditor in Django">
                            Integrating CKeditor in Django
                            <span class="fa fa-arrow-right" aria-hidden="true"></span>
                        </a>
                    </li>
                
            </ul>
        </nav>







    <hr/>
    <div id="disqus_thread">
    <p style="margin-bottom: 10px" class="text-center">
        <a href="#" class=" btn btn-primary comments-holder" onclick="loadDisqus();return false;">
            <i class="fa fa-comments" aria-hidden="true"></i> Load Comments
        </a>
    </p>
    </div>
    <hr/>
    <script>
        var is_disqus_loaded = false;
        function loadDisqus() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = '../../../overiqcom.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        };
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>







            </div>
        </div>


        <div class="sidebar">
        
            <div class="col-lg-4 col-md-4 col-sm-12">
                

    
        
    <div class="well">
        <h4>Django 1.10 Tutorial</h4>
        <ul>
            
                <li><a href="../intro-to-django/index.html">Intro to Django</a></li>
            
                <li><a href="../installing-django/index.html">Installing Django</a></li>
            
                <li><a href="../creating-django-project/index.html">Creating Django Project</a></li>
            
                <li><a href="../mvc-pattern-and-django/index.html">MVC Pattern and Django</a></li>
            
                <li><a href="../views-and-urlconfs-in-django/index.html">Views and URLconfs in Django</a></li>
            
                <li><a href="../basics-of-django-templates/index.html">Basics of Django Templates</a></li>
            
                <li><a href="../template-tags-in-django/index.html">Template tags in Django</a></li>
            
                <li><a href="../template-filters-in-django/index.html">Template filters in Django</a></li>
            
                <li><a href="../loading-templates-in-django/index.html">Loading Templates in Django</a></li>
            
                <li><a href="../template-inheritance-in-django/index.html">Template Inheritance in Django</a></li>
            
                <li><a href="../basics-of-models-in-django/index.html">Basics of Models in Django</a></li>
            
                <li><a href="../migrations-in-django/index.html">Migrations in Django</a></li>
            
                <li><a href="../django-orm-basics/index.html">Django ORM Basics</a></li>
            
                <li><a href="../accessing-related-data-using-django-orm/index.html">Accessing Related Data Using Django ORM</a></li>
            
                <li><a href="../building-blog-the-first-steps/index.html">Building Blog The First Steps</a></li>
            
                <li><a href="../django-admin-app/index.html">Django Admin App</a></li>
            
                <li><a href="../creating-urls-in-django/index.html">Creating URLs in Django</a></li>
            
                <li><a href="../showing-404-errors-in-django/index.html">Showing 404 errors In Django</a></li>
            
                <li><a href="../redirecting-urls-in-django/index.html">Redirecting URLs in Django</a></li>
            
                <li><a href="../django-form-basics/index.html">Django Form Basics</a></li>
            
                <li><a href="../displaying-forms-in-django/index.html">Displaying Forms in Django</a></li>
            
                <li><a href="../building-contact-us-page/index.html">Building Contact Us Page</a></li>
            
                <li><a href="../django-rendering-fields-manually/index.html">Django Rendering Fields Manually</a></li>
            
                <li><a href="../handling-static-content-in-django/index.html">Handling Static Content in Django</a></li>
            
                <li><a href="../handling-media-files-in-django/index.html">Handling Media Files in Django</a></li>
            
                <li><a href="../pagination-in-django/index.html">Pagination in Django</a></li>
            
                <li><a href="../cookies-in-django/index.html">Cookies in Django</a></li>
            
                <li><a href="../sessions-in-django/index.html">Sessions in Django</a></li>
            
                <li><a href="../django-authentication-framework-basics/index.html">Django Authentication Framework Basics</a></li>
            
                <li><a href="../django-logging-users-in-and-out/index.html">Django Logging Users In and Out</a></li>
            
                <li><a href="../django-password_change-view/index.html">Django password_change() View</a></li>
            
                <li><a href="../django-creating-users-using-usercreationform/index.html">Django Creating Users using UserCreationForm</a></li>
            
                <li><a href="../django-extending-user-model/index.html">Django Extending User model</a></li>
            
                <li><a href="../flatpages-in-django/index.html">Flatpages in Django</a></li>
            
                <li><a href="../creating-sitemaps-in-django/index.html">Creating Sitemaps in Django</a></li>
            
                <li><a href="index.html">Revisiting cadmin App</a></li>
            
                <li><a href="../integrating-ckeditor-in-django/index.html">Integrating CKeditor in Django</a></li>
            
        </ul>
    </div>

    

    
        

<div class="well">
    <h4>Recent Posts</h4>
    <ul>
        
            <li><a href="../../machine-learning-experts-you-should-be-following-online/index.html">Machine Learning Experts You Should Be Following Online</a></li>
        
            <li><a href="../../4-ways-to-prepare-for-the-ap-computer-science-a-exam/index.html">4 Ways to Prepare for the AP Computer Science A Exam</a></li>
        
            <li><a href="../../finance-assignment-online-help-for-the-busy-and-tired-students-get-help-from-experts/index.html">Finance Assignment Online Help for the Busy and Tired Students: Get Help from Experts</a></li>
        
            <li><a href="../../top-9-machine-learning-algorithms-for-data-scientists/index.html">Top 9 Machine Learning Algorithms for Data Scientists</a></li>
        
            <li><a href="../../data-science-learning-path-or-steps-to-become-a-data-scientist-final/index.html">Data Science Learning Path or Steps to become a data scientist Final</a></li>
        
            <li><a href="../../enable-edit-button-in-shutter-in-linux-mint-19-and-ubuntu-18-04/index.html">Enable Edit Button in Shutter In Linux Mint 19 and Ubuntu 18.04</a></li>
        
            <li><a href="../../python-3-time-module/index.html">Python 3 time module</a></li>
        
            <li><a href="../../pygments-tutorial/index.html">Pygments Tutorial</a></li>
        
            <li><a href="../../how-to-use-virtualenv/index.html">How to use Virtualenv?</a></li>
        
            <li><a href="../../installing-mysql-windows-linux-and-mac/index.html">Installing MySQL (Windows, Linux and Mac)</a></li>
        
            <li><a href="../../what-is-if-__name__-__main__-in-python/index.html">What is if __name__ == &#39;__main__&#39;  in Python ?</a></li>
        
            <li><a href="../../installing-goaccess-a-real-time-web-log-analyzer/index.html">Installing GoAccess (A Real-time web log analyzer)</a></li>
        
            <li><a href="../../installing-isso/index.html">Installing Isso</a></li>
        
    </ul>
</div>

<!-- Blog Search Well -->





















    



            </div>
        </div>
    </div>



    

</div>

<!-- Footer -->
<footer class="overiq-footer">
    <div class="container">
        <div class="row">

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../terms-of-use/index.html">Terms</a></li>
                    <li><a href="../../privacy-policy/index.html">Privacy Policy</a></li>
                    <li><a href="../../sitemap.xml/index.html">Sitemap</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../contact/index.html">Contact</a></li>
                    <li><a href="../../blog/index.html">Blog</a></li>
                </ul>

            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="https://www.facebook.com/OverIQ/">Facebook</a></li>
                    <li><a href="https://twitter.com/infoOverIQ">Twitter</a></li>
                    <li><a href="https://github.com/overiq">Github</a></li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 overiq-footer-links">
                <ul>
                    <li><a href="../../c-programming-101/index.html">C Tutorial</a></li>
                    <li><a href="../../python-101/index.html">Python Tutorial</a></li>
                    <li><a href="../../django-1-11/index.html">Django Tutorial</a></li>
                    <li><a href="../../flask-101/index.html">Flask Tutorial</a></li>
                    <li><a href="../../mysql-connector-python-101/index.html">MySQL Connector/Python Tutorial</a></li>
                    <li><a href="../../sqlalchemy-101/index.html">SQLAlchemy Tutorial</a></li>
                    <li><a href="../../c-examples/index.html">C Programming Examples</a></li>
                </ul>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <div class="row text-center">
            <p>© 2025 OverIQ.com</p>
            <small><a href="#">Back to top</a></small>
        </div>

        <!-- /.row -->
    </div>
</footer>



<script type="text/javascript" src="../../static/CACHE/js/output.2e0ff002c1a4.js"></script>




<script async="" src="../../../cdn.jsdelivr.net/npm/cookieconsent%403/build/cookieconsent.min.js" data-cfasync="false"></script>

<script>

    
    window.addEventListener('load', function () {
        window.cookieconsent.initialise({
            "palette": {
                "popup": {
                    "background": "#5ca9e0",
                    "text": "#ffffff"
                },
                "button": {
                    "background": "#fff",
                    "text": "#237afc"
                }
            },
            "theme": "classic",
            "position": "top",
            "static": true,
            "content": {
                "href": "https://overiq.com/privacy-policy/"
            }
        });
    });


</script>

<script src="../../../polyfill.io/v3/polyfill.min1162.js?features=es6"></script>
<script id="MathJax-script" defer="" src="../../../cdn.jsdelivr.net/npm/mathjax%403/es5/tex-chtml.js"></script>

<script async="" type="text/javascript" src="../../../cdn.carbonads.com/carbonfbdb.js?serve=CE7DC53E&amp;placement=overiqcom" id="_carbonads_js"></script>





<script data-cfasync="false">function _emitEzConsentEvent(){var customEvent=new CustomEvent("ezConsentEvent",{detail:{ezTcfConsent:window.ezTcfConsent},bubbles:true,cancelable:true,});document.dispatchEvent(customEvent);}
(function(window,document){function _setAllEzConsentTrue(){window.ezTcfConsent.loaded=true;window.ezTcfConsent.store_info=true;window.ezTcfConsent.develop_and_improve_services=true;window.ezTcfConsent.measure_ad_performance=true;window.ezTcfConsent.measure_content_performance=true;window.ezTcfConsent.select_basic_ads=true;window.ezTcfConsent.create_ad_profile=true;window.ezTcfConsent.select_personalized_ads=true;window.ezTcfConsent.create_content_profile=true;window.ezTcfConsent.select_personalized_content=true;window.ezTcfConsent.understand_audiences=true;window.ezTcfConsent.use_limited_data_to_select_content=true;window.ezTcfConsent.select_personalized_content=true;}
function _clearEzConsentCookie(){document.cookie="ezCMPCookieConsent=tcf2;Domain=.overiq.com;Path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT";}
_clearEzConsentCookie();if(typeof window.__tcfapi!=="undefined"){window.ezgconsent=false;var amazonHasRun=false;function _ezAllowed(tcdata,purpose){return(tcdata.purpose.consents[purpose]||tcdata.purpose.legitimateInterests[purpose]);}
function _handleConsentDecision(tcdata){window.ezTcfConsent.loaded=true;if(!tcdata.vendor.consents["347"]&&!tcdata.vendor.legitimateInterests["347"]){window._emitEzConsentEvent();return;}
window.ezTcfConsent.store_info=_ezAllowed(tcdata,"1");window.ezTcfConsent.develop_and_improve_services=_ezAllowed(tcdata,"10");window.ezTcfConsent.measure_content_performance=_ezAllowed(tcdata,"8");window.ezTcfConsent.select_basic_ads=_ezAllowed(tcdata,"2");window.ezTcfConsent.create_ad_profile=_ezAllowed(tcdata,"3");window.ezTcfConsent.select_personalized_ads=_ezAllowed(tcdata,"4");window.ezTcfConsent.create_content_profile=_ezAllowed(tcdata,"5");window.ezTcfConsent.measure_ad_performance=_ezAllowed(tcdata,"7");window.ezTcfConsent.use_limited_data_to_select_content=_ezAllowed(tcdata,"11");window.ezTcfConsent.select_personalized_content=_ezAllowed(tcdata,"6");window.ezTcfConsent.understand_audiences=_ezAllowed(tcdata,"9");window._emitEzConsentEvent();}
function _handleGoogleConsentV2(tcdata){if(!tcdata||!tcdata.purpose||!tcdata.purpose.consents){return;}
var googConsentV2={};if(tcdata.purpose.consents[1]){googConsentV2.ad_storage='granted';googConsentV2.analytics_storage='granted';}
if(tcdata.purpose.consents[3]&&tcdata.purpose.consents[4]){googConsentV2.ad_personalization='granted';}
if(tcdata.purpose.consents[1]&&tcdata.purpose.consents[7]){googConsentV2.ad_user_data='granted';}
if(googConsentV2.analytics_storage=='denied'){gtag('set','url_passthrough',true);}
gtag('consent','update',googConsentV2);}
__tcfapi("addEventListener",2,function(tcdata,success){if(!success||!tcdata){window._emitEzConsentEvent();return;}
if(!tcdata.gdprApplies){_setAllEzConsentTrue();window._emitEzConsentEvent();return;}
if(tcdata.eventStatus==="useractioncomplete"||tcdata.eventStatus==="tcloaded"){if(typeof gtag!='undefined'){_handleGoogleConsentV2(tcdata);}
_handleConsentDecision(tcdata);if(tcdata.purpose.consents["1"]===true&&tcdata.vendor.consents["755"]!==false){window.ezgconsent=true;(adsbygoogle=window.adsbygoogle||[]).pauseAdRequests=0;}
if(window.__ezconsent){__ezconsent.setEzoicConsentSettings(ezConsentCategories);}
__tcfapi("removeEventListener",2,function(success){return null;},tcdata.listenerId);if(!(tcdata.purpose.consents["1"]===true&&_ezAllowed(tcdata,"2")&&_ezAllowed(tcdata,"3")&&_ezAllowed(tcdata,"4"))){if(typeof __ez=="object"&&typeof __ez.bit=="object"&&typeof window["_ezaq"]=="object"&&typeof window["_ezaq"]["page_view_id"]=="string"){__ez.bit.Add(window["_ezaq"]["page_view_id"],[new __ezDotData("non_personalized_ads",true),]);}}}});}else{_setAllEzConsentTrue();window._emitEzConsentEvent();}})(window,document);</script></body>
<!-- Mirrored from overiq.com/django-1-10/revisiting-cadmin-app/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Feb 2025 11:06:22 GMT -->
</html>